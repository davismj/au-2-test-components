!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=6)}([function(t,e,s){"use strict";(function(t,i){s.d(e,"a",(function(){return p}));const n=function(){if(void 0!==t)return t;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return new Function("return this")()}catch(t){return{}}}(),r="undefined"!=typeof window&&void 0!==window.document,o="object"==typeof self&&null!=self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,a=void 0!==i&&null!=i.versions&&null!=i.versions.node,c=function(){let t,e,s,i,r;if(null!=n.performance&&null!=n.performance.now){const t=n.performance;return function(){return t.now()}}if(null!=n.process&&null!=n.process.hrtime){const o=function(){return(t()-i)/1e6};return e=n.process.hrtime,s=(t=function(){const t=e();return 1e9*t[0]+t[1]})(),r=1e9*n.process.uptime(),i=s-r,o}{const t=function(){return Date.now()-i};return i=Date.now(),t}}(),h=Object.prototype.hasOwnProperty,l=Object.freeze([]),u=Object.freeze({}),d={isBrowserLike:r,isWebWorkerLike:o,isNodeLike:a,global:n,emptyArray:l,emptyObject:u,noop:function(){},now:c,hasOwnProperty:h,restore(){Object.assign(p,d)}},p={...d}}).call(this,s(4),s(5))},function(t,e){t.exports='<template class="au-date-picker" tabindex="0" focusin.delegate="open()">\n  <input type="text" value.bind="value | asDate" />\n  <div class="au-date-picker-calendar" if.bind="state === 1">\n    <div class="au-date-picker-header">\n      <button click.delegate="setMonth(currentMonth - 1)"><</button>\n      <span class="au-date-picker-header-current-year-month">${getMonth(currentMonth)} ${currentYear}</span>\n      <button click.delegate="setMonth(currentMonth + 1)">></button>\n    </div>\n    <div class="au-date-picker-dates">\n      <div class="au-date-picker-weekday" repeat.for="weekday of 7">${getWeekday(weekday)}</div>\n      <div class="au-date-picker-day" repeat.for="day of weeksInMonth(currentYear, currentMonth) * 7">${getDate(currentYear, currentMonth, day)}</div>\n    </div>\n  </div>\n  <style>\n    .au-date-picker {\n      display: inline-block;\n    }\n    .au-date-picker-calendar {\n      display: flex;\n      flex-direction: column;\n      border: 1px solid currentColor;\n      padding: 0.5rem;\n    }\n    .au-date-picker-header {\n      display: flex;\n    }\n    .au-date-picker-header-current-year-month {\n      margin: auto;\n    }\n    .au-date-picker-dates {\n      display: grid;\n      grid-template-columns: repeat(7, 1fr);\n    }\n    .au-date-picker-weekday {\n      font-size: 0.8rem;\n    }\n    .au-date-picker-day,\n    .au-date-picker-weekday {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 1rem;\n      width: 1rem;\n      padding: 0.5rem;\n      border-radius: 50%;\n    }\n    .au-date-picker-day:hover {\n      background: grey;\n    }\n  </style>\n</template>\n'},function(t,e){t.exports="<div>\n  <au-date-picker></au-date-picker>\n</div>\n"},function(t,e){t.exports='<div style="display: flex;">\n  <ul style="width: 20vw;">\n    <li repeat.for="module of modules">\n      <a href="${module}">${module}</a>\n    </li>\n  </ul>\n  <au-viewport style="width: 75vw;"></au-viewport>\n</div>\n'},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},function(t,e){var s,i,n=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var c,h=[],l=!1,u=-1;function d(){l&&c&&(l=!1,c.length?h=c.concat(h):u=-1,h.length&&p())}function p(){if(!l){var t=a(d);l=!0;for(var e=h.length;e;){for(c=h,h=[];++u<e;)c&&c[u].run();u=-1,e=h.length}c=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];h.push(new f(t,e)),1!==h.length||l||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,s){"use strict";s.r(e);var i,n=s(0);!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(i||(i={}));const r={level:3,write(t,...e){},error:(t,...e)=>new Error(`Code ${t}`)};const o=new WeakMap;function a(t){switch(typeof t){case"function":return t;case"object":if(null===t)throw new TypeError("Attempted to perform get() or define() metadata operation on null value.");return t;default:throw new TypeError(`Attempted to perform get() or define() metadata operation on ${typeof t} value: ${t}.`)}}function c(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function h(t,e,s){let i=o.get(t);if(void 0===i){if(!s)return;i=new Map,o.set(t,i)}let n=i.get(e);if(void 0===n){if(!s)return;n=new Map,i.set(e,n)}return n}function l(t,e,s){const i=h(e,s,!1);return void 0!==i&&i.has(t)}function u(t,e,s){const i=h(e,s,!1);if(void 0!==i)return i.get(t)}function d(t,e,s,i){h(s,i,!0).set(t,e)}function p(t,e){const s=[],i=h(t,e,!1);if(void 0===i)return s;const n=i.keys();let r=0;for(const t of n)s[r]=t,++r;return s}function f(t,e,s,i){return d(t,e,a(s),c(i))}function g(t,e,s){return function t(e,s,i){if(l(e,s,i))return!0;const n=Object.getPrototypeOf(s);return null!==n&&t(e,n,i)}(t,a(e),c(s))}function v(t,e,s){return l(t,a(e),c(s))}function m(t,e,s){return function t(e,s,i){if(l(e,s,i))return u(e,s,i);const n=Object.getPrototypeOf(s);return null!==n?t(e,n,i):void 0}(t,a(e),c(s))}function b(t,e,s){return u(t,a(e),c(s))}function y(t,e){return function t(e,s){const i=p(e,s),n=Object.getPrototypeOf(e);if(null===n)return i;const r=t(n,s),o=i.length;if(0===o)return r;const a=r.length;if(0===a)return i;const c=new Set,h=[];let l,u=0;for(let t=0;t<o;++t)l=i[t],c.has(l)||(c.add(l),h[u]=l,++u);for(let t=0;t<a;++t)l=r[t],c.has(l)||(c.add(l),h[u]=l,++u);return h}(a(t),c(e))}function w(t,e){return p(a(t),c(e))}function k(t,e,s){return function(t,e,s){const i=h(t,s,!1);return void 0!==i&&i.delete(e)}(a(e),t,c(s))}const C={define:f,has:g,hasOwn:v,get:m,getOwn:b,getKeys:y,getOwnKeys:w,delete:k};function T(t,e,s){Reflect.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:s})}T(C,"$Internal",o);const S="metadata"in Reflect,x="decorate"in Reflect,A="defineMetadata"in Reflect,$="hasMetadata"in Reflect,V="hasOwnMetadata"in Reflect,O="getMetadata"in Reflect,E="getOwnMetadata"in Reflect,I="getMetadataKeys"in Reflect,P="getOwnMetadataKeys"in Reflect,R="deleteMetadata"in Reflect;(S||x||A||$||V||O||E||I||P||R)&&!(S&&x&&A&&$&&V&&O&&E&&I&&P&&R)&&console.warn("Partial existing Reflect.metadata polyfill found. Working environment cannot be guaranteed. Please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario."),S||T(Reflect,"metadata",(function(t,e){return function(s,i){d(t,e,a(s),function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(i))}})),x||T(Reflect,"decorate",(function(t,e,s,i){if(void 0!==s){if(!Array.isArray(t))throw new TypeError;if("object"!=typeof e||null===e)throw new TypeError;if(("object"!=typeof i||null===i)&&"function"!=typeof i&&null!=i)throw new TypeError;return null===i&&(i=void 0),function(t,e,s,i){for(let n=t.length-1;n>=0;--n){const r=(0,t[n])(e,s,i);if(null!=r){if(("object"!=typeof r||null===r)&&"function"!=typeof r)throw new TypeError;i=r}}return i}(t,e,s=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(s),i)}if(!Array.isArray(t))throw new TypeError;if("function"!=typeof e)throw new TypeError;return function(t,e){for(let s=t.length-1;s>=0;--s){const i=(0,t[s])(e);if(null!=i){if("function"!=typeof i)throw new TypeError;e=i}}return e}(t,e)})),A||T(Reflect,"defineMetadata",f),$||T(Reflect,"hasMetadata",g),V||T(Reflect,"hasOwnMetadata",v),O||T(Reflect,"getMetadata",m),E||T(Reflect,"getOwnMetadata",b),I||T(Reflect,"getMetadataKeys",y),P||T(Reflect,"getOwnMetadataKeys",w),R||T(Reflect,"deleteMetadata",k);class F{constructor(t){this.context=t}find(t,e){const s=t.keyFrom(e);let i=this.context.resourceResolvers,n=i[s];if(void 0===n&&(n=(i=this.context.root.resourceResolvers)[s]),null!=n&&n.getFactory){const e=n.getFactory(this.context);if(null!=e){const s=C.getOwn(t.name,e.Type);return void 0===s?null:s}}return null}create(t,e){const s=t.keyFrom(e);let i=this.context.resourceResolvers,n=i[s];if(void 0===n&&(n=(i=this.context.root.resourceResolvers)[s]),null!=n){const t=n.resolve(this.context,this.context);return void 0===t?null:t}return null}}const N={name:"au:annotation",appendTo(t,e){const s=C.getOwn(N.name,t);void 0===s?C.define(N.name,[e],t):s.push(e)},set(t,e,s){C.define(N.keyFor(e),s,t)},get:(t,e)=>C.getOwn(N.keyFor(e),t),getKeys(t){let e=C.getOwn(N.name,t);return void 0===e&&C.define(N.name,e=[],t),e},isKey:t=>t.startsWith(N.name),keyFor:(t,e)=>void 0===e?`${N.name}:${t}`:`${N.name}:${t}:${e}`},L={name:"au:resource",appendTo(t,e){const s=C.getOwn(L.name,t);void 0===s?C.define(L.name,[e],t):s.push(e)},has:t=>C.hasOwn(L.name,t),getAll(t){const e=C.getOwn(L.name,t);return void 0===e?n.a.emptyArray:e.map(e=>C.getOwn(e,t))},getKeys(t){let e=C.getOwn(L.name,t);return void 0===e&&C.define(L.name,e=[],t),e},isKey:t=>t.startsWith(L.name),keyFor:(t,e)=>void 0===e?`${L.name}:${t}`:`${L.name}:${t}:${e}`},j={annotation:N,resource:L},B=Object.prototype.hasOwnProperty;function D(t,e,s,i){let n=C.getOwn(j.annotation.keyFor(t),s);return void 0===n&&void 0===(n=e[t])?void 0!==(n=s[t])&&B.call(s,t)?n:i():n}function M(t,e,s){let i=C.getOwn(j.annotation.keyFor(t),e);return void 0===i?void 0!==(i=e[t])&&B.call(e,t)?i:s():i}function _(t,e,s){const i=e[t];return void 0===i?s():i}const U={};function q(t){switch(typeof t){case"number":return!0;case"string":{const e=U[t];if(void 0!==e)return e;const{length:s}=t;if(0===s)return U[t]=!1;let i=0;for(let e=0;e<s;++e)if((i=t.charCodeAt(e))<48||i>57)return U[t]=!1;return U[t]=!0}default:return!1}}function z(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function K(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const H=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(Object.create(null),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function s(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",c=0,h=t.charAt(0),l=s(h);for(let u=0;u<i;++u)n=c,a=h,c=l,l=s(h=t.charAt(u+1)),0===c?o.length>0&&(r=!0):(!r&&o.length>0&&2===c&&(r=3===n||3===l),o+=e(a,r),r=!1);return o}}(),W=function(){const t=Object.create(null);function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(s){let i=t[s];return void 0===i&&(i=t[s]=H(s,e)),i}}(),Q=function(){const t=Object.create(null);return function(e){let s=t[e];return void 0===s&&((s=W(e)).length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),G=function(){const t=Object.create(null);function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(s){let i=t[s];return void 0===i&&(i=t[s]=H(s,e)),i}}();const Y={};function J(t){return void 0===Y[t]&&(Y[t]=0),++Y[t]}function X(t,e){return t-e}const Z=n.a.emptyArray;function tt(t,e,s){if(null==t||t===Z)return null==e||e===Z?Z:s?e.slice(0):e;if(null==e||e===Z)return s?t.slice(0):t;const i={},n=s?t.slice(0):t;let r,o=t.length,a=e.length;for(;o-- >0;)i[t[o]]=!0;for(;a-- >0;)void 0===i[r=e[a]]&&(n.push(r),i[r]=!0);return n}function et(t,e,s){return{configurable:!0,enumerable:s.enumerable,get(){const t=s.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:s.enumerable}),t}}}function st(...t){const e=[];let s=0;const i=t.length;let n,r=0;for(let o=0;o<i;++o)if(void 0!==(n=t[o])){r=n.length;for(let t=0;t<r;++t)e[s++]=n[t]}return e}function it(...t){const e=t.length;let s;for(let i=0;i<e;++i)if(void 0!==(s=t[i]))return s;throw new Error("No default value found")}const nt=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i=t,n=0,r=void 0;return function(o){if(void 0===(r=s.get(o)))for(s.set(o,r=[i=o]),n=0;(i=e(i))!==t;)r[++n]=i;return r}}();function rt(...t){return Object.assign(Object.create(null),...t)}function ot(t){const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)q(n=s[r])||(e[n]=t[n]);return e}class at{constructor(){}static createContainer(...t){return 0===t.length?new wt(null):new wt(null).register(...t)}static getDesignParamtypes(t){return C.getOwn("design:paramtypes",t)}static getAnnotationParamtypes(t){const e=j.annotation.keyFor("di:paramtypes");return C.getOwn(e,t)}static getOrCreateAnnotationParamTypes(t){const e=j.annotation.keyFor("di:paramtypes");let s=C.getOwn(e,t);return void 0===s&&(C.define(e,s=[],t),j.annotation.appendTo(t,e)),s}static getDependencies(t){const e=j.annotation.keyFor("di:dependencies");let s=C.getOwn(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=at.getDesignParamtypes(t),i=at.getAnnotationParamtypes(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s="function"==typeof e&&e!==Function.prototype?ot(at.getDependencies(e)):[]}else s=ot(i);else if(void 0===i)s=ot(e);else{s=ot(e);let t,n=i.length;for(let e=0;e<n;++e)void 0!==(t=i[e])&&(s[e]=t);const r=Object.keys(i);let o;n=r.length;for(let t=0;t<n;++t)q(o=r[t])||(s[o]=i[o])}}else s=ot(i);C.define(e,s,t),j.annotation.appendTo(t,e)}return s}static createInterface(t){const e=function(t,s,i){if(null==t)throw r.error(16,e.friendlyName,e);return at.getOrCreateAnnotationParamTypes(t)[i]=e,t};return e.friendlyName=null==t?"Interface":t,e.noDefault=function(){return e},e.withDefault=function(t){return e.withDefault=function(){throw r.error(17,e)},e.register=function(s,i){const n=null==i?e:i;return t({instance:t=>s.registerResolver(n,new ft(n,0,t)),singleton:t=>s.registerResolver(n,new ft(n,1,t)),transient:t=>s.registerResolver(n,new ft(n,2,t)),callback:t=>s.registerResolver(n,new ft(n,3,t)),aliasTo:t=>s.registerResolver(n,new ft(n,5,t))})},e},e}static inject(...t){return function(e,s,i){if("number"==typeof i){const s=at.getOrCreateAnnotationParamTypes(e),n=t[0];void 0!==n&&(s[i]=n)}else if(s){const i=at.getOrCreateAnnotationParamTypes(e.constructor),n=t[0];void 0!==n&&(i[s]=n)}else if(i){const e=i.value,s=at.getOrCreateAnnotationParamTypes(e);let n;for(let e=0;e<t.length;++e)void 0!==(n=t[e])&&(s[e]=n)}else{const s=at.getOrCreateAnnotationParamTypes(e);let i;for(let e=0;e<t.length;++e)void 0!==(i=t[e])&&(s[e]=i)}}}static transient(t){return t.register=function(e){return Ct.transient(t,t).register(e,t)},t}static singleton(t){return t.register=function(e){return Ct.singleton(t,t).register(e,t)},t}}const ct=at.createInterface("IContainer").noDefault(),ht=ct;function lt(t){return function(e){const s=function(t,e,i){at.inject(s)(t,e,i)};return s.resolve=function(s,i){return t(e,s,i)},s}}const ut=at.inject;const dt=lt((t,e,s)=>s.getAll(t));lt((t,e,s)=>{let i=null;return()=>(null==i&&(i=s.get(t)),i)}),lt((t,e,s)=>s.has(t,!0)?s.get(t):null);var pt;!function(t){t[t.instance=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.callback=3]="callback",t[t.array=4]="array",t[t.alias=5]="alias"}(pt||(pt={}));class ft{constructor(t,e,s){this.key=t,this.strategy=e,this.state=s}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const s=t.getFactory(this.state);if(null===s)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return this.state=s.construct(e)}case 2:{const s=t.getFactory(this.state);if(null===s)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return s.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return t.get(this.state);default:throw r.error(6,this.strategy)}}getFactory(t){let e;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null==(e=t.getResolver(this.state))||void 0===e.getFactory?null:e.getFactory(t);default:return null}}}class gt{constructor(t,e,s){this.Type=t,this.invoker=e,this.dependencies=s,this.transformers=null}construct(t,e){const s=this.transformers;let i=void 0!==e?this.invoker.invokeWithDynamicDependencies(t,this.Type,this.dependencies,e):this.invoker.invoke(t,this.Type,this.dependencies);if(null==s)return i;for(let t=0,e=s.length;t<e;++t)i=s[t](i);return i}registerTransformer(t){return null==this.transformers&&(this.transformers=[]),this.transformers.push(t),!0}}const vt=function(){function t(t,e,s,i){let n,o=s.length,a=new Array(o);for(;o-- >0;){if(null==(n=s[o]))throw r.error(7,`Index ${o}.`);a[o]=t.get(n)}return void 0!==i&&(a=a.concat(i)),Reflect.construct(e,a)}const e=[{invoke:(t,e)=>new e,invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0])),invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0]),t.get(s[1])),invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0]),t.get(s[1]),t.get(s[2])),invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3])),invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3]),t.get(s[4])),invokeWithDynamicDependencies:t}],s={invoke:t,invokeWithDynamicDependencies:t};return function(t){const i=at.getDependencies(t),n=e.length>i.length?e[i.length]:s;return new gt(t,n,i)}}(),mt={resolve:(t,e)=>e};function bt(t){return"function"==typeof t.register}const yt=function(){let t=0;return function(){return++t}}();class wt{constructor(t){this.parent=t,this.id=yt(),this.registerDepth=0,null===t?(this.path=this.id.toString(),this.root=this,this.resolvers=new Map,this.resourceResolvers=Object.create(null)):(this.path=`${t.path}.${this.id}`,this.root=t.root,this.resolvers=new Map,this.resourceResolvers=Object.assign(Object.create(null),this.root.resourceResolvers)),this.resolvers.set(ct,mt)}register(...t){if(100==++this.registerDepth)throw new Error("Unable to autoregister dependency");let e,s,i,n,r;for(let o=0,a=t.length;o<a;++o)if(bt(e=t[o]))e.register(this);else if(j.resource.has(e)){const t=j.resource.getAll(e);if(1===t.length)t[0].register(this);else{const e=t.length;for(let s=0;s<e;++s)t[s].register(this)}}else if(void 0!==e.prototype)Ct.singleton(e,e).register(this);else for(n=0,r=(s=Object.keys(e)).length;n<r;++n)bt(i=e[s[n]])?i.register(this):this.register(i);return--this.registerDepth,this}registerResolver(t,e){St(t);const s=this.resolvers,i=s.get(t);return null==i?(s.set(t,e),function(t){return"string"==typeof t&&t.indexOf(":")>0}(t)&&(this.resourceResolvers[t]=e)):i instanceof ft&&4===i.strategy?i.state.push(e):s.set(t,new ft(t,4,[i,e])),e}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&t.registerTransformer(e)}return!1}getResolver(t,e=!0){if(St(t),void 0!==t.resolve)return t;let s,i=this;for(;null!=i;){if(null!=(s=i.resolvers.get(t)))return s;if(null==i.parent)return e?this.jitRegister(t,i):null;i=i.parent}return null}has(t,e=!1){return!!this.resolvers.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(St(t),void 0!==t.resolve)return t.resolve(this,this);let e,s=this;for(;null!=s;){if(null!=(e=s.resolvers.get(t)))return e.resolve(s,this);if(null==s.parent)return(e=this.jitRegister(t,s)).resolve(s,this);s=s.parent}throw new Error(`Unable to resolve key: ${t}`)}getAll(t){St(t);let e,s=this;for(;null!=s;){if(null!=(e=s.resolvers.get(t)))return xt(e,s,this);if(null==this.parent)return n.a.emptyArray;s=s.parent}return n.a.emptyArray}getFactory(t){const e=j.annotation.keyFor("di:factory");let s=C.getOwn(e,t);return void 0===s&&(C.define(e,s=vt(t),t),j.annotation.appendTo(t,e)),s}createChild(){return new wt(this)}jitRegister(t,e){if("function"!=typeof t)throw new Error(`Attempted to jitRegister something that is not a constructor: '${t}'. Did you forget to register this resource?`);if(bt(t)){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.resolvers.get(t);if(null!=s)return s;throw r.error(40)}return s}if(j.resource.has(t)){const s=j.resource.getAll(t);if(1===s.length)s[0].register(e);else{const t=s.length;for(let i=0;i<t;++i)s[i].register(e)}const i=e.resolvers.get(t);if(null!=i)return i;throw r.error(40)}{const s=new ft(t,1,t);return e.resolvers.set(t,s),s}}}class kt{constructor(t,e){this.key=t,this.params=e}register(t){if(t.has(this.key,!0)){t.get(this.key).register(t,...this.params)}else t.register(...this.params.filter(t=>"object"==typeof t))}}const Ct={instance:(t,e)=>new ft(t,0,e),singleton:(t,e)=>new ft(t,1,e),transient:(t,e)=>new ft(t,2,e),callback:(t,e)=>new ft(t,3,e),alias:(t,e)=>new ft(e,5,t),defer:(t,...e)=>new kt(t,e)};class Tt{constructor(){this.instance=null}prepare(t){this.instance=t}resolve(t,e){if(void 0===this.instance)throw r.error(50);return this.instance}dispose(){this.instance=null}}function St(t){if(null==t||t===Object)throw r.error(5)}function xt(t,e,s){if(t instanceof ft&&4===t.strategy){const i=t.state;let n=i.length;const r=new Array(n);for(;n--;)r[n]=i[n].resolve(e,s);return r}return[t.resolve(e,s)]}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var At;function $t(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}function Vt(t,e){return function(s,i){e(s,i,t)}}!function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(At||(At={}));const Ot=at.createInterface("ILogConfig").noDefault(),Et=at.createInterface("ISink").noDefault(),It=at.createInterface("ILogEventFactory").noDefault(),Pt=at.createInterface("ILogger").noDefault(),Rt=rt({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class Ft{constructor(t,e){this.colorOptions=t,this.level=e}}const Nt=function(){const t=[rt({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),rt({TRC:Rt.grey("TRC"),DBG:Rt.grey("DBG"),INF:Rt.white("INF"),WRN:Rt.yellow("WRN"),ERR:Rt.red("ERR"),FTL:Rt.red("FTL"),QQQ:Rt.grey("???")})];return function(e,s){return e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}}();function Lt(t,e){return 0===e?new Date(t).toISOString():Rt.grey(new Date(t).toISOString())}class jt{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${Lt(n,i)} [${Nt(t,i)}] ${e}`:`${Lt(n,i)} [${Nt(t,i)} ${function(t,e){return 0===e?t.join("."):t.map(Rt.cyan).join(".")}(s,i)}] ${e}`}}let Bt=class{constructor(t){this.config=t}createLogEvent(t,e,s,i){return new jt(e,s,i,t.scope,this.config.colorOptions,Date.now())}};Bt=$t([Vt(0,Ot)],Bt);class Dt{constructor(t){this.emit=function(e){const s=e.optionalParams;if(void 0===s||0===s.length)switch(e.severity){case 0:case 1:return t.debug(e.toString());case 2:return t.info(e.toString());case 3:return t.warn(e.toString());case 4:case 5:return t.error(e.toString())}else switch(e.severity){case 0:case 1:return t.debug(e.toString(),...s);case 2:return t.info(e.toString(),...s);case 3:return t.warn(e.toString(),...s);case 4:case 5:return t.error(e.toString(),...s)}}}}let Mt=class t{constructor(t,e,s,i=[],n=null){this.config=t,this.factory=e,this.sinks=s,this.scope=i,null===n?(this.root=this,this.parent=this):(this.root=n.root,this.parent=n);const r=s.length;let o=0;const a=(t,i,n)=>{const a="function"==typeof i?i():i,c=e.createLogEvent(this,t,a,n);for(o=0;o<r;++o)s[o].emit(c)};this.trace=function(e,...s){t.level<=0&&a(0,e,s)},this.debug=function(e,...s){t.level<=1&&a(1,e,s)},this.info=function(e,...s){t.level<=2&&a(2,e,s)},this.warn=function(e,...s){t.level<=3&&a(3,e,s)},this.error=function(e,...s){t.level<=4&&a(4,e,s)},this.fatal=function(e,...s){t.level<=5&&a(5,e,s)}}scopeTo(e){return new t(this.config,this.factory,this.sinks,this.scope.concat(e),this)}};Mt=$t([Vt(0,Ot),Vt(1,It),Vt(2,dt(Et))],Mt);rt({create:(t,e=3,s=0)=>rt({register:i=>i.register(Ct.instance(Ot,new Ft(s,e)),Ct.instance(Et,new Dt(t)),Ct.singleton(It,Bt),Ct.singleton(Pt,Mt))})});encodeURIComponent;const _t=function(){const t=n.a.now,e=[];let s;const i={createTimer:function(i){e.push(i);let n=0,r=0;return{enter:function(){1==++n&&(r=t(),++s[i].topLevelCount);++s[i].totalCount},leave:function(){0==--n&&(s[i].duration+=t()-r)}}},enable:function(){s={};for(const t of e)s[t]={name:t,duration:0,topLevelCount:0,totalCount:0};i.enabled=!0},disable:function(){i.enabled=!1},report:function(t){Object.keys(s).map(t=>s[t]).sort((t,e)=>e.duration-t.duration).forEach(e=>{t(e.name,e.duration,e.topLevelCount,e.totalCount)})},enabled:!1};return i}();class Ut{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}function qt(t,e,s){try{t(e,s)}catch(t){r.error(0,t)}}function zt(t,e){try{t.handle(e)}catch(t){r.error(0,t)}}at.createInterface("IEventAggregator").withDefault(t=>t.singleton(Kt));class Kt{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){let s,i;if(!t)throw r.error(0);if("string"==typeof t){const n=t;if(null!=(s=this.eventLookup[n]))for(i=(s=s.slice()).length;i--;)qt(s[i],e,n)}else{const e=t;for(i=(s=this.messageHandlers.slice()).length;i--;)zt(s[i],e)}}subscribe(t,e){let s,i;if(!t)throw r.error(0);if("string"==typeof t){const n=t;s=e,void 0===this.eventLookup[n]&&(this.eventLookup[n]=[]),i=this.eventLookup[n]}else s=new Ut(t,e),i=this.messageHandlers;return i.push(s),{dispose(){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,(t,i)=>(s.dispose(),e(t,i)));return s}}function Ht(){return function(t){const e=t.prototype;e._subscriberFlags=0,e.addSubscriber=Qt,e.removeSubscriber=Jt,e.hasSubscriber=ie,e.hasSubscribers=te,e.callSubscribers=oe,void 0===e.subscribe&&(e.subscribe=Qt),void 0===e.unsubscribe&&(e.unsubscribe=Jt)}}function Wt(){return function(t){const e=t.prototype;e._collectionSubscriberFlags=0,e.addCollectionSubscriber=Yt,e.removeCollectionSubscriber=Zt,e.hasCollectionSubscriber=re,e.hasCollectionSubscribers=se,e.callCollectionSubscribers=he,void 0===e.subscribeToCollection&&(e.subscribeToCollection=Yt),void 0===e.unsubscribeFromCollection&&(e.unsubscribeFromCollection=Zt)}}function Qt(t){if(this.hasSubscriber(t))return!1;const e=this._subscriberFlags;return 0==(1&e)?(this._subscriber0=t,this._subscriberFlags|=1):0==(2&e)?(this._subscriber1=t,this._subscriberFlags|=2):0==(4&e)?(this._subscriber2=t,this._subscriberFlags|=4):0==(8&e)?(this._subscribersRest=[t],this._subscriberFlags|=8):this._subscribersRest.push(t),!0}function Gt(t){if(this.hasProxySubscriber(t))return!1;const e=this._proxySubscriberFlags;return 0==(1&e)?(this._proxySubscriber0=t,this._proxySubscriberFlags|=1):0==(2&e)?(this._proxySubscriber1=t,this._proxySubscriberFlags|=2):0==(4&e)?(this._proxySubscriber2=t,this._proxySubscriberFlags|=4):0==(8&e)?(this._proxySubscribersRest=[t],this._proxySubscriberFlags|=8):this._proxySubscribersRest.push(t),!0}function Yt(t){if(this.hasCollectionSubscriber(t))return!1;const e=this._collectionSubscriberFlags;return 0==(1&e)?(this._collectionSubscriber0=t,this._collectionSubscriberFlags|=1):0==(2&e)?(this._collectionSubscriber1=t,this._collectionSubscriberFlags|=2):0==(4&e)?(this._collectionSubscriber2=t,this._collectionSubscriberFlags|=4):0==(8&e)?(this._collectionSubscribersRest=[t],this._collectionSubscriberFlags|=8):this._collectionSubscribersRest.push(t),!0}function Jt(t){const e=this._subscriberFlags;if((1&e)>0&&this._subscriber0===t)return this._subscriber0=void 0,this._subscriberFlags=1^(1|this._subscriberFlags),!0;if((2&e)>0&&this._subscriber1===t)return this._subscriber1=void 0,this._subscriberFlags=2^(2|this._subscriberFlags),!0;if((4&e)>0&&this._subscriber2===t)return this._subscriber2=void 0,this._subscriberFlags=4^(4|this._subscriberFlags),!0;if((8&e)>0){const e=this._subscribersRest;for(let s=0,i=e.length;s<i;++s)if(e[s]===t)return e.splice(s,1),1===i&&(this._subscriberFlags=8^(8|this._subscriberFlags)),!0}return!1}function Xt(t){const e=this._proxySubscriberFlags;if((1&e)>0&&this._proxySubscriber0===t)return this._proxySubscriber0=void 0,this._proxySubscriberFlags=1^(1|this._proxySubscriberFlags),!0;if((2&e)>0&&this._proxySubscriber1===t)return this._proxySubscriber1=void 0,this._proxySubscriberFlags=2^(2|this._proxySubscriberFlags),!0;if((4&e)>0&&this._proxySubscriber2===t)return this._proxySubscriber2=void 0,this._proxySubscriberFlags=4^(4|this._proxySubscriberFlags),!0;if((8&e)>0){const e=this._proxySubscribersRest;for(let s=0,i=e.length;s<i;++s)if(e[s]===t)return e.splice(s,1),1===i&&(this._proxySubscriberFlags=8^(8|this._proxySubscriberFlags)),!0}return!1}function Zt(t){const e=this._collectionSubscriberFlags;if((1&e)>0&&this._collectionSubscriber0===t)return this._collectionSubscriber0=void 0,this._collectionSubscriberFlags=1^(1|this._collectionSubscriberFlags),!0;if((2&e)>0&&this._collectionSubscriber1===t)return this._collectionSubscriber1=void 0,this._collectionSubscriberFlags=2^(2|this._collectionSubscriberFlags),!0;if((4&e)>0&&this._collectionSubscriber2===t)return this._collectionSubscriber2=void 0,this._collectionSubscriberFlags=4^(4|this._collectionSubscriberFlags),!0;if((8&e)>0){const e=this._collectionSubscribersRest;for(let s=0,i=e.length;s<i;++s)if(e[s]===t)return e.splice(s,1),1===i&&(this._collectionSubscriberFlags=8^(8|this._collectionSubscriberFlags)),!0}return!1}function te(){return 0!==this._subscriberFlags}function ee(){return 0!==this._proxySubscriberFlags}function se(){return 0!==this._collectionSubscriberFlags}function ie(t){const e=this._subscriberFlags;if((1&e)>0&&this._subscriber0===t)return!0;if((2&e)>0&&this._subscriber1===t)return!0;if((4&e)>0&&this._subscriber2===t)return!0;if((8&e)>0){const e=this._subscribersRest;for(let s=0,i=e.length;s<i;++s)if(e[s]===t)return!0}return!1}function ne(t){const e=this._proxySubscriberFlags;if((1&e)>0&&this._proxySubscriber0===t)return!0;if((2&e)>0&&this._proxySubscriber1===t)return!0;if((4&e)>0&&this._proxySubscriber2===t)return!0;if((8&e)>0){const e=this._proxySubscribersRest;for(let s=0,i=e.length;s<i;++s)if(e[s]===t)return!0}return!1}function re(t){const e=this._collectionSubscriberFlags;if((1&e)>0&&this._collectionSubscriber0===t)return!0;if((2&e)>0&&this._collectionSubscriber1===t)return!0;if((4&e)>0&&this._collectionSubscriber2===t)return!0;if((8&e)>0){const e=this._collectionSubscribersRest;for(let s=0,i=e.length;s<i;++s)if(e[s]===t)return!0}return!1}function oe(t,e,s){const i=this._subscriber0,n=this._subscriber1,r=this._subscriber2;let o=this._subscribersRest;if(void 0!==o&&(o=o.slice()),void 0!==i&&ae(i,t,e,s,void 0===i.id?0:this[i.id]),void 0!==n&&ae(n,t,e,s,void 0===n.id?0:this[n.id]),void 0!==r&&ae(r,t,e,s,void 0===r.id?0:this[r.id]),void 0!==o){const{length:i}=o;let n;for(let r=0;r<i;++r)void 0!==(n=o[r])&&ae(n,t,e,s,void 0===n.id?0:this[n.id])}}function ae(t,e,s,i,n){t.handleChange(e,s,48^(48|i)|n)}function ce(t,e,s,i){const n=this._proxySubscriber0,r=this._proxySubscriber1,o=this._proxySubscriber2;let a=this._proxySubscribersRest;if(void 0!==a&&(a=a.slice()),void 0!==n&&n.handleProxyChange(t,e,s,i),void 0!==r&&r.handleProxyChange(t,e,s,i),void 0!==o&&o.handleProxyChange(t,e,s,i),void 0!==a){const{length:n}=a;let r;for(let o=0;o<n;++o)void 0!==(r=a[o])&&r.handleProxyChange(t,e,s,i)}}function he(t,e){const s=this._collectionSubscriber0,i=this._collectionSubscriber1,n=this._collectionSubscriber2;let r=this._collectionSubscribersRest;if(void 0!==r&&(r=r.slice()),void 0!==s&&s.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==n&&n.handleCollectionChange(t,e),void 0!==r){const{length:s}=r;let i;for(let n=0;n<s;++n)void 0!==(i=r[n])&&i.handleCollectionChange(t,e)}}var le;const ue=new WeakMap;let de=class{constructor(t,e,s){this.proxy=t,this.raw=e,this.key=s,this.inBatch=!1,this.subscribe=this.addSubscriber,this.unsubscribe=this.removeSubscriber,e[s]instanceof Object&&(e[s]=pe.getOrCreate(e[s]).proxy)}setValue(t,e){const s=this.raw[this.key];s!==t&&(this.raw[this.key]=t,this.callSubscribers(t,s,18|e))}getValue(){return this.raw[this.key]}flushBatch(t){}};de=$t([Ht()],de);let pe=le=class{constructor(t){this.raw=t,this.proxy=new Proxy(t,this),ue.set(t,this.proxy),this.subscribers={}}static getProxyOrSelf(t){if(void 0===t.$raw){const e=ue.get(t);return void 0===e?t:e}return t}static getRawIfProxy(t){const e=t.$raw;return void 0===e?t:e}static getOrCreate(t,e){let s;if(void 0===t.$raw){const e=ue.get(t);s=void 0===e?new le(t):e.$observer}else s=t.$observer;if(void 0===e)return s;let i=s.subscribers[e];if(void 0===i){const n=this.getRawIfProxy(t),r=s.proxy;i=s.subscribers[e]=new de(r,n,e)}return i}static isProxy(t){return void 0!==t.$raw}get(t,e,s){return"$observer"===e?this:"$raw"===e?t:t[e]}set(t,e,s,i){const n=t[e];return n!==s&&(t[e]=s,this.callPropertySubscribers(s,n,e),this.callProxySubscribers(e,s,n,18)),!0}deleteProperty(t,e){const s=t[e];return!!Reflect.deleteProperty(t,e)&&(void 0!==s&&(this.callPropertySubscribers(void 0,s,e),this.callProxySubscribers(e,void 0,s,18)),!0)}defineProperty(t,e,s){const i=t[e];return!!Reflect.defineProperty(t,e,s)&&(s.value!==i&&(this.callPropertySubscribers(s.value,i,e),this.callProxySubscribers(e,s.value,i,18)),!0)}apply(t,e,s=n.a.emptyArray){return Reflect.apply(t,t,s)}subscribe(t,e){if(void 0===e)this.addProxySubscriber(t);else{let s=this.subscribers[e];void 0===s&&(s=this.subscribers[e]=new de(this.proxy,this.raw,e)),s.addSubscriber(t)}}unsubscribe(t,e){if(void 0===e)this.removeProxySubscriber(t);else{const s=this.subscribers[e];void 0!==s&&s.removeSubscriber(t)}}callPropertySubscribers(t,e,s){const i=this.subscribers[s];void 0!==i&&i.callSubscribers(t,e,18)}};pe=le=$t([function(t){const e=t.prototype;e._proxySubscriberFlags=0,e.addProxySubscriber=Gt,e.removeProxySubscriber=Xt,e.hasProxySubscriber=ne,e.hasProxySubscribers=ee,e.callProxySubscribers=ce,void 0===e.subscribeToProxy&&(e.subscribeToProxy=Gt),void 0===e.unsubscribeFromProxy&&(e.unsubscribeFromProxy=Xt)}],pe);let fe=class{constructor(t,e,s,i){this.lifecycle=t,this.obj=s,this.propertyKey=i,this.currentValue=void 0,this.oldValue=void 0,this.inBatch=!1,this.observing=!1,this.persistentFlags=2080374799&e}getValue(){return this.currentValue}setValue(t,e){if(this.observing){const s=this.currentValue;this.currentValue=t,0===this.lifecycle.batch.depth?this.callSubscribers(t,s,this.persistentFlags|e):this.inBatch||(this.inBatch=!0,this.oldValue=s,this.lifecycle.batch.add(this))}else this.obj[this.propertyKey]=t}flushBatch(t){this.inBatch=!1;const e=this.currentValue,s=this.oldValue;this.oldValue=e,this.callSubscribers(e,s,this.persistentFlags|t)}subscribe(t){!1===this.observing&&(this.observing=!0,this.currentValue=this.obj[this.propertyKey],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})||r.write(1,this.propertyKey,this.obj)),this.addSubscriber(t)}};var ge;fe=$t([Ht()],fe),function(t){t[t.NilScope=250]="NilScope",t[t.NilOverrideContext=252]="NilOverrideContext",t[t.NilParentScope=253]="NilParentScope"}(ge||(ge={}));const ve=Object.freeze({});class me{getOrCreate(t,e,s,i){return void 0===this[i]&&(this[i]=new fe(t,e,s,i)),this[i]}}class be{constructor(t,e){if(this.$synthetic=!0,void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this[e]=t[e])}static create(t,e,s){const i=new be(e,s);return 2&t?pe.getOrCreate(i).proxy:i}static get(t,e,s,i,n){if(null==t)throw r.error(250);let o=t.overrideContext;if(s>0){for(;s>0;){if(null==o.parentOverrideContext)return;s--,o=o.parentOverrideContext}return e in o?o:o.bindingContext}for(;o&&!(e in o)&&!(o.bindingContext&&e in o.bindingContext);)o=o.parentOverrideContext;if(o)return e in o?o:o.bindingContext;if((67108864&i)>0){let r=t.parentScope;for(;null!==r;){if(r.scopeParts.includes(n)){const n=this.get(r,e,s,-67108865&i|4194304);return n===ve?t.bindingContext||t.overrideContext:n}r=r.parentScope}if(null===r)throw new Error(`No target scope could be found for part "${n}"`)}return 4194304&i?ve:t.bindingContext||t.overrideContext}getObservers(t){return null==this.$observers&&(this.$observers=new me),this.$observers}}class ye{constructor(t,e,s){this.parentScope=t,this.scopeParts=n.a.emptyArray,this.bindingContext=e,this.overrideContext=s}static create(t,e,s){return new ye(null,e,null==s?we.create(t,e,s):s)}static fromOverride(t,e){if(null==e)throw r.error(252);return new ye(null,e.bindingContext,e)}static fromParent(t,e,s){if(null==e)throw r.error(253);return new ye(e,s,we.create(t,s,e.overrideContext))}}class we{constructor(t,e){this.$synthetic=!0,this.bindingContext=t,this.parentOverrideContext=e}static create(t,e,s){return new we(e,void 0===s?null:s)}getObservers(){return void 0===this.$observers&&(this.$observers=new me),this.$observers}}const ke=at.createInterface("ISignaler").withDefault(t=>t.singleton(Ce));class Ce{constructor(){this.signals=Object.create(null)}dispatchSignal(t,e){const s=this.signals[t];if(void 0!==s)for(const t of s.keys())t.handleChange(void 0,void 0,16|e)}addSignalListener(t,e){const s=this.signals,i=s[t];void 0===i?s[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const s=this.signals[t];s&&s.delete(e)}}var Te;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk"}(Te||(Te={}));const Se=at.createInterface("ITargetedInstruction").noDefault();class xe{constructor(t){this.hasRender="render"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasUnbinding="unbinding"in t,this.hasUnbound="unbound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasDetached="detached"in t,this.hasCaching="caching"in t}}function Ae(t,e,s,i){for(let n=0,r=t.length;n<r;++n)Ct.alias(s,e.keyFrom(t[n])).register(i)}function $e(t){return function(e){return Oe.define(t,e)}}xe.none=new xe({});class Ve{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return"string"==typeof t?i={name:s=t}:(s=t.name,i=t),new Ve(e,it(Oe.getAnnotation(e,"name"),s),st(Oe.getAnnotation(e,"aliases"),i.aliases,e.aliases),Oe.keyFrom(s))}register(t){const{Type:e,key:s,aliases:i}=this;Ct.singleton(s,e).register(t),Ct.alias(s,e).register(t),Ae(i,Oe,s,t)}}const Oe={name:j.resource.keyFor("binding-behavior"),keyFrom:t=>`${Oe.name}:${t}`,isType:t=>"function"==typeof t&&C.hasOwn(Oe.name,t),define(t,e){const s=Ve.create(t,e);return C.define(Oe.name,s,s.Type),C.define(Oe.name,s,s),j.resource.appendTo(e,Oe.name),s.Type},getDefinition(t){const e=C.getOwn(Oe.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){C.define(j.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>C.getOwn(j.annotation.keyFor(e),t)};function Ee(t){return function(e){return Pe.define(t,e)}}class Ie{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return"string"==typeof t?i={name:s=t}:(s=t.name,i=t),new Ie(e,it(Pe.getAnnotation(e,"name"),s),st(Pe.getAnnotation(e,"aliases"),i.aliases,e.aliases),Pe.keyFrom(s))}register(t){const{Type:e,key:s,aliases:i}=this;Ct.singleton(s,e).register(t),Ct.alias(s,e).register(t),Ae(i,Pe,s,t)}}const Pe={name:j.resource.keyFor("value-converter"),keyFrom:t=>`${Pe.name}:${t}`,isType:t=>"function"==typeof t&&C.hasOwn(Pe.name,t),define(t,e){const s=Ie.create(t,e);return C.define(Pe.name,s,s.Type),C.define(Pe.name,s,s),j.resource.appendTo(e,Pe.name),s.Type},getDefinition(t){const e=C.getOwn(Pe.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){C.define(j.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>C.getOwn(j.annotation.keyFor(e),t)};function Re(t){return 2048==(2048&t.$kind)}function Fe(t){return 4096==(4096&t.$kind)}var Ne;!function(t){t[t.NoLocator=202]="NoLocator",t[t.NoBehaviorFound=203]="NoBehaviorFound",t[t.BehaviorAlreadyApplied=204]="BehaviorAlreadyApplied",t[t.NoConverterFound=205]="NoConverterFound",t[t.NoBinding=206]="NoBinding",t[t.NotAFunction=207]="NotAFunction",t[t.UnknownOperator=208]="UnknownOperator",t[t.NilScope=250]="NilScope"}(Ne||(Ne={}));class Le{constructor(t){this.value=t}evaluate(t,e,s,i){return this.value}}class je{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=38962,this.behaviorKey=Oe.keyFrom(e)}evaluate(t,e,s,i){return this.expression.evaluate(t,e,s,i)}assign(t,e,s,i,n){return this.expression.assign(t,e,s,i,n)}connect(t,e,s,i){this.expression.connect(t,e,s,i)}bind(t,e,s){if(null==e)throw r.error(250,this);if(!s)throw r.error(206,this);const i=s.locator;if(!i)throw r.error(202,this);Re(this.expression)&&this.expression.bind(t,e,s);const n=this.behaviorKey,o=i.get(n);if(!o)throw r.error(203,this);void 0===s[n]?(s[n]=o,o.bind.call(o,t,e,s,...as(t,e,i,this.args))):r.write(204,this)}unbind(t,e,s){const i=this.behaviorKey;void 0!==s[i]?(s[i].unbind(t,e,s),s[i]=void 0):r.write(204,this),Fe(this.expression)&&this.expression.unbind(t,e,s)}accept(t){return t.visitBindingBehavior(this)}}class Be{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=36913,this.converterKey=Pe.keyFrom(e)}evaluate(t,e,s,i){if(!s)throw r.error(202,this);const n=s.get(this.converterKey);if(!n)throw r.error(205,this);if("toView"in n){const r=this.args,o=r.length,a=Array(o+1);a[0]=this.expression.evaluate(t,e,s,i);for(let n=0;n<o;++n)a[n+1]=r[n].evaluate(t,e,s,i);return n.toView.call(n,...a)}return this.expression.evaluate(t,e,s,i)}assign(t,e,s,i,n){if(!s)throw r.error(202,this);const o=s.get(this.converterKey);if(!o)throw r.error(205,this);return"fromView"in o&&(i=o.fromView.call(o,i,...as(t,e,s,this.args))),this.expression.assign(t,e,s,i,n)}connect(t,e,s,i){if(null==e)throw r.error(250,this);if(!s)throw r.error(206,this);const n=s.locator;if(!n)throw r.error(202,this);this.expression.connect(t,e,s,i);const o=this.args;for(let n=0,r=o.length;n<r;++n)o[n].connect(t,e,s,i);const a=n.get(this.converterKey);if(!a)throw r.error(205,this);const c=a.signals;if(void 0===c)return;const h=n.get(ke);for(let t=0,e=c.length;t<e;++t)h.addSignalListener(c[t],s)}unbind(t,e,s){const i=s.locator,n=i.get(this.converterKey).signals;if(void 0===n)return;const r=i.get(ke);for(let t=0,e=n.length;t<e;++t)r.removeSignalListener(n[t],s)}accept(t){return t.visitValueConverter(this)}}class De{constructor(t,e){this.target=t,this.value=e,this.$kind=8208}evaluate(t,e,s,i){return this.target.assign(t,e,s,this.value.evaluate(t,e,s),i)}connect(t,e,s,i){}assign(t,e,s,i,n){return this.value.assign(t,e,s,i,n),this.target.assign(t,e,s,i,n)}accept(t){return t.visitAssign(this)}}class Me{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind=63}evaluate(t,e,s,i){return this.condition.evaluate(t,e,s,i)?this.yes.evaluate(t,e,s,i):this.no.evaluate(t,e,s,i)}assign(t,e,s,i,n){}connect(t,e,s,i){this.condition.evaluate(t,e,null,i)?(this.condition.connect(t,e,s,i),this.yes.connect(t,e,s,i)):(this.condition.connect(t,e,s,i),this.no.connect(t,e,s,i))}accept(t){return t.visitConditional(this)}}class _e{constructor(t=0){this.ancestor=t,this.$kind=1793}evaluate(t,e,s,i){if(null==e)throw r.error(250,this);if((67108864&t)>0){let t=e.parentScope;for(;null!==t;)t.scopeParts.includes(i)||(t=t.parentScope);if(null===t)throw new Error(`No target scope cold be found for part "${i}"`)}let n=e.overrideContext,o=this.ancestor;for(;o--&&n;)n=n.parentOverrideContext;return o<1&&n?n.bindingContext:void 0}assign(t,e,s,i,n){}connect(t,e,s,i){}accept(t){return t.visitAccessThis(this)}}_e.$this=new _e(0),_e.$parent=new _e(1);class Ue{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=10082}evaluate(t,e,s,i){const n=be.get(e,this.name,this.ancestor,t,i)[this.name];return 4&t?n:null==n?"":n}assign(t,e,s,i,n){const r=be.get(e,this.name,this.ancestor,t,n);if(r instanceof Object)return void 0!==r.$observers&&void 0!==r.$observers[this.name]?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}connect(t,e,s,i){const n=be.get(e,this.name,this.ancestor,t,i);s.observeProperty(t,n,this.name)}accept(t){return t.visitAccessScope(this)}}class qe{constructor(t,e){this.object=t,this.name=e,this.$kind=9323}evaluate(t,e,s,i){const n=this.object.evaluate(t,e,s,i);return 4&t?null==n?n:n[this.name]:n?n[this.name]:""}assign(t,e,s,i,n){const r=this.object.evaluate(t,e,s,n);return r instanceof Object?void 0!==r.$observers&&void 0!==r.$observers[this.name]?r.$observers[this.name].setValue(i,t):r[this.name]=i:this.object.assign(t,e,s,{[this.name]:i}),i}connect(t,e,s,i){const n=this.object.evaluate(t,e,null,i);0==(134217728&t)&&this.object.connect(t,e,s,i),n instanceof Object&&s.observeProperty(t,n,this.name)}accept(t){return t.visitAccessMember(this)}}class ze{constructor(t,e){this.object=t,this.key=e,this.$kind=9324}evaluate(t,e,s,i){const n=this.object.evaluate(t,e,s,i);if(n instanceof Object){return n[this.key.evaluate(t,e,s,i)]}}assign(t,e,s,i,n){return this.object.evaluate(t,e,s,n)[this.key.evaluate(t,e,s,n)]=i}connect(t,e,s,i){const n=this.object.evaluate(t,e,null,i);if(0==(134217728&t)&&this.object.connect(t,e,s,i),n instanceof Object){this.key.connect(t,e,s,i);const r=this.key.evaluate(t,e,null,i);Array.isArray(n)&&q(r)?2&t&&s.observeProperty(t,n,r):s.observeProperty(t,n,r)}}accept(t){return t.visitAccessKeyed(this)}}class Ke{constructor(t,e,s=0){this.name=t,this.args=e,this.ancestor=s,this.$kind=1448}evaluate(t,e,s,i){const n=as(t,e,s,this.args,i),r=be.get(e,this.name,this.ancestor,t,i),o=cs(t,r,this.name);if(o)return o.apply(r,n)}assign(t,e,s,i,n){}connect(t,e,s,i){const n=this.args;for(let r=0,o=n.length;r<o;++r)n[r].connect(t,e,s,i)}accept(t){return t.visitCallScope(this)}}class He{constructor(t,e,s){this.object=t,this.name=e,this.args=s,this.$kind=1161}evaluate(t,e,s,i){const n=this.object.evaluate(t,e,s,i),r=as(t,e,s,this.args,i),o=cs(t,n,this.name);if(o)return o.apply(n,r)}assign(t,e,s,i,n){}connect(t,e,s,i){const n=this.object.evaluate(t,e,null,i);if(0==(134217728&t)&&this.object.connect(t,e,s,i),cs(-2097153&t,n,this.name)){const n=this.args;for(let r=0,o=n.length;r<o;++r)n[r].connect(t,e,s,i)}}accept(t){return t.visitCallMember(this)}}class We{constructor(t,e){this.func=t,this.args=e,this.$kind=1162}evaluate(t,e,s,i){const n=this.func.evaluate(t,e,s,i);if("function"==typeof n)return n(...as(t,e,s,this.args,i));if(2097152&t||null!=n)throw r.error(207,this)}assign(t,e,s,i,n){}connect(t,e,s,i){const n=this.func.evaluate(t,e,null,i);if(this.func.connect(t,e,s,i),"function"==typeof n){const n=this.args;for(let r=0,o=n.length;r<o;++r)n[r].connect(t,e,s,i)}}accept(t){return t.visitCallFunction(this)}}class Qe{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind=46,this.evaluate=this[t]}evaluate(t,e,s,i){throw r.error(208,this)}assign(t,e,s,i,n){}connect(t,e,s,i){this.left.connect(t,e,s,i),this.right.connect(t,e,s,i)}"&&"(t,e,s,i){return this.left.evaluate(t,e,s,i)&&this.right.evaluate(t,e,s,i)}"||"(t,e,s,i){return this.left.evaluate(t,e,s,i)||this.right.evaluate(t,e,s,i)}"=="(t,e,s,i){return this.left.evaluate(t,e,s,i)==this.right.evaluate(t,e,s,i)}"==="(t,e,s,i){return this.left.evaluate(t,e,s,i)===this.right.evaluate(t,e,s,i)}"!="(t,e,s,i){return this.left.evaluate(t,e,s,i)!=this.right.evaluate(t,e,s,i)}"!=="(t,e,s,i){return this.left.evaluate(t,e,s,i)!==this.right.evaluate(t,e,s,i)}instanceof(t,e,s,i){const n=this.right.evaluate(t,e,s,i);return"function"==typeof n&&this.left.evaluate(t,e,s,i)instanceof n}in(t,e,s,i){const n=this.right.evaluate(t,e,s,i);return n instanceof Object&&this.left.evaluate(t,e,s,i)in n}"+"(t,e,s,i){const n=this.left.evaluate(t,e,s,i),r=this.right.evaluate(t,e,s,i);if((4&t)>0)return n+r;if(!n||!r){if(z(n)||z(r))return(n||0)+(r||0);if(K(n)||K(r))return(n||"")+(r||"")}return n+r}"-"(t,e,s,i){return this.left.evaluate(t,e,s,i)-this.right.evaluate(t,e,s,i)}"*"(t,e,s,i){return this.left.evaluate(t,e,s,i)*this.right.evaluate(t,e,s,i)}"/"(t,e,s,i){return this.left.evaluate(t,e,s,i)/this.right.evaluate(t,e,s,i)}"%"(t,e,s,i){return this.left.evaluate(t,e,s,i)%this.right.evaluate(t,e,s,i)}"<"(t,e,s,i){return this.left.evaluate(t,e,s,i)<this.right.evaluate(t,e,s,i)}">"(t,e,s,i){return this.left.evaluate(t,e,s,i)>this.right.evaluate(t,e,s,i)}"<="(t,e,s,i){return this.left.evaluate(t,e,s,i)<=this.right.evaluate(t,e,s,i)}">="(t,e,s,i){return this.left.evaluate(t,e,s,i)>=this.right.evaluate(t,e,s,i)}accept(t){return t.visitBinary(this)}}class Ge{constructor(t,e){this.operation=t,this.expression=e,this.$kind=39,this.evaluate=this[t]}evaluate(t,e,s,i){throw r.error(208,this)}assign(t,e,s,i,n){}connect(t,e,s,i){this.expression.connect(t,e,s,i)}void(t,e,s,i){this.expression.evaluate(t,e,s,i)}typeof(t,e,s,i){return typeof this.expression.evaluate(4|t,e,s,i)}"!"(t,e,s,i){return!this.expression.evaluate(t,e,s,i)}"-"(t,e,s,i){return-this.expression.evaluate(t,e,s,i)}"+"(t,e,s,i){return+this.expression.evaluate(t,e,s,i)}accept(t){return t.visitUnary(this)}}class Ye{constructor(t){this.value=t,this.$kind=17925}evaluate(t,e,s,i){return this.value}assign(t,e,s,i,n){}connect(t,e,s,i){}accept(t){return t.visitPrimitiveLiteral(this)}}Ye.$undefined=new Ye(void 0),Ye.$null=new Ye(null),Ye.$true=new Ye(!0),Ye.$false=new Ye(!1),Ye.$empty=new Ye("");class Je{constructor(t){this.elements=t,this.$kind=17955}evaluate(t,e,s,i){const n=this.elements,r=n.length,o=Array(r);for(let a=0;a<r;++a)o[a]=n[a].evaluate(t,e,s,i);return o}assign(t,e,s,i,n){}connect(t,e,s,i){const n=this.elements;for(let r=0,o=n.length;r<o;++r)n[r].connect(t,e,s,i)}accept(t){return t.visitArrayLiteral(this)}}Je.$empty=new Je(n.a.emptyArray);class Xe{constructor(t,e){this.keys=t,this.values=e,this.$kind=17956}evaluate(t,e,s,i){const n={},r=this.keys,o=this.values;for(let a=0,c=r.length;a<c;++a)n[r[a]]=o[a].evaluate(t,e,s,i);return n}assign(t,e,s,i,n){}connect(t,e,s,i){const n=this.keys,r=this.values;for(let o=0,a=n.length;o<a;++o)r[o].connect(t,e,s,i)}accept(t){return t.visitObjectLiteral(this)}}Xe.$empty=new Xe(n.a.emptyArray,n.a.emptyArray);class Ze{constructor(t,e=n.a.emptyArray){this.cooked=t,this.expressions=e,this.$kind=17958}evaluate(t,e,s,i){const n=this.expressions,r=this.cooked;let o=r[0];for(let a=0,c=n.length;a<c;++a)o+=n[a].evaluate(t,e,s,i),o+=r[a+1];return o}assign(t,e,s,i,n){}connect(t,e,s,i){const n=this.expressions;for(let r=0,o=n.length;r<o;++r)n[r].connect(t,e,s,i),r++}accept(t){return t.visitTemplate(this)}}Ze.$empty=new Ze([""]);class ts{constructor(t,e,s,i=n.a.emptyArray){this.cooked=t,this.func=s,this.expressions=i,this.$kind=1197,t.raw=e}evaluate(t,e,s,i){const n=this.expressions,o=n.length,a=Array(o);for(let r=0,c=o;r<c;++r)a[r]=n[r].evaluate(t,e,s,i);const c=this.func.evaluate(t,e,s,i);if("function"!=typeof c)throw r.error(207,this);return c(this.cooked,...a)}assign(t,e,s,i,n){}connect(t,e,s,i){const n=this.expressions;for(let i=0,r=n.length;i<r;++i)n[i].connect(t,e,s);this.func.connect(t,e,s)}accept(t){return t.visitTaggedTemplate(this)}}class es{constructor(t){this.elements=t,this.$kind=65556}evaluate(t,e,s,i){}assign(t,e,s,i,n){}connect(t,e,s,i){}accept(t){return t.visitArrayBindingPattern(this)}}class ss{constructor(t,e){this.keys=t,this.values=e,this.$kind=65557}evaluate(t,e,s,i){}assign(t,e,s,i,n){}connect(t,e,s,i){}accept(t){return t.visitObjectBindingPattern(this)}}class is{constructor(t){this.name=t,this.$kind=65558}evaluate(t,e,s,i){return this.name}connect(t,e,s,i){}accept(t){return t.visitBindingIdentifier(this)}}const ns=Object.prototype.toString;class rs{constructor(t,e){this.declaration=t,this.iterable=e,this.$kind=6199}evaluate(t,e,s,i){return this.iterable.evaluate(t,e,s,i)}assign(t,e,s,i,n){}count(t,e){switch(ns.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw r.error(0)}}iterate(t,e,s){switch(ns.call(e)){case"[object Array]":return ls(8388608|t,e,s);case"[object Map]":return function(t,e,s){const i=Array(e.size);let n=-1;for(const t of e.entries())i[++n]=t;ls(-8388609&t,i,s)}(8388608|t,e,s);case"[object Set]":return function(t,e,s){const i=Array(e.size);let n=-1;for(const t of e.keys())i[++n]=t;ls(-8388609&t,i,s)}(8388608|t,e,s);case"[object Number]":return function(t,e,s){const i=Array(e);for(let t=0;t<e;++t)i[t]=t;ls(-8388609&t,i,s)}(8388608|t,e,s);case"[object Null]":case"[object Undefined]":return;default:throw r.error(0)}}connect(t,e,s,i){this.declaration.connect(t,e,s,i),this.iterable.connect(t,e,s,i)}bind(t,e,s){Re(this.iterable)&&this.iterable.bind(t,e,s)}unbind(t,e,s){Fe(this.iterable)&&this.iterable.unbind(t,e,s)}accept(t){return t.visitForOfStatement(this)}}class os{constructor(t,e=n.a.emptyArray){this.parts=t,this.expressions=e,this.$kind=24,this.isMulti=e.length>1,this.firstExpression=e[0]}evaluate(t,e,s,i){if(this.isMulti){const n=this.expressions,r=this.parts;let o=r[0];for(let a=0,c=n.length;a<c;++a)o+=n[a].evaluate(t,e,s,i),o+=r[a+1];return o}{const n=this.parts;return n[0]+this.firstExpression.evaluate(t,e,s,i)+n[1]}}assign(t,e,s,i,n){}connect(t,e,s,i){}accept(t){return t.visitInterpolation(this)}}function as(t,e,s,i,n){const r=i.length,o=Array(r);for(let a=0;a<r;++a)o[a]=i[a].evaluate(t,e,s,n);return o}function cs(t,e,s){const i=null==e?null:e[s];if("function"==typeof i)return i;if(!(2097152&t)&&null==i)return null;throw r.error(207,e,s,i)}const hs=8388610;function ls(t,e,s){if((t&hs)===hs){const t=pe.getRawIfProxy(e),i=t.length;let n,r=0;for(;r<i;++r)(n=t[r])instanceof Object&&(n=t[r]=pe.getOrCreate(n).proxy),s(t,r,n)}else for(let t=0,i=e.length;t<i;++t)s(e,t,e[t])}var us,ds;!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(us||(us={})),function(t){t[t.getterSetter=1]="getterSetter",t[t.proxies=2]="proxies"}(ds||(ds={}));var ps,fs,gs,vs,ms;!function(t){t[t.none=0]="none",t[t.isBinding=1]="isBinding",t[t.isUnbinding=2]="isUnbinding",t[t.isBound=4]="isBound",t[t.isBoundOrBinding=5]="isBoundOrBinding",t[t.isBoundOrUnbinding=6]="isBoundOrUnbinding",t[t.isAttaching=8]="isAttaching",t[t.isDetaching=16]="isDetaching",t[t.isAttached=32]="isAttached",t[t.isAttachedOrAttaching=40]="isAttachedOrAttaching",t[t.isAttachedOrDetaching=48]="isAttachedOrDetaching",t[t.isMounted=64]="isMounted",t[t.isCached=128]="isCached",t[t.needsBind=256]="needsBind",t[t.needsUnbind=512]="needsUnbind",t[t.needsAttach=1024]="needsAttach",t[t.needsDetach=2048]="needsDetach",t[t.needsMount=4096]="needsMount",t[t.needsUnmount=8192]="needsUnmount",t[t.hasLockedScope=16384]="hasLockedScope",t[t.canBeCached=32768]="canBeCached",t[t.inBoundQueue=65536]="inBoundQueue",t[t.inUnboundQueue=131072]="inUnboundQueue",t[t.inAttachedQueue=262144]="inAttachedQueue",t[t.inDetachedQueue=524288]="inDetachedQueue",t[t.inMountQueue=1048576]="inMountQueue",t[t.inUnmountQueue=2097152]="inUnmountQueue"}(ps||(ps={})),function(t){t[t.none=1]="none",t[t.hasCreated=2]="hasCreated",t[t.hasBinding=4]="hasBinding",t[t.hasBound=8]="hasBound",t[t.hasAttaching=16]="hasAttaching",t[t.hasAttached=32]="hasAttached",t[t.hasDetaching=64]="hasDetaching",t[t.hasDetached=128]="hasDetached",t[t.hasUnbinding=256]="hasUnbinding",t[t.hasUnbound=512]="hasUnbound",t[t.hasRender=1024]="hasRender",t[t.hasCaching=2048]="hasCaching"}(fs||(fs={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=2080374799]="persistentBindingFlags",t[t.allowParentScopeTraversal=67108864]="allowParentScopeTraversal",t[t.observeLeafPropertiesOnly=134217728]="observeLeafPropertiesOnly",t[t.targetObserverFlags=805306383]="targetObserverFlags",t[t.noTargetObserverQueue=268435456]="noTargetObserverQueue",t[t.persistentTargetObserverQueue=536870912]="persistentTargetObserverQueue",t[t.secondaryExpression=1073741824]="secondaryExpression",t[t.bindingStrategy=15]="bindingStrategy",t[t.getterSetterStrategy=1]="getterSetterStrategy",t[t.proxyStrategy=2]="proxyStrategy",t[t.isStrictBindingStrategy=4]="isStrictBindingStrategy",t[t.update=48]="update",t[t.updateTargetInstance=16]="updateTargetInstance",t[t.updateSourceExpression=32]="updateSourceExpression",t[t.from=524224]="from",t[t.fromFlush=960]="fromFlush",t[t.fromAsyncFlush=64]="fromAsyncFlush",t[t.fromSyncFlush=128]="fromSyncFlush",t[t.fromTick=256]="fromTick",t[t.fromBatch=512]="fromBatch",t[t.fromStartTask=1024]="fromStartTask",t[t.fromStopTask=2048]="fromStopTask",t[t.fromBind=4096]="fromBind",t[t.fromUnbind=8192]="fromUnbind",t[t.fromAttach=16384]="fromAttach",t[t.fromDetach=32768]="fromDetach",t[t.fromCache=65536]="fromCache",t[t.fromDOMEvent=131072]="fromDOMEvent",t[t.fromLifecycleTask=262144]="fromLifecycleTask",t[t.allowPublishRoundtrip=524288]="allowPublishRoundtrip",t[t.isPublishing=1048576]="isPublishing",t[t.mustEvaluate=2097152]="mustEvaluate",t[t.isTraversingParentScope=4194304]="isTraversingParentScope",t[t.isOriginalArray=8388608]="isOriginalArray",t[t.isCollectionMutation=16777216]="isCollectionMutation",t[t.reorderNodes=33554432]="reorderNodes"}(gs||(gs={})),function(t){t[t.Connects=32]="Connects",t[t.Observes=64]="Observes",t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation"}(vs||(vs={})),function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(ms||(ms={}));const bs=at.createInterface("IController").noDefault();var ys;!function(t){t[t.insertBefore=1]="insertBefore",t[t.append=2]="append"}(ys||(ys={}));const ws=at.createInterface("IViewFactory").noDefault(),ks=at.createInterface("ILifecycle").withDefault(t=>t.singleton(Os));let Cs=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&this.process(t)}inline(t,e){this.begin(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.prevBound=this.tail,this.tail.nextBound=t),this.tail=t,t.state|=65536}remove(t){void 0!==t.prevBound&&(t.prevBound.nextBound=t.nextBound),void 0!==t.nextBound&&(t.nextBound.prevBound=t.prevBound),t.prevBound=void 0,t.nextBound=void 0,this.tail===t&&(this.tail=t.prevBound),this.head===t&&(this.head=t.nextBound),t.state=65536^(65536|t.state)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.state=65536^(65536|s.state),s.bound(t),e=s.nextBound,s.nextBound=void 0,s.prevBound=void 0,s=e}while(void 0!==s)}}};Cs=$t([Vt(0,ks)],Cs);let Ts=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&this.process(t)}inline(t,e){this.begin(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.prevUnbound=this.tail,this.tail.nextUnbound=t),this.tail=t,t.state|=131072}remove(t){void 0!==t.prevUnbound&&(t.prevUnbound.nextUnbound=t.nextUnbound),void 0!==t.nextUnbound&&(t.nextUnbound.prevUnbound=t.prevUnbound),t.prevUnbound=void 0,t.nextUnbound=void 0,this.tail===t&&(this.tail=t.prevUnbound),this.head===t&&(this.head=t.nextUnbound),t.state=131072^(131072|t.state)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.state=131072^(131072|s.state),s.unbound(t),e=s.nextUnbound,s.nextUnbound=void 0,s.prevUnbound=void 0,s=e}while(void 0!==s)}}};Ts=$t([Vt(0,ks)],Ts);let Ss=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&(this.lifecycle.mount.process(t),this.process(t))}inline(t,e){this.begin(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.prevAttached=this.tail,this.tail.nextAttached=t),this.tail=t,t.state|=262144}remove(t){void 0!==t.prevAttached&&(t.prevAttached.nextAttached=t.nextAttached),void 0!==t.nextAttached&&(t.nextAttached.prevAttached=t.prevAttached),t.prevAttached=void 0,t.nextAttached=void 0,this.tail===t&&(this.tail=t.prevAttached),this.head===t&&(this.head=t.nextAttached),t.state=262144^(262144|t.state)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.state=262144^(262144|s.state),s.attached(t),e=s.nextAttached,s.nextAttached=void 0,s.prevAttached=void 0,s=e}while(void 0!==s)}}};Ss=$t([Vt(0,ks)],Ss);let xs=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&(this.lifecycle.unmount.process(t),this.process(t))}inline(t,e){this.begin(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.prevDetached=this.tail,this.tail.nextDetached=t),this.tail=t,t.state|=524288}remove(t){void 0!==t.prevDetached&&(t.prevDetached.nextDetached=t.nextDetached),void 0!==t.nextDetached&&(t.nextDetached.prevDetached=t.prevDetached),t.prevDetached=void 0,t.nextDetached=void 0,this.tail===t&&(this.tail=t.prevDetached),this.head===t&&(this.head=t.nextDetached),t.state=524288^(524288|t.state)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.state=524288^(524288|s.state),s.detached(t),e=s.nextDetached,s.nextDetached=void 0,s.prevDetached=void 0,s=e}while(void 0!==s)}}};xs=$t([Vt(0,ks)],xs);let As=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}add(t){if((2097152&t.state)>0)return this.lifecycle.unmount.remove(t),void console.log("in unmount queue during mountQueue.add, so removing",this);void 0===this.head?this.head=t:(t.prevMount=this.tail,this.tail.nextMount=t),this.tail=t,t.state|=1048576}remove(t){void 0!==t.prevMount&&(t.prevMount.nextMount=t.nextMount),void 0!==t.nextMount&&(t.nextMount.prevMount=t.prevMount),t.prevMount=void 0,t.nextMount=void 0,this.tail===t&&(this.tail=t.prevMount),this.head===t&&(this.head=t.nextMount),t.state=1048576^(1048576|t.state)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.state=1048576^(1048576|s.state),s.mount(t),e=s.nextMount,s.nextMount=void 0,s.prevMount=void 0,s=e}while(void 0!==s)}}};As=$t([Vt(0,ks)],As);let $s=class{constructor(t){this.lifecycle=t,this.head=void 0,this.tail=void 0}add(t){(1048576&t.state)>0?this.lifecycle.mount.remove(t):(void 0===this.head?this.head=t:(t.prevUnmount=this.tail,this.tail.nextUnmount=t),this.tail=t,t.state|=2097152)}remove(t){void 0!==t.prevUnmount&&(t.prevUnmount.nextUnmount=t.nextUnmount),void 0!==t.nextUnmount&&(t.nextUnmount.prevUnmount=t.prevUnmount),t.prevUnmount=void 0,t.nextUnmount=void 0,this.tail===t&&(this.tail=t.prevUnmount),this.head===t&&(this.head=t.nextUnmount),t.state=2097152^(2097152|t.state)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.state=2097152^(2097152|s.state),s.unmount(t),e=s.nextUnmount,s.nextUnmount=void 0,s.prevUnmount=void 0,s=e}while(void 0!==s)}}};$s=$t([Vt(0,ks)],$s);let Vs=class{constructor(t){this.lifecycle=t,this.queue=[],this.depth=0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&this.process(t)}inline(t,e){this.begin(),t(),this.end(e)}add(t){this.queue.push(t)}remove(t){const e=this.queue.indexOf(t);e>-1&&this.queue.splice(e,1)}process(t){for(t|=512;this.queue.length>0;){const e=this.queue.slice();this.queue=[];const{length:s}=e;for(let i=0;i<s;++i)e[i].flushBatch(t)}}};Vs=$t([Vt(0,ks)],Vs);class Os{constructor(){this.batch=new Vs(this),this.mount=new As(this),this.unmount=new $s(this),this.bound=new Cs(this),this.unbound=new Ts(this),this.attached=new Ss(this),this.detached=new xs(this)}static register(t){return Ct.singleton(ks,this).register(t)}}Array.prototype.slice;const Es=[],Is=[];let Ps=-1;function Rs(t){if(t===Ps){Ps+=5;const e=Es.length=Is.length=Ps+1;for(let s=t+1;s<e;++s)Es[s]=`_observer${s}`,Is[s]=`_observerVersion${s}`}}function Fs(t){const e=null==this.observerSlots?0:this.observerSlots;let s=e;for(;s--&&this[Es[s]]!==t;);if(-1===s){for(s=0;this[Es[s]];)s++;this[Es[s]]=t,t.subscribe(this),t[this.id]|=16,s===e&&(this.observerSlots=s+1)}null==this.version&&(this.version=0),this[Is[s]]=this.version,Rs(s)}function Ns(t,e,s){const i=this.observerLocator.getObserver(t,e,s);this.addObserver(i)}function Ls(t){const e=this.observerSlots;let s,i;if(!0===t)for(let t=0;t<e;++t)null!=(i=this[s=Es[t]])&&(this[s]=void 0,i.unsubscribe(this),i[this.id]&=-17);else{const t=this.version;for(let n=0;n<e;++n)this[Is[n]]!==t&&null!=(i=this[s=Es[n]])&&(this[s]=void 0,i.unsubscribe(this),i[this.id]&=-17)}}function js(t){const e=t.prototype;return Object.prototype.hasOwnProperty.call(e,"observeProperty")||(e.observeProperty=Ns),Object.prototype.hasOwnProperty.call(e,"unobserve")||(e.unobserve=Ls),Object.prototype.hasOwnProperty.call(e,"addObserver")||(e.addObserver=Fs),t}function Bs(t){return null==t?js:js(t)}Rs(-1);let Ds=0;Bs.assignIdTo=t=>{t.id=++Ds};const{oneTime:Ms,toView:_s,fromView:Us}=us,qs=_s|Ms;let zs=class{constructor(t,e,s,i,n,r){this.sourceExpression=t,this.target=e,this.targetProperty=s,this.mode=i,this.observerLocator=n,this.locator=r,this.$state=0,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,Bs.assignIdTo(this),this.$lifecycle=r.get(ks)}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t,this.part)}handleChange(t,e,s){if(0!=(4&this.$state)){if((16&(s|=this.persistentFlags))>0){const e=this.targetObserver.getValue();return(10082!==this.sourceExpression.$kind||this.observerSlots>1)&&(t=this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part)),t!==e&&this.updateTarget(t,s),void(0==(this.mode&Ms)&&(this.version++,this.sourceExpression.connect(s,this.$scope,this,this.part),this.unobserve(!1)))}if(!((32&s)>0))throw r.error(15,s);t!==this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part)&&this.updateSource(t,s)}}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.$unbind(4096|t)}this.$state|=1,t|=4,this.persistentFlags=2080374799&t,this.$scope=e,this.part=s;let i=this.sourceExpression;Re(i)&&i.bind(t,e,this);let n=this.targetObserver;n||(n=this.mode&Us?this.targetObserver=this.observerLocator.getObserver(t,this.target,this.targetProperty):this.targetObserver=this.observerLocator.getAccessor(t,this.target,this.targetProperty)),this.mode!==us.oneTime&&n.bind&&n.bind(t),i=this.sourceExpression,this.mode&qs&&this.updateTarget(i.evaluate(t,e,this.locator,s),t),this.mode&_s&&i.connect(t,e,this,s),this.mode&Us&&(n.subscribe(this),n[this.id]|=32),this.$state|=4,this.$state&=-2}$unbind(t){4&this.$state&&(this.$state|=2,this.persistentFlags=0,Fe(this.sourceExpression)&&this.sourceExpression.unbind(t,this.$scope,this),this.$scope=void 0,this.targetObserver.unbind&&this.targetObserver.unbind(t),this.targetObserver.unsubscribe&&(this.targetObserver.unsubscribe(this),this.targetObserver[this.id]&=-33),this.unobserve(!0),this.$state&=-7)}};zs=$t([Bs()],zs);class Ks{constructor(t,e,s,i,n){this.sourceExpression=t,this.locator=n,this.$state=0,this.targetObserver=i.getObserver(0,e,s)}callSource(t){const e=this.$scope.overrideContext;Object.assign(e,t);const s=this.sourceExpression.evaluate(2097152,this.$scope,this.locator,this.part);for(const s in t)Reflect.deleteProperty(e,s);return s}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.$unbind(4096|t)}this.$state|=1,this.$scope=e,this.part=s,Re(this.sourceExpression)&&this.sourceExpression.bind(t,e,this),this.targetObserver.setValue(t=>this.callSource(t),t),this.$state|=4,this.$state&=-2}$unbind(t){4&this.$state&&(this.$state|=2,Fe(this.sourceExpression)&&this.sourceExpression.unbind(t,this.$scope,this),this.$scope=void 0,this.targetObserver.setValue(null,t),this.$state&=-7)}observeProperty(t,e,s){}handleChange(t,e,s){}}const Hs=at.createInterface("IExpressionParser").withDefault(t=>t.singleton(Ws));class Ws{constructor(){this.expressionLookup=Object.create(null),this.forOfLookup=Object.create(null),this.interpolationLookup=Object.create(null)}parse(t,e){switch(e){case 2048:{let s=this.interpolationLookup[t];return void 0===s&&(s=this.interpolationLookup[t]=this.parseCore(t,e)),s}case 539:{let s=this.forOfLookup[t];return void 0===s&&(s=this.forOfLookup[t]=this.parseCore(t,e)),s}default:{if(0===t.length&&55&e)return Ye.$empty;let s=this.expressionLookup[t];return void 0===s&&(s=this.expressionLookup[t]=this.parseCore(t,e)),s}}}cache(t){const{forOfLookup:e,expressionLookup:s,interpolationLookup:i}=this;for(const n in t){const r=t[n];switch(r.$kind){case 24:i[n]=r;break;case 6199:e[n]=r;break;default:s[n]=r}}}parseCore(t,e){try{const e=t.split("."),s=e[0];let i;i=s.endsWith("()")?new Ke(s.replace("()",""),n.a.emptyArray):new Ue(e[0]);let r=1;for(;r<e.length;){const t=e[r];i=t.endsWith("()")?new He(i,t.replace("()",""),n.a.emptyArray):new qe(i,e[r]),r++}return i}catch(t){throw r.error(3,t)}}}var Qs;!function(t){t[t.None=0]="None",t[t.IgnoreCustomAttr=4096]="IgnoreCustomAttr",t[t.Interpolation=2048]="Interpolation",t[t.IsRef=5376]="IsRef",t[t.IsIterator=512]="IsIterator",t[t.IsCustom=256]="IsCustom",t[t.IsFunction=128]="IsFunction",t[t.IsEvent=64]="IsEvent",t[t.IsProperty=32]="IsProperty",t[t.IsCommand=16]="IsCommand",t[t.IsPropertyCommand=48]="IsPropertyCommand",t[t.IsEventCommand=80]="IsEventCommand",t[t.DelegationStrategyDelta=6]="DelegationStrategyDelta",t[t.Command=15]="Command",t[t.OneTimeCommand=49]="OneTimeCommand",t[t.ToViewCommand=50]="ToViewCommand",t[t.FromViewCommand=51]="FromViewCommand",t[t.TwoWayCommand=52]="TwoWayCommand",t[t.BindCommand=53]="BindCommand",t[t.TriggerCommand=4182]="TriggerCommand",t[t.CaptureCommand=4183]="CaptureCommand",t[t.DelegateCommand=4184]="DelegateCommand",t[t.CallCommand=153]="CallCommand",t[t.OptionsCommand=26]="OptionsCommand",t[t.ForCommand=539]="ForCommand",t[t.CustomCommand=284]="CustomCommand"}(Qs||(Qs={}));const{toView:Gs,oneTime:Ys}=us;class Js{constructor(t,e,s,i,n,r){this.observerLocator=t,this.interpolation=e,this.target=s,this.targetProperty=i,this.mode=n,this.locator=r,this.$state=0,this.$scope=void 0;const o=e.expressions,a=this.parts=Array(o.length);for(let c=0,h=o.length;c<h;++c)a[c]=new Xs(o[c],e,s,i,n,t,r,0===c)}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.$unbind(t)}this.$state|=4,this.$scope=e,this.part=s;const i=this.parts;for(let n=0,r=i.length;n<r;++n)i[n].$bind(t,e,s)}$unbind(t){if(!(4&this.$state))return;this.$state&=-5,this.$scope=void 0;const e=this.parts;for(let s=0,i=e.length;s<i;++s)e[s].$unbind(t)}}let Xs=class{constructor(t,e,s,i,n,r,o,a){this.sourceExpression=t,this.interpolation=e,this.target=s,this.targetProperty=i,this.mode=n,this.observerLocator=r,this.locator=o,this.isFirst=a,this.$state=0,Bs.assignIdTo(this),this.targetObserver=r.getAccessor(0,s,i)}updateTarget(t,e){this.targetObserver.setValue(t,16|e)}handleChange(t,e,s){if(!(4&this.$state))return;const i=this.targetObserver.getValue(),n=this.interpolation.evaluate(s,this.$scope,this.locator,this.part);n!==i&&this.updateTarget(n,s),0==(this.mode&Ys)&&(this.version++,this.sourceExpression.connect(s,this.$scope,this,this.part),this.unobserve(!1))}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.$unbind(t)}this.$state|=4,this.$scope=e,this.part=s;const i=this.sourceExpression;i.bind&&i.bind(t,e,this),this.mode!==us.oneTime&&this.targetObserver.bind&&this.targetObserver.bind(t),this.isFirst&&this.updateTarget(this.interpolation.evaluate(t,e,this.locator,s),t),this.mode&Gs&&i.connect(t,e,this,s)}$unbind(t){if(!(4&this.$state))return;this.$state&=-5;const e=this.sourceExpression;e.unbind&&e.unbind(t,this.$scope,this),this.targetObserver.unbind&&this.targetObserver.unbind(t),this.$scope=void 0,this.unobserve(!0)}};Xs=$t([Bs()],Xs);let Zs=class{constructor(t,e,s,i,n=!1){this.sourceExpression=t,this.targetProperty=e,this.observerLocator=s,this.locator=i,this.toBindingContext=n,this.$state=0,this.$scope=void 0,this.target=null,Bs.assignIdTo(this),this.$lifecycle=i.get(ks)}handleChange(t,e,s){if(4&this.$state){if(!(16&s))throw r.error(15,s);{const{target:t,targetProperty:e}=this,i=t[e],n=this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part);n!==i&&(t[e]=n)}}}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.$unbind(4096|t)}this.$state|=1,this.$scope=e,this.part=s,this.target=this.toBindingContext?e.bindingContext:e.overrideContext;const i=this.sourceExpression;i.bind&&i.bind(t,e,this),this.target[this.targetProperty]=this.sourceExpression.evaluate(4096|t,e,this.locator,s),this.sourceExpression.connect(t,e,this,s),this.$state|=4,this.$state&=-2}$unbind(t){if(!(4&this.$state))return;this.$state|=2;const e=this.sourceExpression;e.unbind&&e.unbind(t,this.$scope,this),this.$scope=void 0,this.unobserve(!0),this.$state&=-7}};Zs=$t([Bs()],Zs);class ti{constructor(t,e,s){this.sourceExpression=t,this.target=e,this.locator=s,this.$state=0,this.$scope=void 0}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.$unbind(4096|t)}this.$state|=1,this.$scope=e,this.part=s,Re(this.sourceExpression)&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(32|t,this.$scope,this.locator,this.target,s),this.$state|=4,this.$state&=-2}$unbind(t){if(!(4&this.$state))return;this.$state|=2;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,this.part)===this.target&&e.assign(t,this.$scope,this.locator,null,this.part),Fe(e=this.sourceExpression)&&e.unbind(t,this.$scope,this),this.$scope=void 0,this.$state&=-7}observeProperty(t,e,s){}handleChange(t,e,s){}}var ei,si,ii;function ni(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedItems=[],e.isIndexMap=!0,e}!function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(ei||(ei={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(si||(si={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(ii||(ii={}));let ri=class{constructor(t){this.obj=t,this.currentValue=t.length}getValue(){return this.obj.length}setValue(t,e){const{currentValue:s}=this;t!==s&&(this.currentValue=t,this.callSubscribers(t,s,16|e))}};function oi(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function ai(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function ci(t,e,s,i,n){let r,o,a,c,h,l,u;for(l=s+1;l<i;l++){for(r=t[l],o=e[l],u=l-1;u>=s&&(a=t[u],c=e[u],(h=n(a,r))>0);u--)t[u+1]=a,e[u+1]=c;t[u+1]=r,e[u+1]=o}}function hi(t,e,s,i,n){let r,o,a,c,h,l,u,d,p,f,g,v,m,b,y,w,k,C,T,S=0,x=0;for(;;){if(i-s<=10)return void ci(t,e,s,i,n);S=s+(i-s>>1),r=t[s],c=e[s],o=t[i-1],h=e[i-1],a=t[S],l=e[S],(u=n(r,o))>0&&(f=r,g=c,r=o,c=h,o=f,h=g),(d=n(r,a))>=0?(f=r,g=c,r=a,c=l,a=o,l=h,o=f,h=g):(p=n(o,a))>0&&(f=o,g=h,o=a,h=l,a=f,l=g),t[s]=r,e[s]=c,t[i-1]=a,e[i-1]=l,v=o,m=h,b=s+1,y=i-1,t[S]=t[b],e[S]=e[b],t[b]=v,e[b]=m;t:for(x=b+1;x<y;x++)if(w=t[x],k=e[x],(C=n(w,v))<0)t[x]=t[b],e[x]=e[b],t[b]=w,e[b]=k,b++;else if(C>0){do{if(--y==x)break t;C=n(T=t[y],v)}while(C>0);t[x]=t[y],e[x]=e[y],t[y]=w,e[y]=k,C<0&&(w=t[x],k=e[x],t[x]=t[b],e[x]=e[b],t[b]=w,e[b]=k,b++)}i-y<b-s?(hi(t,e,y,i,n),i=b):(hi(t,e,s,b,n),s=y)}}ri=$t([Ht()],ri);const li=Array.prototype,ui=li.push,di=li.unshift,pi=li.pop,fi=li.shift,gi=li.splice,vi=li.reverse,mi=li.sort,bi=["push","unshift","pop","shift","splice","reverse","sort"],yi={push:function(...t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=e.$observer;if(void 0===s)return ui.apply(e,t);const i=e.length,n=t.length;if(0===n)return i;e.length=s.indexMap.length=i+n;let r=i;for(;r<e.length;)e[r]=t[r-i],s.indexMap[r]=-2,r++;return s.notify(),e.length},unshift:function(...t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=e.$observer;if(void 0===s)return di.apply(e,t);const i=t.length,n=new Array(i);let r=0;for(;r<i;)n[r++]=-2;di.apply(s.indexMap,n);const o=di.apply(e,t);return s.notify(),o},pop:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=t.$observer;if(void 0===e)return pi.call(t);const s=e.indexMap,i=pi.call(t),n=s.length-1;return s[n]>-1&&s.deletedItems.push(s[n]),pi.call(s),e.notify(),i},shift:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=t.$observer;if(void 0===e)return fi.call(t);const s=e.indexMap,i=fi.call(t);return s[0]>-1&&s.deletedItems.push(s[0]),fi.call(s),e.notify(),i},splice:function(...t){const e=t[0],s=t[1];let i=this;void 0!==i.$raw&&(i=i.$raw);const n=i.$observer;if(void 0===n)return gi.apply(i,t);const r=this.length,o=0|e,a=o<0?Math.max(r+o,0):Math.min(o,r),c=n.indexMap,h=t.length,l=0===h?0:1===h?r-a:s;if(l>0){let t=a;const e=t+l;for(;t<e;)c[t]>-1&&c.deletedItems.push(c[t]),t++}if(h>2){const t=h-2,i=new Array(t);let n=0;for(;n<t;)i[n++]=-2;gi.call(c,e,s,...i)}else gi.apply(c,t);const u=gi.apply(i,t);return n.notify(),u},reverse:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=t.$observer;if(void 0===e)return vi.call(t),this;const s=t.length,i=s/2|0;let n=0;for(;n!==i;){const i=s-n-1,r=t[n],o=e.indexMap[n],a=t[i],c=e.indexMap[i];t[n]=a,e.indexMap[n]=c,t[i]=r,e.indexMap[i]=o,n++}return e.notify(),this},sort:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=e.$observer;if(void 0===s)return mi.call(e,t),this;const i=e.length;if(i<2)return this;hi(e,s.indexMap,0,i,ai);let n=0;for(;n<i&&void 0!==e[n];)n++;return void 0!==t&&"function"==typeof t||(t=oi),hi(e,s.indexMap,0,n,t),s.notify(),this}},wi={writable:!0,enumerable:!1,configurable:!0},ki=Reflect.defineProperty;for(const t of bi)ki(yi[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Ci=!1;let Ti=class{constructor(t,e,s){Ci||(Ci=!0,function(){for(const t of bi)!0!==li[t].observing&&ki(li,t,{...wi,value:yi[t]})}()),this.inBatch=!1,this.collection=s,this.persistentFlags=2080374799&t,this.indexMap=ni(s.length),this.lifecycle=e,this.lengthObserver=void 0,Reflect.defineProperty(s,"$observer",{value:this,enumerable:!1,writable:!0,configurable:!0})}notify(){this.lifecycle.batch.depth>0?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){return void 0===this.lengthObserver&&(this.lengthObserver=new ri(this.collection)),this.lengthObserver}flushBatch(t){this.inBatch=!1;const e=this.indexMap,s=this.collection.length;this.indexMap=ni(s),this.callCollectionSubscribers(e,16|this.persistentFlags),void 0!==this.lengthObserver&&this.lengthObserver.setValue(s,16)}};function Si(t,e,s){return void 0===s.$observer&&(s.$observer=new Ti(t,e,s)),s.$observer}Ti=$t([Wt()],Ti);let xi=class{constructor(t){this.obj=t,this.currentValue=t.size}getValue(){return this.obj.size}setValue(t,e){const{currentValue:s}=this;t!==s&&(this.currentValue=t,this.callSubscribers(t,s,16|e))}};xi=$t([Ht()],xi);const Ai=Map.prototype,$i=Ai.set,Vi=Ai.clear,Oi=Ai.delete,Ei=["set","clear","delete"],Ii={set:function(t,e){let s=this;void 0!==s.$raw&&(s=s.$raw);const i=s.$observer;if(void 0===i)return $i.call(s,t,e),this;const n=s.get(t),r=s.size;if($i.call(s,t,e),s.size===r){let e=0;for(const r of s.entries()){if(r[0]===t)return r[1]!==n&&(i.indexMap.deletedItems.push(i.indexMap[e]),i.indexMap[e]=-2,i.notify()),this;e++}return this}return i.indexMap[r]=-2,i.notify(),this},clear:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=t.$observer;if(void 0===e)return Vi.call(t);if(t.size>0){const s=e.indexMap;let i=0;for(const e of t.keys())s[i]>-1&&s.deletedItems.push(s[i]),i++;Vi.call(t),s.length=0,e.notify()}},delete:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=e.$observer;if(void 0===s)return Oi.call(e,t);if(0===e.size)return!1;let i=0;const n=s.indexMap;for(const r of e.keys()){if(r===t){n[i]>-1&&n.deletedItems.push(n[i]),n.splice(i,1);const r=Oi.call(e,t);return!0===r&&s.notify(),r}++i}return!1}},Pi={writable:!0,enumerable:!1,configurable:!0},Ri=Reflect.defineProperty;for(const t of Ei)Ri(Ii[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Fi=!1;Array.prototype.slice;let Ni=class{constructor(t,e,s){Fi||(Fi=!0,function(){for(const t of Ei)!0!==Ai[t].observing&&Ri(Ai,t,{...Pi,value:Ii[t]})}()),this.inBatch=!1,this.collection=s,this.persistentFlags=2080374799&t,this.indexMap=ni(s.size),this.lifecycle=e,this.lengthObserver=void 0,s.$observer=this}notify(){this.lifecycle.batch.depth>0?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){return void 0===this.lengthObserver&&(this.lengthObserver=new xi(this.collection)),this.lengthObserver}flushBatch(t){this.inBatch=!1;const{indexMap:e,collection:s}=this,{size:i}=s;this.indexMap=ni(i),this.callCollectionSubscribers(e,16|this.persistentFlags),void 0!==this.lengthObserver&&this.lengthObserver.setValue(i,16)}};function Li(t,e,s){return void 0===s.$observer&&(s.$observer=new Ni(t,e,s)),s.$observer}Ni=$t([Wt()],Ni);const ji=Set.prototype,Bi=ji.add,Di=ji.clear,Mi=ji.delete,_i=["add","clear","delete"],Ui={add:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=e.$observer;if(void 0===s)return Bi.call(e,t),this;const i=e.size;return Bi.call(e,t),e.size===i?this:(s.indexMap[i]=-2,s.notify(),this)},clear:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=t.$observer;if(void 0===e)return Di.call(t);if(t.size>0){const s=e.indexMap;let i=0;for(const e of t.keys())s[i]>-1&&s.deletedItems.push(s[i]),i++;Di.call(t),s.length=0,e.notify()}},delete:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=e.$observer;if(void 0===s)return Mi.call(e,t);if(0===e.size)return!1;let i=0;const n=s.indexMap;for(const r of e.keys()){if(r===t){n[i]>-1&&n.deletedItems.push(n[i]),n.splice(i,1);const r=Mi.call(e,t);return!0===r&&s.notify(),r}i++}return!1}},qi={writable:!0,enumerable:!1,configurable:!0},zi=Reflect.defineProperty;for(const t of _i)zi(Ui[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Ki=!1;Array.prototype.slice;let Hi=class{constructor(t,e,s){Ki||(Ki=!0,function(){for(const t of _i)!0!==ji[t].observing&&zi(ji,t,{...qi,value:Ui[t]})}()),this.inBatch=!1,this.collection=s,this.persistentFlags=2080374799&t,this.indexMap=ni(s.size),this.lifecycle=e,this.lengthObserver=void 0,s.$observer=this}notify(){this.lifecycle.batch.depth>0?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){return void 0===this.lengthObserver&&(this.lengthObserver=new xi(this.collection)),this.lengthObserver}flushBatch(t){this.inBatch=!1;const{indexMap:e,collection:s}=this,{size:i}=s;this.indexMap=ni(i),this.callCollectionSubscribers(e,16|this.persistentFlags),void 0!==this.lengthObserver&&this.lengthObserver.setValue(i,16)}};function Wi(t,e,s){return void 0===s.$observer&&(s.$observer=new Hi(t,e,s)),s.$observer}Hi=$t([Wt()],Hi);const Qi={static:!1,volatile:!1};let Gi=class{constructor(t,e,s){this.obj=t,this.propertyKey=e,this.descriptor=s,this.currentValue=void 0,this.oldValue=void 0,this.observing=!1}setValue(t){this.descriptor.set.call(this.obj,t),this.currentValue!==t&&(this.oldValue=this.currentValue,this.currentValue=t,this.callSubscribers(t,this.oldValue,16))}subscribe(t){this.observing||this.convertProperty(),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t)}convertProperty(){this.observing=!0,this.currentValue=this.obj[this.propertyKey];Reflect.defineProperty(this.obj,this.propertyKey,{set:t=>{this.setValue(t)},get:this.descriptor.get})}};Gi=$t([Ht()],Gi);let Yi=class{constructor(t,e,s,i,n,r){this.overrides=e,this.obj=s,this.propertyKey=i,this.descriptor=n,this.currentValue=void 0,this.oldValue=void 0,this.propertyDeps=[],this.collectionDeps=[],this.subscriberCount=0,this.isCollecting=!1,this.proxy=new Proxy(s,Xi(t,r,this));Reflect.defineProperty(s,i,{get:()=>this.getValue(),set:n.set})}addPropertyDep(t){this.propertyDeps.includes(t)||this.propertyDeps.push(t)}addCollectionDep(t){this.collectionDeps.includes(t)||this.collectionDeps.push(t)}getValue(){return 0===this.subscriberCount||this.isCollecting?this.currentValue=Reflect.apply(this.descriptor.get,this.proxy,n.a.emptyArray):this.currentValue=Reflect.apply(this.descriptor.get,this.obj,n.a.emptyArray),this.currentValue}subscribe(t){this.addSubscriber(t),1==++this.subscriberCount&&this.getValueAndCollectDependencies(!0)}unsubscribe(t){this.removeSubscriber(t),0==--this.subscriberCount&&this.unsubscribeAllDependencies()}handleChange(){const t=this.currentValue,e=this.getValueAndCollectDependencies(!1);t!==e&&this.callSubscribers(e,t,16)}handleCollectionChange(){const t=this.currentValue,e=this.getValueAndCollectDependencies(!1);t!==e&&this.callSubscribers(e,t,16)}getValueAndCollectDependencies(t){const e=!this.overrides.static||t;return e&&(this.unsubscribeAllDependencies(),this.isCollecting=!0),this.currentValue=this.getValue(),e&&(this.propertyDeps.forEach(t=>{t.subscribe(this)}),this.collectionDeps.forEach(t=>{t.subscribeToCollection(this)}),this.isCollecting=!1),this.currentValue}doNotCollect(t){return!this.isCollecting||"$observers"===t}unsubscribeAllDependencies(){this.propertyDeps.forEach(t=>{t.unsubscribe(this)}),this.propertyDeps.length=0,this.collectionDeps.forEach(t=>{t.unsubscribeFromCollection(this)}),this.collectionDeps.length=0}};Yi=$t([Ht()],Yi);const Ji=Object.prototype.toString;function Xi(t,e,s){return{get:function(i,n,r){if(s.doNotCollect(n))return Reflect.get(i,n,r);switch(Ji.call(i)){case"[object Array]":if(s.addCollectionDep(e.getArrayObserver(t,i)),"length"===n)return Reflect.get(i,n,i);case"[object Map]":if(s.addCollectionDep(e.getMapObserver(t,i)),"size"===n)return Reflect.get(i,n,i);case"[object Set]":if(s.addCollectionDep(e.getSetObserver(t,i)),"size"===n)return Reflect.get(i,n,i);default:s.addPropertyDep(e.getObserver(t,i,n))}return function(t,e,s,i,n){const r=Reflect.get(e,s,e);if("function"==typeof r)return e[s].bind(e);if("object"!=typeof r||null===r)return r;return new Proxy(r,Xi(t,i,n))}(t,i,n,e,s)}}}const Zi={forceUpdateInterval:10,now:n.a.now},{enter:tn,leave:en,trace:sn}=function(){const t=!1;let e=0;function s(t){return(10*t+.5|0)/10}function i(t,e,i){if(e instanceof un){const s=`processing=${e.processingSize} pending=${e.pendingSize} delayed=${e.delayedSize} flushReq=${e.flushRequested} prio=${e.priority}`;console.log(`${t}[Q.${i}] ${s}`)}else{const n=e.id,r=s(e.createdTime),o=s(e.queueTime),a=e.preempt,c=e.reusable,h=`id=${n} created=${r} queue=${o} preempt=${a} persistent=${e.persistent} reusable=${c} status=${e._status}`;console.log(`${t}[T.${i}] ${h}`)}}return{enter:function(s,n){t&&i(`${"  ".repeat(e++)}> `,s,n)},leave:function(s,n){t&&i(`${"  ".repeat(--e)}< `,s,n)},trace:function(s,n){t&&i(`${"  ".repeat(e)}- `,s,n)}}}(),nn=at.createInterface("IClock").withDefault(t=>t.instance(on));class rn{constructor(t){const{now:e,forceUpdateInterval:s}={...Zi,...t};this.now=function(t=!1){return e()}}static register(t){return Ct.singleton(nn,this).register(t)}}const on=new rn;var an;!function(t){t[t.microTask=0]="microTask",t[t.render=1]="render",t[t.macroTask=2]="macroTask",t[t.postRender=3]="postRender",t[t.idle=4]="idle"}(an||(an={}));const cn=at.createInterface("IScheduler").noDefault(),hn=function(){let t=void 0,e=void 0;function s(s,i){t=s,e=i}return function(){const i=new Promise(s);return i.resolve=t,i.reject=e,t=void 0,e=void 0,i}}(),ln={delay:0,preempt:!1,priority:1,persistent:!1,reusable:!0};class un{constructor({clock:t,priority:e,scheduler:s}){this.processingSize=0,this.processingHead=void 0,this.processingTail=void 0,this.pendingSize=0,this.pendingHead=void 0,this.pendingTail=void 0,this.delayedSize=0,this.delayedHead=void 0,this.delayedTail=void 0,this.flushRequested=!1,this.yieldPromise=void 0,this.taskPool=[],this.taskPoolSize=0,this.lastRequest=0,this.microTaskRequestFlushTask=null,this.priority=e,this.scheduler=s,this.clock=t}get isEmpty(){return 0===this.processingSize&&0===this.pendingSize&&0===this.delayedSize}flush(){for(tn(this,"flush"),null!==this.microTaskRequestFlushTask&&(this.microTaskRequestFlushTask.cancel(),this.microTaskRequestFlushTask=null),this.clock.now(!0),this.flushRequested=!1,this.pendingSize>0&&this.movePendingToProcessing(),this.delayedSize>0&&this.moveDelayedToProcessing();this.processingSize>0;)this.processingHead.run();if(this.pendingSize>0&&this.movePendingToProcessing(),this.delayedSize>0&&this.moveDelayedToProcessing(),this.processingSize>0?this.requestFlush():this.delayedSize>0&&(this.priority<=0?this.microTaskRequestFlushTask=this.scheduler.getTaskQueue(2).queueTask(this.requestFlush):this.requestFlush()),void 0!==this.yieldPromise){let t=!0,e=this.processingHead;for(;void 0!==e;){if(!e.persistent){t=!1;break}e=e.next}if(t)for(e=this.pendingHead;void 0!==e;){if(!e.persistent){t=!1;break}e=e.next}if(t)for(e=this.delayedHead;void 0!==e;){if(!e.persistent){t=!1;break}e=e.next}if(t){const t=this.yieldPromise;this.yieldPromise=void 0,t.resolve()}}en(this,"flush")}cancel(){tn(this,"cancel"),null!==this.microTaskRequestFlushTask&&(this.microTaskRequestFlushTask.cancel(),this.microTaskRequestFlushTask=null),this.scheduler.cancelFlush(this),this.flushRequested=!1,en(this,"cancel")}yield(){return tn(this,"yield"),0===this.processingSize&&0===this.pendingSize&&0===this.delayedSize?(en(this,"yield empty"),Promise.resolve()):(void 0===this.yieldPromise&&(this.yieldPromise=hn()),en(this,"yield task"),this.yieldPromise)}queueTask(t,e){tn(this,"queueTask");const{delay:s,preempt:i,persistent:n,reusable:r}={...ln,...e};if(i){if(s>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(n)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}if(n&&0===this.priority)throw new Error("Invalid arguments: cannot queue persistent tasks on the micro task queue");0===this.processingSize&&this.requestFlush();const o=this.clock.now();let a;if(r){const e=this.taskPool,c=this.taskPoolSize-1;c>=0?(a=e[c],e[c]=void 0,this.taskPoolSize=c,a.reuse(o,s,i,n,t)):a=new fn(this,o,o+s,i,n,r,t)}else a=new fn(this,o,o+s,i,n,r,t);return i?0==this.processingSize++?this.processingHead=this.processingTail=a:this.processingTail=(a.prev=this.processingTail).next=a:0===s?0==this.pendingSize++?this.pendingHead=this.pendingTail=a:this.pendingTail=(a.prev=this.pendingTail).next=a:0==this.delayedSize++?this.delayedHead=this.delayedTail=a:this.delayedTail=(a.prev=this.delayedTail).next=a,en(this,"queueTask"),a}take(t){if(tn(this,"take"),"pending"!==t.status)throw en(this,"take error"),new Error("Can only take pending tasks.");0===this.processingSize&&this.requestFlush(),t.taskQueue.remove(t),t.preempt?this.addToProcessing(t):t.queueTime<=this.clock.now()?this.addToPending(t):this.addToDelayed(t),en(this,"take")}remove(t){if(tn(this,"remove"),t.preempt)return this.removeFromProcessing(t),void en(this,"remove processing fast");if(t.queueTime>this.clock.now())return this.removeFromDelayed(t),void en(this,"remove delayed fast");let e=this.processingHead;for(;void 0!==e;){if(e===t)return this.removeFromProcessing(t),void en(this,"remove processing slow");e=e.next}for(e=this.pendingHead;void 0!==e;){if(e===t)return this.removeFromPending(t),void en(this,"remove pending slow");e=e.next}for(e=this.delayedHead;void 0!==e;){if(e===t)return this.removeFromDelayed(t),void en(this,"remove delayed slow");e=e.next}throw en(this,"remove error"),new Error(`Task #${t.id} could not be found`)}returnToPool(t){sn(this,"returnToPool"),this.taskPool[this.taskPoolSize++]=t}resetPersistentTask(t){tn(this,"resetPersistentTask"),t.reset(this.clock.now()),t.createdTime===t.queueTime?0==this.pendingSize++?(this.pendingHead=this.pendingTail=t,t.prev=t.next=void 0):(this.pendingTail=(t.prev=this.pendingTail).next=t,t.next=void 0):0==this.delayedSize++?(this.delayedHead=this.delayedTail=t,t.prev=t.next=void 0):(this.delayedTail=(t.prev=this.delayedTail).next=t,t.next=void 0),en(this,"resetPersistentTask")}finish(t){tn(this,"finish"),void 0!==t.next&&(t.next.prev=t.prev),void 0!==t.prev&&(t.prev.next=t.next),en(this,"finish")}removeFromProcessing(t){tn(this,"removeFromProcessing"),this.processingHead===t&&(this.processingHead=t.next),this.processingTail===t&&(this.processingTail=t.prev),--this.processingSize,this.finish(t),en(this,"removeFromProcessing")}removeFromPending(t){tn(this,"removeFromPending"),this.pendingHead===t&&(this.pendingHead=t.next),this.pendingTail===t&&(this.pendingTail=t.prev),--this.pendingSize,this.finish(t),en(this,"removeFromPending")}removeFromDelayed(t){tn(this,"removeFromDelayed"),this.delayedHead===t&&(this.delayedHead=t.next),this.delayedTail===t&&(this.delayedTail=t.prev),--this.delayedSize,this.finish(t),en(this,"removeFromDelayed")}addToProcessing(t){tn(this,"addToProcessing"),0==this.processingSize++?this.processingHead=this.processingTail=t:this.processingTail=(t.prev=this.processingTail).next=t,en(this,"addToProcessing")}addToPending(t){tn(this,"addToPending"),0==this.pendingSize++?this.pendingHead=this.pendingTail=t:this.pendingTail=(t.prev=this.pendingTail).next=t,en(this,"addToPending")}addToDelayed(t){tn(this,"addToDelayed"),0==this.delayedSize++?this.delayedHead=this.delayedTail=t:this.delayedTail=(t.prev=this.delayedTail).next=t,en(this,"addToDelayed")}movePendingToProcessing(){tn(this,"movePendingToProcessing"),0===this.processingSize?(this.processingHead=this.pendingHead,this.processingTail=this.pendingTail,this.processingSize=this.pendingSize):(this.processingTail.next=this.pendingHead,this.processingTail=this.pendingTail,this.processingSize+=this.pendingSize),this.pendingHead=void 0,this.pendingTail=void 0,this.pendingSize=0,en(this,"movePendingToProcessing")}moveDelayedToProcessing(){tn(this,"moveDelayedToProcessing");const t=this.clock.now(!0),e=this.delayedHead;if(e.queueTime<=t){let s=e,i=s.next,n=1;for(;void 0!==i&&i.queueTime<=t;)i=(s=i).next,++n;0===this.processingSize?(this.processingHead=e,this.processingTail=s,this.processingSize=n):(this.processingTail.next=e,this.processingTail=s,this.processingSize+=n),this.delayedHead=i,this.delayedSize-=n,0===this.delayedSize&&(this.delayedTail=void 0)}en(this,"moveDelayedToProcessing")}requestFlush(){tn(this,"requestFlush"),null!==this.microTaskRequestFlushTask&&(this.microTaskRequestFlushTask.cancel(),this.microTaskRequestFlushTask=null),this.flushRequested||(this.flushRequested=!0,this.lastRequest=this.clock.now(!0),this.scheduler.requestFlush(this)),en(this,"requestFlush")}}$t([et],un.prototype,"requestFlush",null);class dn extends Error{constructor(t){super("Task was canceled."),this.task=t}}let pn=0;class fn{constructor(t,e,s,i,n,r,o){this.taskQueue=t,this.createdTime=e,this.queueTime=s,this.preempt=i,this.persistent=n,this.reusable=r,this.callback=o,this.id=++pn,this.next=void 0,this.prev=void 0,this.resolve=void 0,this.reject=void 0,this._result=void 0,this._status="pending",sn(this,"constructor"),this.priority=t.priority}get result(){const t=this._result;if(void 0===t)switch(this._status){case"pending":{const t=this._result=hn();return this.resolve=t.resolve,this.reject=t.reject,t}case"running":throw new Error("Trying to await task from within task will cause a deadlock.");case"completed":return this._result=Promise.resolve();case"canceled":return this._result=Promise.reject(new dn(this))}return t}get status(){return this._status}run(){if(tn(this,"run"),"pending"!==this._status)throw en(this,"run error"),new Error(`Cannot run task in ${this._status} state`);const t=this.persistent,e=this.reusable,s=this.taskQueue,i=this.callback,n=this.resolve,r=this.reject,o=this.createdTime;s.remove(this),this._status="running";try{const r=i(on.now()-o);this.persistent?s.resetPersistentTask(this):this._status=t?"canceled":"completed",void 0!==n&&n(r)}catch(t){if(void 0===r)throw t;r(t)}finally{this.persistent||(this.dispose(),e&&s.returnToPool(this)),en(this,"run finally")}}cancel(){if(tn(this,"cancel"),"pending"===this._status){const t=this.taskQueue,e=this.reusable,s=this.reject;return t.remove(this),t.isEmpty&&t.cancel(),this._status="canceled",void 0!==s&&s(new dn(this)),this.dispose(),e&&t.returnToPool(this),en(this,"cancel true =pending"),!0}return"running"===this._status&&this.persistent?(this.persistent=!1,en(this,"cancel true =running+persistent"),!0):(en(this,"cancel false"),!1)}reset(t){tn(this,"reset");const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this._status="pending",this.resolve=void 0,this.reject=void 0,this._result=void 0,en(this,"reset")}reuse(t,e,s,i,n){tn(this,"reuse"),this.createdTime=t,this.queueTime=t+e,this.preempt=s,this.persistent=i,this.callback=n,this._status="pending",en(this,"reuse")}dispose(){sn(this,"dispose"),this.prev=void 0,this.next=void 0,this.callback=void 0,this.resolve=void 0,this.reject=void 0,this._result=void 0}}const gn=at.createInterface("IDirtyChecker").withDefault(t=>t.singleton(mn)),vn={framesPerCheck:6,disabled:!1,warn:!0,throw:!1,resetToDefault(){this.framesPerCheck=6,this.disabled=!1,this.warn=!0,this.throw=!1}};let mn=class{constructor(t){this.scheduler=t,this.tracked=[],this.task=null,this.elapsedFrames=0}createProperty(t,e){if(vn.throw)throw r.error(800,e);return vn.warn&&r.write(801,e),new bn(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.task=this.scheduler.queueRenderTask(()=>this.check(),{persistent:!0}))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.task.cancel(),this.task=null)}check(t){if(vn.disabled)return;if(++this.elapsedFrames<vn.framesPerCheck)return;this.elapsedFrames=0;const e=this.tracked,s=e.length;let i,n=0;for(;n<s;++n)(i=e[n]).isDirty()&&i.flush(256)}};mn=$t([Vt(0,cn)],mn);let bn=class{constructor(t,e,s){this.dirtyChecker=t,this.obj=e,this.propertyKey=s}isDirty(){return this.oldValue!==this.obj[this.propertyKey]}flush(t){const e=this.oldValue,s=this.obj[this.propertyKey];this.callSubscribers(s,e,16|t),this.oldValue=s}subscribe(t){this.hasSubscribers()||(this.oldValue=this.obj[this.propertyKey],this.dirtyChecker.addProperty(this)),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)}};bn=$t([Ht()],bn);Array.prototype.slice;const yn=n.a.noop;class wn{constructor(t,e){this.doNotCache=!0,"length"===e?(this.obj=t,this.getValue=this.getStringLength):this.getValue=this.returnUndefined}getStringLength(){return this.obj.length}returnUndefined(){}}wn.prototype.setValue=yn,wn.prototype.subscribe=yn,wn.prototype.unsubscribe=yn,wn.prototype.dispose=yn;class kn{constructor(t,e){this.obj=t,this.propertyKey=e,void 0!==t.$observers&&void 0!==t.$observers[e]&&void 0!==t.$observers[e].setValue&&(this.setValue=this.setValueDirect)}getValue(){return this.obj[this.propertyKey]}setValue(t,e){this.obj[this.propertyKey]=t}setValueDirect(t,e){this.obj.$observers[this.propertyKey].setValue(t,e)}}const Cn=Object.prototype.toString,Tn=at.createInterface("IObserverLocator").noDefault(),Sn=at.createInterface("ITargetObserverLocator").noDefault(),xn=at.createInterface("ITargetAccessorLocator").noDefault();let An=class{constructor(t,e,s,i,n){this.lifecycle=t,this.scheduler=e,this.dirtyChecker=s,this.targetObserverLocator=i,this.targetAccessorLocator=n,this.adapters=[]}static register(t){return Ct.singleton(Tn,this).register(t)}getObserver(t,e,s){if(2&t&&"object"==typeof e)return pe.getOrCreate(e,s);if(function(t){return!0===t.$synthetic}(e))return e.getObservers(t).getOrCreate(this.lifecycle,t,e,s);let i=e.$observers;if(i&&s in i)return i[s];const n=this.createPropertyObserver(t,e,s);return n.doNotCache||(void 0===i&&(i=this.getOrCreateObserversLookup(e)),i[s]=n),n}addAdapter(t){this.adapters.push(t)}getAccessor(t,e,s){return this.targetAccessorLocator.handles(t,e)?this.targetObserverLocator.overridesAccessor(t,e,s)?this.getObserver(t,e,s):this.targetAccessorLocator.getAccessor(t,this.scheduler,this.lifecycle,e,s):2&t?pe.getOrCreate(e,s):new kn(e,s)}getArrayObserver(t,e){return Si(t,this.lifecycle,e)}getMapObserver(t,e){return Li(t,this.lifecycle,e)}getSetObserver(t,e){return Wi(t,this.lifecycle,e)}getOrCreateObserversLookup(t){return t.$observers||this.createObserversLookup(t)}createObserversLookup(t){const e={};return Reflect.defineProperty(t,"$observers",{enumerable:!1,configurable:!1,writable:!1,value:e})||r.write(0,t),e}getAdapterObserver(t,e,s,i){for(let n=0,r=this.adapters.length;n<r;n++){const r=this.adapters[n].getObserver(t,e,s,i);if(null!=r)return r}return null}createPropertyObserver(t,e,s){if(!(e instanceof Object))return new wn(e,s);let i=!1;if(this.targetObserverLocator.handles(t,e)){const n=this.targetObserverLocator.getObserver(t,this.scheduler,this.lifecycle,this,e,s);if(null!=n)return n;i=!0}switch(Cn.call(e)){case"[object Array]":return"length"===s?this.getArrayObserver(t,e).getLengthObserver():this.dirtyChecker.createProperty(e,s);case"[object Map]":return"size"===s?this.getMapObserver(t,e).getLengthObserver():this.dirtyChecker.createProperty(e,s);case"[object Set]":return"size"===s?this.getSetObserver(t,e).getLengthObserver():this.dirtyChecker.createProperty(e,s)}const n=function(t,e){let s=Object.getOwnPropertyDescriptor(t,e),i=Object.getPrototypeOf(t);for(;null==s&&null!=i;)s=Object.getOwnPropertyDescriptor(i,e),i=Object.getPrototypeOf(i);return s}(e,s);if(n&&(n.get||n.set)){if(n.get&&n.get.getObserver)return n.get.getObserver(e);const o=this.getAdapterObserver(t,e,s,n);return o||(i?this.dirtyChecker.createProperty(e,s):function(t,e,s,i,n,o,a){if(!1===a.configurable)return s.createProperty(n,o);if(a.get){const{constructor:{prototype:{computed:s}}}=n,i=s&&s[o]||Qi;return a.set?i.volatile?new Yi(t,i,n,o,a,e):new Gi(n,o,a):new Yi(t,i,n,o,a,e)}throw r.error(18,o)}(t,this,this.dirtyChecker,this.lifecycle,e,s,n))}return new fe(this.lifecycle,t,e,s)}};An=$t([Vt(0,ks),Vt(1,cn),Vt(2,gn),Vt(3,Sn),Vt(4,xn)],An);let $n=class{constructor(t,e,s,i,n){this.lifecycle=t,this.obj=s,this.propertyKey=i,this.currentValue=void 0,this.oldValue=void 0,this.inBatch=!1;let r=!1;pe.isProxy(s)?(r=!0,s.$observer.subscribe(this,i),this.obj=s.$raw):this.obj=s,this.callback=this.obj[n],void 0===this.callback?this.observing=!1:(this.observing=!0,this.currentValue=s[i],r||this.createGetterSetter()),this.persistentFlags=2080374799&e}handleChange(t,e,s){this.setValue(t,s)}getValue(){return this.currentValue}setValue(t,e){if(this.observing){const s=this.currentValue;if(this.currentValue=t,0===this.lifecycle.batch.depth){if(this.callSubscribers(t,s,this.persistentFlags|e),0==(4096&e)||(32&e)>0){const i=this.callback;void 0!==i&&i.call(this.obj,t,s,this.persistentFlags|e)}}else this.inBatch||(this.inBatch=!0,this.oldValue=s,this.lifecycle.batch.add(this))}else this.obj[this.propertyKey]=t}subscribe(t){!1===this.observing&&(this.observing=!0,this.currentValue=this.obj[this.propertyKey],this.createGetterSetter()),this.addSubscriber(t)}createGetterSetter(){Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.currentValue,set:t=>{this.setValue(t,0)}})||r.write(1,this.propertyKey,this.obj)}};$n=$t([Ht()],$n);class Vn{constructor(t){this.mode=t,this.originalModes=new WeakMap}bind(t,e,s){this.originalModes.set(s,s.mode),s.mode=this.mode}unbind(t,e,s){s.mode=this.originalModes.get(s)}}let On=class extends Vn{constructor(){super(us.oneTime)}};On=$t([$e("oneTime")],On);let En=class extends Vn{constructor(){super(us.toView)}};En=$t([$e("toView")],En);let In=class extends Vn{constructor(){super(us.fromView)}};In=$t([$e("fromView")],In);let Pn=class extends Vn{constructor(){super(us.twoWay)}};Pn=$t([$e("twoWay")],Pn);class Rn{constructor(t,e){this.binding=t;const s=t.locator.get(cn).getPostRenderTaskQueue(),i={delay:e},n=this.methodName="callSource"in t?"callSource":"handleChange";let r=null;const o=this.originalHandler=t[n];this.wrappedHandler=(...e)=>{null!==r&&r.cancel(),r=s.queueTask(()=>o.call(t,...e),i)}}start(){this.binding[this.methodName]=this.wrappedHandler}stop(){this.binding[this.methodName]=this.originalHandler}}const Fn=new WeakMap;let Nn=class{bind(t,e,s,i=200){let n=Fn.get(s);void 0===n&&(n=new Rn(s,i),Fn.set(s,n)),n.start()}unbind(t,e,s){Fn.get(s).stop()}};Nn=$t([$e("debounce")],Nn);let Ln=class{constructor(t){this.signaler=t}bind(t,e,s,...i){if(!s.updateTarget)throw r.error(11);if(4===arguments.length){const t=i[0];this.signaler.addSignalListener(t,s),s.signal=t}else{if(!(arguments.length>4))throw r.error(12);{const t=Array.prototype.slice.call(i.length+3,3);let e=t.length;for(;e--;){const i=t[e];this.signaler.addSignalListener(i,s)}s.signal=t}}}unbind(t,e,s){const i=s.signal;if(s.signal=null,Array.isArray(i)){const t=i;let e=t.length;for(;e--;)this.signaler.removeSignalListener(t[e],s)}else this.signaler.removeSignalListener(i,s)}};Ln=$t([$e("signal"),Vt(0,ke)],Ln);class jn{constructor(t,e){this.binding=t;const s=t.locator.get(nn),i=t.locator.get(cn).getPostRenderTaskQueue(),n={delay:e},r=this.methodName="callSource"in t?"callSource":"handleChange";let o=null,a=0,c=0;const h=this.originalHandler=t[r];this.wrappedHandler=(...r)=>{(c=a+e-s.now())>0?(null!==o&&o.cancel(),n.delay=c,o=i.queueTask(()=>{a=s.now(),h.call(t,...r)},n)):(a=s.now(),h.call(t,...r))}}start(){this.binding[this.methodName]=this.wrappedHandler}stop(){this.binding[this.methodName]=this.originalHandler}}const Bn=new WeakMap;let Dn=class{bind(t,e,s,i=200){let n=Bn.get(s);void 0===n&&(n=new jn(s,i),Bn.set(s,n)),n.start()}unbind(t,e,s){Bn.get(s).stop()}};function Mn(t,e){let s;function i(t,e){arguments.length>1&&(s.property=e),C.define(Un.name,qn.create(e,s),t.constructor,e),j.annotation.appendTo(t.constructor,Un.keyFrom(e))}return arguments.length>1?(s={},void i(t,e)):"string"==typeof t?(s={},i):(s=void 0===t?{}:t,i)}function _n(t){return t.startsWith(Un.name)}Dn=$t([$e("throttle")],Dn);const Un={name:j.annotation.keyFor("bindable"),keyFrom:t=>`${Un.name}:${t}`,from(...t){const e={},s=Array.isArray;function i(t){e[t]=qn.create(t)}return t.forEach((function(t){s(t)?t.forEach(i):t instanceof qn?e[t.property]=t:void 0!==t&&Object.keys(t).forEach(s=>(function(t,s){e[t]=s instanceof qn?s:qn.create(t,s)})(s,t[s]))})),e},for(t){let e;const s={add(i){let n,r;return"string"==typeof i?r={property:n=i}:(n=i.property,r=i),e=qn.create(n,r),C.hasOwn(Un.name,t,n)||j.annotation.appendTo(t,Un.keyFrom(n)),C.define(Un.name,e,t,n),s},mode:t=>(e.mode=t,s),callback:t=>(e.callback=t,s),attribute:t=>(e.attribute=t,s),primary:()=>(e.primary=!0,s)};return s},getAll(t){const e=Un.name.length+1,s=[],i=nt(t);let n,r,o,a=i.length,c=0;for(;--a>=0;){o=i[a],r=(n=j.annotation.getKeys(o).filter(_n)).length;for(let t=0;t<r;++t)s[c++]=C.getOwn(Un.name,o,n[t].slice(e))}return s}};class qn{constructor(t,e,s,i,n){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.property=n}static create(t,e={}){return new qn(it(e.attribute,G(t)),it(e.callback,`${t}Changed`),it(e.mode,us.toView),it(e.primary,!1),it(e.property,t))}}function zn(t){return function(e){return Wn.define(t,e)}}function Kn(t){return function(e){return Wn.define("string"==typeof t?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class Hn{constructor(t,e,s,i,n,r,o,a,c){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.strategy=a,this.hooks=c}static create(t,e){let s,i;return"string"==typeof t?i={name:s=t}:(s=t.name,i=t),new Hn(e,it(Wn.getAnnotation(e,"name"),s),st(Wn.getAnnotation(e,"aliases"),i.aliases,e.aliases),Wn.keyFrom(s),it(Wn.getAnnotation(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,us.toView),it(Wn.getAnnotation(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Un.from(...Un.getAll(e),Wn.getAnnotation(e,"bindables"),e.bindables,i.bindables),it(Wn.getAnnotation(e,"strategy"),i.strategy,e.strategy,1),it(Wn.getAnnotation(e,"hooks"),i.hooks,e.hooks,new xe(e.prototype)))}register(t){const{Type:e,key:s,aliases:i}=this;Ct.transient(s,e).register(t),Ct.alias(s,e).register(t),Ae(i,Wn,s,t)}}const Wn={name:j.resource.keyFor("custom-attribute"),keyFrom:t=>`${Wn.name}:${t}`,isType:t=>"function"==typeof t&&C.hasOwn(Wn.name,t),define(t,e){const s=Hn.create(t,e);return C.define(Wn.name,s,s.Type),C.define(Wn.name,s,s),j.resource.appendTo(e,Wn.name),s.Type},getDefinition(t){const e=C.getOwn(Wn.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){C.define(j.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>C.getOwn(j.annotation.keyFor(e),t)},Qn=at.createInterface("INode").noDefault(),Gn=at.createInterface("IRenderLocation").noDefault(),Yn=at.createInterface("IDOM").noDefault(),Jn=function(...t){throw r.error(1e3)},Xn={addEventListener:Jn,appendChild:Jn,cloneNode:Jn,convertToRenderLocation:Jn,createDocumentFragment:Jn,createElement:Jn,createCustomEvent:Jn,dispatchEvent:Jn,createNodeObserver:Jn,createTemplate:Jn,createTextNode:Jn,insertBefore:Jn,isMarker:Jn,isNodeInstance:Jn,isRenderLocation:Jn,makeTarget:Jn,registerElementResolver:Jn,remove:Jn,removeEventListener:Jn,setAttribute:Jn},Zn={...Xn,scheduler:void 0,get isInitialized(){return!0===Reflect.get(this,"$initialized")},initialize(t){if(this.isInitialized)throw r.error(1001);const e={},s=[t];let i=Object.getPrototypeOf(t);for(;i&&i!==Object.prototype;)s.unshift(i),i=Object.getPrototypeOf(i);for(i of s)Object.assign(e,Object.getOwnPropertyDescriptors(i));const n=[];let o,a;for(o in e)(a=e[o]).configurable&&a.writable&&(Reflect.defineProperty(this,o,a),n.push(o));Reflect.set(this,"$domKeys",n),Reflect.set(this,"$initialized",!0)},destroy(){if(!this.isInitialized)throw r.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,Xn),Reflect.set(this,"$domKeys",n.a.emptyArray),Reflect.set(this,"$initialized",!1)}},tr={empty:{isMounted:!1,isLinked:!1,next:void 0,childNodes:n.a.emptyArray,firstChild:null,lastChild:null,findTargets:()=>n.a.emptyArray,insertBefore(t){},appendTo(t){},remove(){},addToLinked(){},unlink(){},link(t){}}};class er{constructor(t,e,s){this.factory=t,this.flags=s,this.id=J("au$component"),this.view=this.factory.create(),this.view.hold(e,1)}binding(t){return this.view.parent=this.$controller,this.view.bind(t|this.flags,this.$controller.scope)}attaching(t){this.view.attach(t)}detaching(t){this.view.detach(t)}unbinding(t){const e=this.view.unbind(t);return this.view.parent=void 0,e}}let sr=class extends er{constructor(t,e){super(t,e,268435456)}};sr=$t([Kn("infrequent-mutations"),Vt(0,ws),Vt(1,Gn)],sr);let ir=class extends er{constructor(t,e){super(t,e,536870912)}};ir=$t([Kn("frequent-mutations"),Vt(0,ws),Vt(1,Gn)],ir);let nr=class extends er{constructor(t,e){super(t,e,134217728)}};nr=$t([Kn("observe-shallow"),Vt(0,ws),Vt(1,Gn)],nr);const rr={done:{done:!0,canCancel:()=>!1,cancel(){},wait:()=>Promise.resolve()}};var or;!function(t){t[t.beforeCreate=0]="beforeCreate",t[t.beforeRender=1]="beforeRender",t[t.beforeBind=2]="beforeBind",t[t.beforeAttach=3]="beforeAttach"}(or||(or={}));const ar=at.createInterface("IStartTask").noDefault();var cr;!function(t){t[t.with=0]="with",t[t.from=1]="from"}(cr||(cr={}));const hr=class t{constructor(t){this.type=t,this._slot=void 0,this._promiseOrTask=void 0,this._container=void 0,this._key=void 0,this._callback=void 0,this._task=void 0}get slot(){if(void 0===this._slot)throw new Error("StartTask.slot is not set");return this._slot}get promiseOrTask(){if(void 0===this._promiseOrTask)throw new Error("StartTask.promiseOrTask is not set");return this._promiseOrTask}get container(){if(void 0===this._container)throw new Error("StartTask.container is not set");return this._container}get key(){if(void 0===this._key)throw new Error("StartTask.key is not set");return this._key}get callback(){if(void 0===this._callback)throw new Error("StartTask.callback is not set");return this._callback}get task(){if(void 0===this._task)throw new Error("StartTask.task is not set");return this._task}static with(e){const s=new t(0);return s._key=e,s}static from(e){const s=new t(1);return s._promiseOrTask=e,s}beforeCreate(){return this.at(0)}beforeRender(){return this.at(1)}beforeBind(){return this.at(2)}beforeAttach(){return this.at(3)}at(t){return this._slot=t,this}call(t){return this._callback=t,this}register(t){return this._container=t.register(Ct.instance(ar,this))}resolveTask(){if(void 0===this._task)switch(this.type){case 0:this._task=new pr(this.container,this.key,this.callback);break;case 1:this._task=new gr(this.promiseOrTask)}return this.task}},lr=at.createInterface("IStartTaskManager").noDefault();let ur=class{constructor(t){this.locator=t}static register(t){return Ct.singleton(lr,this).register(t)}runBeforeCreate(t=this.locator){return this.run(0,t)}runBeforeRender(t=this.locator){return this.run(1,t)}runBeforeBind(t=this.locator){return this.run(2,t)}runBeforeAttach(t=this.locator){return this.run(3,t)}run(t,e=this.locator){const s=e.getAll(ar).filter(e=>e.slot===t).map(t=>t.resolveTask()).filter(t=>!t.done);return 0===s.length?rr.done:new mr(s)}};ur=$t([Vt(0,ht)],ur);class dr{constructor(t,e,s,...i){this.done=!1,this.hasStarted=!1,this.isCancelled=!1,this.promise=t.then(t=>{if(!0!==this.isCancelled&&(this.hasStarted=!0,null!==e)){const n=e.call(s,t,...i);if(void 0!==n){return(n.then instanceof Function?n:n.wait()).then(()=>{this.done=!0})}this.done=!0}})}canCancel(){return!this.hasStarted}cancel(){this.canCancel()&&(this.isCancelled=!0)}wait(){return this.promise}}class pr{constructor(t,e,s){this.container=t,this.key=e,this.callback=s,this.done=!1}canCancel(){return!1}cancel(){}wait(){if(void 0===this.promise){const t=this.container.get(this.key),e=this.callback.call(void 0,t);this.promise=void 0===e?Promise.resolve():e.then instanceof Function?e:e.wait(),this.promise=this.promise.then(()=>{this.done=!0,this.container=void 0,this.key=void 0,this.callback=void 0}).catch(t=>{throw t})}return this.promise}}class fr{constructor(t,e,s,...i){this.done=!1,this.hasStarted=!1,this.isCancelled=!1;const n=t.then instanceof Function?t:t.wait();this.promise=n.then(()=>{if(!0===this.isCancelled)return;this.hasStarted=!0;const t=e.call(s,...i);if(void 0!==t){return(t.then instanceof Function?t:t.wait()).then(()=>{this.done=!0})}this.done=!0})}canCancel(){return!this.hasStarted}cancel(){this.canCancel()&&(this.isCancelled=!0)}wait(){return this.promise}}class gr{constructor(t){this.done=!1,this.promise=t.then instanceof Function?t:t.wait(),this.promise.then(()=>{this.done=!0}).catch(t=>{throw t})}canCancel(){return!1}cancel(){}wait(){return this.promise}}class vr{constructor(t,e,s,...i){this.done=!1,this.hasStarted=!1,this.isCancelled=!1,this.promise=Promise.all(t.map(t=>t.wait())).then(()=>{if(!0===this.isCancelled)return;this.hasStarted=!0;const t=e.call(s,...i);if(void 0!==t)return t.wait().then(()=>{this.done=!0});this.done=!0})}canCancel(){return!this.hasStarted}cancel(){this.canCancel()&&(this.isCancelled=!0)}wait(){return this.promise}}class mr{constructor(t){this.done=!1,this.promise=Promise.all(t.map(t=>t.wait())).then(()=>{this.done=!0})}canCancel(){return!1}cancel(){}wait(){return this.promise}}function br(t){return!(void 0===t||!0===t.done)}let yr=class{constructor(t,e){this.ifFactory=t,this.location=e,this.id=J("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.task=rr.done,this.value=!1}binding(t){return this.task.done?this.task=this.swap(this.value,t):this.task=new fr(this.task,this.swap,this,this.value,t),this.task}attaching(t){this.task.done?this.attachView(t):this.task=new fr(this.task,this.attachView,this,t)}detaching(t){return void 0!==this.view&&(this.task.done?this.view.detach(t):this.task=new fr(this.task,this.view.detach,this.view,t)),this.task}unbinding(t){return void 0!==this.view&&(this.task.done?this.task=this.view.unbind(t):this.task=new fr(this.task,this.view.unbind,this.view,t)),this.task}caching(t){void 0!==this.ifView&&this.ifView.release(t)&&(this.ifView=void 0),void 0!==this.elseView&&this.elseView.release(t)&&(this.elseView=void 0),this.view=void 0}valueChanged(t,e,s){0!=(4&this.$controller.state)&&(this.task.done?this.task=this.swap(this.value,s):this.task=new fr(this.task,this.swap,this,this.value,s))}updateView(t,e){let s;return s=t?this.ifView=this.ensureView(this.ifView,this.ifFactory,e):null!=this.elseFactory?this.elseView=this.ensureView(this.elseView,this.elseFactory,e):void 0}ensureView(t,e,s){return void 0===t&&(t=e.create(s)),t.hold(this.location,1),t}swap(t,e){let s=rr.done;if((!0===t&&void 0!==this.elseView||!0!==t&&void 0!==this.ifView)&&(s=this.deactivate(e)),s.done){const i=this.updateView(t,e);s=this.activate(i,e)}else s=new dr(s.wait().then(()=>this.updateView(t,e)),this.activate,this,e);return s}deactivate(t){const e=this.view;if(void 0===e)return rr.done;e.detach(t);const s=e.unbind(t);return e.parent=void 0,s}activate(t,e){if(this.view=t,void 0===t)return rr.done;let s=this.bindView(e);return 0==(32&this.$controller.state)?s:(s.done?this.attachView(e):s=new fr(s,this.attachView,this,e),s)}bindView(t){return void 0!==this.view&&(5&this.$controller.state)>0?(this.view.parent=this.$controller,this.view.bind(t,this.$controller.scope,this.$controller.part)):rr.done}attachView(t){void 0!==this.view&&(40&this.$controller.state)>0&&this.view.attach(t)}};$t([Mn],yr.prototype,"value",void 0),yr=$t([Kn("if"),Vt(0,ws),Vt(1,Gn)],yr);let wr=class{constructor(t){this.factory=t,this.id=J("au$component")}link(t){if(t instanceof yr)t.elseFactory=this.factory;else{if(!(t.viewModel instanceof yr))throw new Error("Unsupported IfBehavior");t.viewModel.elseFactory=this.factory}}};wr=$t([Kn("else"),Vt(0,ws)],wr);let kr,Cr,Tr=class{constructor(t,e,s){this.location=t,this.renderable=e,this.factory=s,this.id=J("au$component"),this.hasPendingInstanceMutation=!1,this.observer=void 0,this.views=[],this.key=void 0,this.task=rr.done,this.normalizedItems=void 0}binding(t){this.checkCollectionObserver(t);const e=this.renderable.bindings,{length:s}=e;let i;for(let t=0;t<s;++t)if((i=e[t]).target===this&&"items"===i.targetProperty){this.forOf=i.sourceExpression;break}return this.local=this.forOf.declaration.evaluate(t,this.$controller.scope,null),this.normalizeToArray(t),this.processViewsKeyed(void 0,t),this.task}attaching(t){this.task.done?this.attachViews(void 0,t):this.task=new fr(this.task,this.attachViews,this,void 0,t)}detaching(t){this.task.done?this.detachViewsByRange(0,this.views.length,t):this.task=new fr(this.task,this.detachViewsByRange,this,0,this.views.length,t)}unbinding(t){return this.checkCollectionObserver(t),this.task.done?this.task=this.unbindAndRemoveViewsByRange(0,this.views.length,t,!1):this.task=new fr(this.task,this.unbindAndRemoveViewsByRange,this,0,this.views.length,t,!1),this.task}itemsChanged(t){t|=this.$controller.flags,this.checkCollectionObserver(t),t|=16,this.normalizeToArray(t),this.processViewsKeyed(void 0,t)}handleCollectionChange(t,e){e|=this.$controller.flags,e|=976,this.normalizeToArray(e),this.processViewsKeyed(t,e)}processViewsKeyed(t,e){const s=this.views.length;void 0===t?((5&this.$controller.state)>0&&(this.detachViewsByRange(0,s,e),this.task.done?this.task=this.unbindAndRemoveViewsByRange(0,s,e,!1):this.task=new fr(this.task,this.unbindAndRemoveViewsByRange,this,0,s,e,!1),this.task.done?this.task=this.createAndBindAllViews(e):this.task=new fr(this.task,this.createAndBindAllViews,this,e)),(40&this.$controller.state)>0&&(this.task.done?this.attachViewsKeyed(e):this.task=new fr(this.task,this.attachViewsKeyed,this,e))):(!function(t){let e=0,s=0;const i=t.length;for(let n=0;n<i;++n){for(;t.deletedItems[s]<=n-e;)++s,--e;-2===t[n]?++e:t[n]+=e}}(t),(5&this.$controller.state)>0&&(t.deletedItems.length>0&&(t.deletedItems.sort(X),this.task.done?this.detachViewsByKey(t,e):this.task=new fr(this.task,this.detachViewsByKey,this,t,e),this.task.done?this.task=this.unbindAndRemoveViewsByKey(t,e):this.task=new fr(this.task,this.unbindAndRemoveViewsByKey,this,t,e)),this.task.done?this.task=this.createAndBindNewViewsByKey(t,e):this.task=new fr(this.task,this.createAndBindNewViewsByKey,this,t,e)),(40&this.$controller.state)>0&&(this.task.done?this.sortViewsByKey(s,t,e):this.task=new fr(this.task,this.sortViewsByKey,this,s,t,e)))}checkCollectionObserver(t){const e=this.observer;if((5&this.$controller.state)>0){const s=this.observer=function(t,e,s){const i=s instanceof Object?pe.getRawIfProxy(s):s;switch(Cn.call(s)){case"[object Array]":return Si(t,e,i);case"[object Map]":return Li(t,e,i);case"[object Set]":return Wi(t,e,i)}}(t,this.$controller.lifecycle,this.items);e!==s&&e&&e.unsubscribeFromCollection(this),s&&s.subscribeToCollection(this)}else void 0!==e&&e.unsubscribeFromCollection(this)}normalizeToArray(t){const e=this.items;if(e instanceof Array)return void(this.normalizedItems=e);if(void 0===this.forOf)return;const s=[];this.forOf.iterate(t,e,(t,e,i)=>{s[e]=i}),this.normalizedItems=s}detachViewsByRange(t,e,s){const i=this.views;let n;this.$controller.lifecycle.detached.begin();for(let r=t;r<e;++r)(n=i[r]).release(s),n.detach(s);this.$controller.lifecycle.detached.end(s)}unbindAndRemoveViewsByRange(t,e,s,i){const n=this.views;let r,o,a=void 0;this.$controller.lifecycle.unbound.begin();for(let i=t;i<e;++i)r=(o=n[i]).unbind(s),o.parent=void 0,r.done||(void 0===a&&(a=[]),a.push(r));return i&&(this.views.length=t),void 0===a?(this.$controller.lifecycle.unbound.end(s),rr.done):new vr(a,this.$controller.lifecycle.unbound.end,this.$controller.lifecycle.unbound,s)}detachViewsByKey(t,e){const s=this.views;this.$controller.lifecycle.detached.begin();const i=t.deletedItems,n=i.length;let r;for(let t=0;t<n;++t)(r=s[i[t]]).release(e),r.detach(e);this.$controller.lifecycle.detached.end(e)}unbindAndRemoveViewsByKey(t,e){const s=this.views;let i,n=void 0;this.$controller.lifecycle.unbound.begin();const r=t.deletedItems,o=r.length;let a,c=0;for(;c<o;++c)i=(a=s[r[c]]).unbind(e),a.parent=void 0,i.done||(void 0===n&&(n=[]),n.push(i));c=0;let h=0;for(;c<o;++c)h=r[c]-c,this.views.splice(h,1);return void 0===n?(this.$controller.lifecycle.unbound.end(e),rr.done):new vr(n,this.$controller.lifecycle.unbound.end,this.$controller.lifecycle.unbound,e)}createAndBindAllViews(t){let e,s,i,n=void 0;const r=this.$controller,o=r.lifecycle,a=r.scope;o.bound.begin();const c=r.part,h=this.factory,l=this.local,u=this.items,d=this.forOf.count(t,u),p=this.views=Array(d);return this.forOf.iterate(t,u,(o,u,f)=>{(s=p[u]=h.create(t)).parent=r,xr((i=ye.fromParent(t,a,be.create(t,l,f))).overrideContext,u,d),(e=s.bind(t,i,c)).done||(void 0===n&&(n=[]),n.push(e))}),void 0===n?(o.bound.end(t),rr.done):new vr(n,o.bound.end,o.bound,t)}createAndBindNewViewsByKey(t,e){let s,i,n,r=void 0;const o=this.factory,a=this.views,c=this.local,h=this.normalizedItems,l=this.$controller,u=l.lifecycle,d=l.scope;u.bound.begin();const p=l.part,f=t.length;for(let u=0;u<f;++u)-2===t[u]&&((i=o.create(e)).parent=l,xr((n=ye.fromParent(e,d,be.create(e,c,h[u]))).overrideContext,u,f),s=i.bind(e,n,p),a.splice(u,0,i),s.done||(void 0===r&&(r=[]),r.push(s)));if(a.length!==f)throw new Error(`viewsLen=${a.length}, mapLen=${f}`);return void 0===r?(u.bound.end(e),rr.done):new vr(r,u.bound.end,u.bound,e)}attachViews(t,e){let s;const i=this.views,n=this.location,r=this.$controller.lifecycle;if(r.attached.begin(),void 0===t)for(let t=0,r=i.length;t<r;++t)(s=i[t]).hold(n,1),s.nodes.unlink(),s.attach(e);else for(let r=0,o=i.length;r<o;++r)t[r]!==r&&((s=i[r]).hold(n,1),s.nodes.unlink(),s.attach(e));r.attached.end(e)}attachViewsKeyed(t){let e;const{views:s,location:i}=this;this.$controller.lifecycle.attached.begin();for(let n=0,r=s.length;n<r;++n)(e=s[n]).hold(i,1),e.nodes.unlink(),e.attach(t);this.$controller.lifecycle.attached.end(t)}sortViewsByKey(t,e,s){const i=this.location,n=this.views,r=e.length;!function(t,e){const s=t.slice(),i=e.length;let n=0,r=0;for(;n<i;)-2!==(r=e[n])&&(t[n]=s[r]),++n}(n,e);const o=function(t){const e=t.length;e>Sr&&(Sr=e,kr=new Int32Array(e),Cr=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,c=0,h=0;for(;r<e;r++)if(-2!==(i=t[r])){if(o=kr[s],-2!==(n=t[o])&&n<i){Cr[r]=o,kr[++s]=r;continue}for(a=0,c=s;a<c;)-2!==(n=t[kr[h=a+c>>1]])&&n<i?a=h+1:c=h;n=t[kr[a]],(i<n||-2===n)&&(a>0&&(Cr[r]=kr[a-1]),kr[a]=r)}r=++s;const l=new Int32Array(r);i=kr[s-1];for(;s-- >0;)l[s]=i,i=Cr[i];for(;r-- >0;)kr[r]=0;return l}(e),a=o.length;let c;this.$controller.lifecycle.attached.begin(),s|=33554432;let h,l=a-1,u=r-1;for(;u>=0;--u)h=n[u],-2===e[u]?(xr(h.scope.overrideContext,u,r),h.hold(i,1),h.attach(s)):l<0||1===a||u!==o[l]?(xr(h.scope.overrideContext,u,r),h.attach(s)):(t!==r&&xr(h.scope.overrideContext,u,r),--l),void 0!==(c=n[u+1])?h.nodes.link(c.nodes):h.nodes.link(i);this.$controller.lifecycle.attached.end(s)}};$t([Mn],Tr.prototype,"items",void 0),Tr=$t([Kn("repeat"),Vt(0,Gn),Vt(1,bs),Vt(2,ws)],Tr);let Sr=0;function xr(t,e,s){const i=0===e,n=e===s-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=n,t.$middle=!i&&!n,t.$even=r,t.$odd=!r,t.$length=s}let Ar=class{constructor(t,e){this.factory=t,this.location=e,this.id=J("au$component"),this.view=this.factory.create(),this.view.hold(e,1)}binding(t){return this.view.parent=this.$controller,this.view.bind(67108864|t,this.$controller.scope,this.factory.name)}attaching(t){this.view.attach(t)}detaching(t){this.view.detach(t)}unbinding(t){const e=this.view.unbind(t);return this.view.parent=void 0,e}};Ar=$t([Kn("replaceable"),Vt(0,ws),Vt(1,Gn)],Ar);let $r=class{constructor(t,e){this.factory=t,this.location=e,this.id=J("au$component"),this.id=J("au$component"),this.view=this.factory.create(),this.view.hold(e,1)}valueChanged(t,e,s){(5&this.$controller.state)>0&&this.bindChild(4096)}binding(t){this.view.parent=this.$controller,this.bindChild(t)}attaching(t){this.view.attach(t)}detaching(t){this.view.detach(t)}unbinding(t){this.view.unbind(t),this.view.parent=void 0}bindChild(t){const e=ye.fromParent(t,this.$controller.scope,void 0===this.value?{}:this.value);this.view.bind(t,e,this.$controller.part)}};function Vr(t){return t.startsWith(Or.name)}$t([Mn],$r.prototype,"value",void 0),$r=$t([Kn("with"),Vt(0,ws),Vt(1,Gn)],$r);const Or={name:j.annotation.keyFor("children-observer"),keyFrom:t=>`${Or.name}:${t}`,from(...t){const e={},s=Array.isArray;function i(t){e[t]=Er.create(t)}return t.forEach((function(t){s(t)?t.forEach(i):t instanceof Er?e[t.property]=t:void 0!==t&&Object.keys(t).forEach(s=>(function(t,s){e[t]=Er.create(t,s)})(s,t))})),e},getAll(t){const e=Or.name.length+1,s=[],i=nt(t);let n,r,o,a=i.length,c=0;for(;--a>=0;){o=i[a],r=(n=j.annotation.getKeys(o).filter(Vr)).length;for(let t=0;t<r;++t)s[c++]=C.getOwn(Or.name,o,n[t].slice(e))}return s}};class Er{constructor(t,e,s,i,n,r){this.callback=t,this.property=e,this.options=s,this.query=i,this.filter=n,this.map=r}static create(t,e={}){return new Er(it(e.callback,`${t}Changed`),it(e.property,t),e.options,e.query,e.filter,e.map)}}function Ir(t){return function(e){return Rr.define(t,e)}}class Pr{constructor(t,e,s,i,n,r,o,a,c,h,l,u,d,p,f,g,v,m,b){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.cache=n,this.template=r,this.instructions=o,this.dependencies=a,this.needsCompile=c,this.surrogates=h,this.bindables=l,this.childrenObservers=u,this.containerless=d,this.isStrictBinding=p,this.shadowOptions=f,this.hasSlots=g,this.strategy=v,this.hooks=m,this.scopeParts=b}static create(t,e=null){if(null===e){const s=t;if("string"==typeof s)throw new Error(`Cannot create a custom element definition with only a name and no type: ${t}`);const i=_("name",s,Rr.generateName);return e="function"==typeof s.Type?s.Type:Rr.generateType(Q(i)),new Pr(e,i,st(s.aliases),_("key",s,()=>Rr.keyFrom(i)),_("cache",s,()=>0),_("template",s,()=>null),st(s.instructions),st(s.dependencies),_("needsCompile",s,()=>!0),st(s.surrogates),Un.from(s.bindables),Or.from(s.childrenObservers),_("containerless",s,()=>!1),_("isStrictBinding",s,()=>!1),_("shadowOptions",s,()=>null),_("hasSlots",s,()=>!1),_("strategy",s,()=>1),_("hooks",s,()=>xe.none),st(s.scopeParts))}if("string"==typeof t)return new Pr(e,t,st(Rr.getAnnotation(e,"aliases"),e.aliases),Rr.keyFrom(t),M("cache",e,()=>0),M("template",e,()=>null),st(Rr.getAnnotation(e,"instructions"),e.instructions),st(Rr.getAnnotation(e,"dependencies"),e.dependencies),M("needsCompile",e,()=>!0),st(Rr.getAnnotation(e,"surrogates"),e.surrogates),Un.from(...Un.getAll(e),Rr.getAnnotation(e,"bindables"),e.bindables),Or.from(...Or.getAll(e),Rr.getAnnotation(e,"childrenObservers"),e.childrenObservers),M("containerless",e,()=>!1),M("isStrictBinding",e,()=>!1),M("shadowOptions",e,()=>null),M("hasSlots",e,()=>!1),M("strategy",e,()=>1),M("hooks",e,()=>new xe(e.prototype)),st(Rr.getAnnotation(e,"scopeParts"),e.scopeParts));const s=_("name",t,Rr.generateName);return new Pr(e,s,st(Rr.getAnnotation(e,"aliases"),t.aliases,e.aliases),Rr.keyFrom(s),D("cache",t,e,()=>0),D("template",t,e,()=>null),st(Rr.getAnnotation(e,"instructions"),t.instructions,e.instructions),st(Rr.getAnnotation(e,"dependencies"),t.dependencies,e.dependencies),D("needsCompile",t,e,()=>!0),st(Rr.getAnnotation(e,"surrogates"),t.surrogates,e.surrogates),Un.from(...Un.getAll(e),Rr.getAnnotation(e,"bindables"),e.bindables,t.bindables),Or.from(...Or.getAll(e),Rr.getAnnotation(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),D("containerless",t,e,()=>!1),D("isStrictBinding",t,e,()=>!1),D("shadowOptions",t,e,()=>null),D("hasSlots",t,e,()=>!1),D("strategy",t,e,()=>1),M("hooks",e,()=>new xe(e.prototype)),st(Rr.getAnnotation(e,"scopeParts"),t.scopeParts,e.scopeParts))}register(t){const{Type:e,key:s,aliases:i}=this;Ct.transient(s,e).register(t),Ct.alias(s,e).register(t),Ae(i,Rr,s,t)}}const Rr={name:j.resource.keyFor("custom-element"),keyFrom:t=>`${Rr.name}:${t}`,isType:t=>"function"==typeof t&&C.hasOwn(Rr.name,t),behaviorFor:t=>t.$controller,define(t,e){const s=Pr.create(t,e);return C.define(Rr.name,s,s.Type),C.define(Rr.name,s,s),j.resource.appendTo(s.Type,Rr.name),s.Type},getDefinition(t){const e=C.getOwn(Rr.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){C.define(j.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>C.getOwn(j.annotation.keyFor(e),t),generateName:function(){let t=0;return function(){return`unnamed-${++t}`}}(),generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,Reflect.defineProperty(n,"name",t),i!==e&&Object.assign(n.prototype,i),n}}()},Fr=at.createInterface("IProjectorLocator").noDefault(),Nr=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Lr=at.createInterface("ISanitizer").withDefault(t=>t.singleton(class{sanitize(t){return t.replace(Nr,"")}}));let jr=class{constructor(t){this.sanitizer=t}toView(t){return null==t?null:this.sanitizer.sanitize(t)}};jr=$t([Ee("sanitize"),Vt(0,Lr)],jr);class Br{constructor(t,e,s,i){this.dom=t,this.parentContainer=e,this.dependencies=s,this.componentType=i;const n=this.container=e.createChild(),r=this.renderableProvider=new Tt,o=this.elementProvider=new Tt,a=this.instructionProvider=new Tt,c=this.factoryProvider=new Dr,h=this.renderLocationProvider=new Tt;this.renderer=n.get(Kr),t.registerElementResolver(n,o),n.registerResolver(ws,c),n.registerResolver(bs,r),n.registerResolver(Se,a),n.registerResolver(Gn,h),null!=s&&n.register(...s),i&&Rr.getDefinition(i).register(n)}get id(){return this.container.id}get path(){return this.container.path}get parentId(){return this.parentContainer.id}has(t,e){return this.container.has(t,e)}get(t){return this.container.get(t)}getAll(t){return this.container.getAll(t)}register(...t){return this.container.register(...t)}registerResolver(t,e){return this.container.registerResolver(t,e)}registerTransformer(t,e){return this.container.registerTransformer(t,e)}getResolver(t,e){return this.container.getResolver(t,e)}getFactory(t){return this.container.getFactory(t)}createChild(){return this.container.createChild()}render(t,e,s,i,n,r){this.renderer.render(t,this.dom,this,e,s,i,n,r)}beginComponentOperation(t,e,s,i,n,r){return this.renderableProvider.prepare(t),this.elementProvider.prepare(e),this.instructionProvider.prepare(s),i&&this.factoryProvider.prepare(i,n),r&&this.renderLocationProvider.prepare(r),this}dispose(){this.factoryProvider.dispose(),this.renderableProvider.dispose(),this.instructionProvider.dispose(),this.elementProvider.dispose(),this.renderLocationProvider.dispose()}createRuntimeCompilationResources(){return new F(this.container)}}class Dr{prepare(t,e){this.factory=t,t.addParts(e)}resolve(t,e){const s=this.factory;if(null==s)throw r.error(50);if(!s.name||!s.name.length)throw r.error(51);const i=s.parts[s.name];if(i){const s=t.get(Hr),n=t.get(Yn);return s.getViewFactory(n,i,e)}return s}dispose(){this.factory=null}}const Mr=at.createInterface("ITemplateCompiler").noDefault();var _r;!function(t){t[t.none=1]="none",t[t.surrogate=2]="surrogate",t[t.shadowDOM=4]="shadowDOM"}(_r||(_r={}));const Ur=at.createInterface("ITemplateFactory").noDefault();class qr{constructor(t,e,s,i){this.dom=t,this.definition=e,this.factory=s,this.renderContext=i}render(t,e,s,i=0){const n=t instanceof Zr?t:t.$controller;if(null==n)throw new Error("Controller is missing from the view model");const r=n.nodes=this.factory.createNodeSequence();n.context=this.renderContext,n.scopeParts=this.definition.scopeParts,n.isStrictBinding=this.definition.isStrictBinding,i|=this.definition.strategy,this.renderContext.render(i,n,r.findTargets(),this.definition,e,s)}}const zr=at.createInterface("IInstructionRenderer").noDefault(),Kr=at.createInterface("IRenderer").noDefault(),Hr=at.createInterface("IRenderingEngine").withDefault(t=>t.singleton(Wr));let Wr=class{constructor(t,e,s,i){this.container=t,this.templateFactory=e,this.lifecycle=s,this.compiler=i}getElementTemplate(t,e,s,i){if(null!=e)return null==s&&(s=this.container),this.templateFromSource(t,e,s,i)}getViewFactory(t,e,s){if(null==e)throw new Error("No definition provided");let i;e instanceof Pr?i=e:C.hasOwn(Rr.name,e)?i=C.getOwn(Rr.name,e):(i=Pr.create(e),C.define(Rr.name,i,e),C.define(Rr.name,i,i.Type)),null==s&&(s=this.container);const n=Rr.keyFrom(`${s.path}:factory`);let r=C.getOwn(n,i);if(void 0===r){const e=this.templateFromSource(t,i,s,void 0);(r=new so(i.name,e,this.lifecycle)).setCacheSize(i.cache,!0),C.define(n,r,i)}return r}templateFromSource(t,e,s,i){const n=Rr.keyFrom(`${s.path}:template`);let r=C.getOwn(n,e);return void 0===r&&(r=this.templateFromSourceCore(t,e,s,i),C.define(n,r,e)),r}templateFromSourceCore(t,e,s,i){const n=new Br(t,s,e.dependencies,i);if(null!=e.template&&e.needsCompile){const i=Rr.keyFrom(`${s.path}:compiled-definition`);let r=C.getOwn(i,e);return void 0===r&&(r=this.compiler.compile(t,e,n.createRuntimeCompilationResources(),_r.surrogate),C.define(i,r,e)),this.templateFactory.create(n,r)}return this.templateFactory.create(n,e)}};Wr=$t([Vt(0,ct),Vt(1,Ur),Vt(2,ks),Vt(3,Mr)],Wr);let Qr=class{constructor(t,e,s,i,n,r=Gr,o=Yr,a=Jr,c){this.controller=t,this.obj=e,this.propertyKey=i,this.query=r,this.filter=o,this.map=a,this.options=c,this.observing=!1,this.children=void 0,this.callback=e[n],this.persistentFlags=2080374799&s,this.createGetterSetter()}getValue(){return this.tryStartObserving(),this.children}setValue(t){}subscribe(t){this.tryStartObserving(),this.addSubscriber(t)}tryStartObserving(){if(!this.observing){this.observing=!0;const t=this.controller.projector;this.children=Xr(t,this.query,this.filter,this.map),t.subscribeToChildrenChange(()=>{this.onChildrenChanged()},this.options)}}onChildrenChanged(){this.children=Xr(this.controller.projector,this.query,this.filter,this.map),void 0!==this.callback&&this.callback.call(this.obj),this.callSubscribers(this.children,void 0,16|this.persistentFlags)}createGetterSetter(){Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})||r.write(1,this.propertyKey,this.obj)}};function Gr(t){return t.children}function Yr(t,e,s){return!!s}function Jr(t,e,s){return s}function Xr(t,e,s,i){const n=e(t),r=[];for(let t=0,e=n.length;t<e;++t){const e=n[t],o=Rr.behaviorFor(e),a=o?o.viewModel:null;s(e,o,a)&&r.push(i(e,o,a))}return r}Qr=$t([Ht()],Qr);class Zr{constructor(t,e,s,i,r,o,a,c){switch(this.vmKind=t,this.flags=e,this.viewCache=s,this.lifecycle=i,this.viewModel=r,this.parentContext=o,this.host=a,this.id=J("au$component"),this.nextBound=void 0,this.nextUnbound=void 0,this.prevBound=void 0,this.prevUnbound=void 0,this.nextAttached=void 0,this.nextDetached=void 0,this.prevAttached=void 0,this.prevDetached=void 0,this.nextMount=void 0,this.nextUnmount=void 0,this.prevMount=void 0,this.prevUnmount=void 0,this.parent=void 0,this.bindings=void 0,this.controllers=void 0,this.state=0,this.mountStrategy=1,t){case 2:if(null==s)throw new Error("No IViewCache was provided when rendering a synthetic view.");this.hooks=xe.none,this.bindingContext=void 0,this.host=void 0,this.vmKind=2,this.scopeParts=void 0,this.isStrictBinding=!1,this.scope=void 0,this.projector=void 0,this.nodes=void 0,this.context=void 0,this.location=void 0;break;case 0:{if(null==o)throw new Error("No parentContext was provided when rendering a custom element.");if(null==r)throw new Error("No viewModel was provided when rendering a custom elemen.");if(null==a)throw new Error("No host element was provided when rendering a custom element.");const t=r.constructor,s=Rr.getDefinition(t);to(this,s,e|=s.strategy,r),this.hooks=s.hooks,this.bindingContext=eo(e,r);const i=o.get(Hr);let h,l,u=void 0;if(this.hooks.hasRender){const s=this.bindingContext.render(e,a,null==c.parts?n.a.emptyObject:c.parts,o);null!=s&&"getElementTemplate"in s&&(u=s.getElementTemplate(i,t,o))}else u=i.getElementTemplate(o.get(Yn),s,o,t);void 0!==u&&(null==u.definition||0===u.definition.instructions.length||0===u.definition.instructions[0].length||null==u.definition.instructions[0][0].parts?l=null==c.parts?n.a.emptyObject:c.parts:(h=u.definition.instructions[0][0],l=null==c.parts?h.parts:{...c.parts,...h.parts}),u.render(this,a,l)),this.scope=ye.create(e,this.bindingContext,null),this.projector=o.get(Fr).getElementProjector(o.get(Yn),this,a,void 0!==u?u.definition:s),this.location=void 0,r.$controller=this,this.hooks.hasCreated&&this.bindingContext.created(e);break}case 1:{if(null==o)throw new Error("No parentContext was provided when rendering a custom element or attribute.");if(null==r)throw new Error("No viewModel was provided when rendering a custom elemen.");const t=r.constructor,s=Wn.getDefinition(t);to(this,s,e|=s.strategy,r),this.hooks=s.hooks,this.bindingContext=eo(e,r),this.scope=void 0,this.projector=void 0,this.nodes=void 0,this.context=void 0,this.location=void 0,r.$controller=this,this.hooks.hasCreated&&this.bindingContext.created(e);break}default:throw new Error(`Invalid ViewModelKind: ${t}`)}}static forCustomElement(t,e,s,i=0,r=n.a.emptyObject){let o=Zr.lookup.get(t);return void 0===o&&(o=new Zr(0,i,void 0,e.get(ks),t,e,s,r),this.lookup.set(t,o)),o}static forCustomAttribute(t,e,s=0){let i=Zr.lookup.get(t);return void 0===i&&(i=new Zr(1,4|s,void 0,e.get(ks),t,e,void 0,n.a.emptyObject),this.lookup.set(t,i)),i}static forSyntheticView(t,e,s=0){return new Zr(2,s,t,e,void 0,void 0,void 0,n.a.emptyObject)}lockScope(t){this.scope=t,this.state|=16384}hold(t,e){this.state=32768^(32768|this.state),this.location=t,this.mountStrategy=e}release(t){return this.state|=32768,(32&this.state)>0?this.viewCache.canReturnToCache(this):this.unmountSynthetic(t)}bind(t,e,s){switch(this.part=s,t|=4096,this.vmKind){case 0:return this.bindCustomElement(t,e);case 1:return this.bindCustomAttribute(t,e);case 2:return this.bindSynthetic(t,e)}}unbind(t){switch(t|=8192,this.vmKind){case 0:return this.unbindCustomElement(t);case 1:return this.unbindCustomAttribute(t);case 2:return this.unbindSynthetic(t)}}bound(t){this.bindingContext.bound(t)}unbound(t){this.bindingContext.unbound(t)}attach(t){if(!((40&this.state)>0&&0==(33554432&t)))switch(t|=16384,this.vmKind){case 0:this.attachCustomElement(t);break;case 1:this.attachCustomAttribute(t);break;case 2:this.attachSynthetic(t)}}detach(t){if(0!=(40&this.state))switch(t|=32768,this.vmKind){case 0:this.detachCustomElement(t);break;case 1:this.detachCustomAttribute(t);break;case 2:this.detachSynthetic(t)}}attached(t){this.bindingContext.attached(t)}detached(t){this.bindingContext.detached(t)}mount(t){switch(this.vmKind){case 0:this.mountCustomElement(t);break;case 2:this.mountSynthetic(t)}}unmount(t){switch(this.vmKind){case 0:this.unmountCustomElement(t);break;case 2:this.unmountSynthetic(t)}}cache(t){switch(this.vmKind){case 0:this.cacheCustomElement(t);break;case 1:this.cacheCustomAttribute(t);break;case 2:this.cacheSynthetic(t)}}getTargetAccessor(t){const{bindings:e}=this;if(void 0!==e){const s=e.find(e=>e.targetProperty===t);if(void 0!==s)return s.targetObserver}}bindCustomElement(t,e){const s=this.scope;if(s.parentScope=void 0===e?null:e,s.scopeParts=this.scopeParts,(4&this.state)>0)return rr.done;if(t|=4096,this.state|=1,this.lifecycle.bound.begin(),this.bindBindings(t,s),this.hooks.hasBinding){const e=this.bindingContext.binding(t);if(br(e))return new fr(e,this.bindControllers,this,t,s)}return this.bindControllers(t,s)}bindCustomAttribute(t,e){if((4&this.state)>0){if(this.scope===e)return rr.done;t|=4096;const s=this.unbind(t);if(!s.done)return new fr(s,this.bind,this,t,e)}else t|=4096;if(this.state|=1,this.scope=e,this.lifecycle.bound.begin(),this.hooks.hasBinding){const e=this.bindingContext.binding(t);if(br(e))return new fr(e,this.endBind,this,t)}return this.endBind(t),rr.done}bindSynthetic(t,e){if(null==e)throw new Error("Scope is null or undefined");if(e.scopeParts=tt(e.scopeParts,this.scopeParts,!1),(4&this.state)>0){if(this.scope===e||(16384&this.state)>0)return rr.done;t|=4096;const s=this.unbind(t);if(!s.done)return new fr(s,this.bind,this,t,e)}else t|=4096;return 0==(16384&this.state)&&(this.scope=e),this.state|=1,this.lifecycle.bound.begin(),this.bindBindings(t,e),this.bindControllers(t,e)}bindBindings(t,e){const{bindings:s}=this;if(void 0!==s){const{length:i}=s;this.isStrictBinding&&(t|=4);for(let n=0;n<i;++n)s[n].$bind(t,e,this.part)}}bindControllers(t,e){let s,i=void 0;const{controllers:n}=this;if(void 0!==n){const{length:r}=n;for(let o=0;o<r;++o)n[o].parent=this,(s=n[o].bind(t,e,this.part)).done||(void 0===i&&(i=[]),i.push(s))}return void 0===i?(this.endBind(t),rr.done):new vr(i,this.endBind,this,t)}endBind(t){this.hooks.hasBound&&this.lifecycle.bound.add(this),this.state=1^this.state|4,this.lifecycle.bound.end(t)}unbindCustomElement(t){if(0==(4&this.state))return rr.done;if(this.scope.parentScope=null,this.state|=2,t|=8192,this.lifecycle.unbound.begin(),this.hooks.hasUnbinding){const e=this.bindingContext.unbinding(t);if(br(e))return new fr(e,this.unbindControllers,this,t)}return this.unbindControllers(t)}unbindCustomAttribute(t){if(0==(4&this.state))return rr.done;if(this.state|=2,t|=8192,this.lifecycle.unbound.begin(),this.hooks.hasUnbinding){const e=this.bindingContext.unbinding(t);if(br(e))return new fr(e,this.endUnbind,this,t)}return this.endUnbind(t),rr.done}unbindSynthetic(t){return 0==(4&this.state)?rr.done:(this.state|=2,t|=8192,this.lifecycle.unbound.begin(),this.unbindControllers(t))}unbindBindings(t){const{bindings:e}=this;if(void 0!==e)for(let s=e.length-1;s>=0;--s)e[s].$unbind(t);this.endUnbind(t)}unbindControllers(t){let e,s=void 0;const{controllers:i}=this;if(void 0!==i)for(let n=i.length-1;n>=0;--n)e=i[n].unbind(t),i[n].parent=void 0,e.done||(void 0===s&&(s=[]),s.push(e));return void 0===s?(this.unbindBindings(t),rr.done):new vr(s,this.unbindBindings,this,t)}endUnbind(t){switch(this.vmKind){case 1:this.scope=void 0;break;case 2:0==(16384&this.state)&&(this.scope=void 0)}this.hooks.hasUnbound&&this.lifecycle.unbound.add(this),this.state=6^(6|this.state),this.lifecycle.unbound.end(t)}attachCustomElement(t){t|=16384,this.state|=8,this.lifecycle.mount.add(this),this.lifecycle.attached.begin(),this.hooks.hasAttaching&&this.bindingContext.attaching(t),this.attachControllers(t),this.hooks.hasAttached&&this.lifecycle.attached.add(this),this.state=8^this.state|32,this.lifecycle.attached.end(t)}attachCustomAttribute(t){t|=16384,this.state|=8,this.lifecycle.attached.begin(),this.hooks.hasAttaching&&this.bindingContext.attaching(t),this.hooks.hasAttached&&this.lifecycle.attached.add(this),this.state=8^this.state|32,this.lifecycle.attached.end(t)}attachSynthetic(t){((32&this.state)>0&&33554432&t)>0?this.lifecycle.mount.add(this):(t|=16384,this.state|=8,this.lifecycle.mount.add(this),this.lifecycle.attached.begin(),this.attachControllers(t),this.state=8^this.state|32,this.lifecycle.attached.end(t))}detachCustomElement(t){t|=32768,this.state|=16,this.lifecycle.detached.begin(),this.lifecycle.unmount.add(this),this.hooks.hasDetaching&&this.bindingContext.detaching(t),this.detachControllers(t),this.hooks.hasDetached&&this.lifecycle.detached.add(this),this.state=48^(48|this.state),this.lifecycle.detached.end(t)}detachCustomAttribute(t){t|=32768,this.state|=16,this.lifecycle.detached.begin(),this.hooks.hasDetaching&&this.bindingContext.detaching(t),this.hooks.hasDetached&&this.lifecycle.detached.add(this),this.state=48^(48|this.state),this.lifecycle.detached.end(t)}detachSynthetic(t){t|=32768,this.state|=16,this.lifecycle.detached.begin(),this.lifecycle.unmount.add(this),this.detachControllers(t),this.state=48^(48|this.state),this.lifecycle.detached.end(t)}attachControllers(t){const{controllers:e}=this;if(void 0!==e){const{length:s}=e;for(let i=0;i<s;++i)e[i].attach(t)}}detachControllers(t){const{controllers:e}=this;if(void 0!==e)for(let s=e.length-1;s>=0;--s)e[s].detach(t)}mountCustomElement(t){(64&this.state)>0||(this.state|=64,this.projector.project(this.nodes))}mountSynthetic(t){const e=this.nodes,s=this.location;switch(this.state|=64,this.mountStrategy){case 2:e.appendTo(s);break;default:e.insertBefore(s)}}unmountCustomElement(t){0!=(64&this.state)&&(this.state=64^(64|this.state),this.projector.take(this.nodes))}unmountSynthetic(t){return 0!=(64&this.state)&&(this.state=64^(64|this.state),this.nodes.remove(),this.nodes.unlink(),!!((32768&this.state)>0&&(this.state=32768^(32768|this.state),this.viewCache.tryReturnToCache(this)))&&(this.state|=128,!0))}cacheCustomElement(t){t|=65536,this.hooks.hasCaching&&this.bindingContext.caching(t)}cacheCustomAttribute(t){t|=65536,this.hooks.hasCaching&&this.bindingContext.caching(t);const{controllers:e}=this;if(void 0!==e){const{length:s}=e;for(let i=s-1;i>=0;--i)e[i].cache(t)}}cacheSynthetic(t){const{controllers:e}=this;if(void 0!==e){const{length:s}=e;for(let i=s-1;i>=0;--i)e[i].cache(t)}}}function to(t,e,s,i){const n=null!=i.$observers?i.$observers:{},r=e.bindables,o=Object.getOwnPropertyNames(r),a=(2&s)>0,c=t.lifecycle,h="childrenObservers"in e,l=o.length;let u;for(let t=0;t<l;++t)null==n[u=o[t]]&&(n[u]=new $n(c,s,a?pe.getOrCreate(i).proxy:i,u,r[u].callback));if(h){const r=e.childrenObservers;if(r){const e=Object.getOwnPropertyNames(r),{length:o}=e;let a;for(let c=0;c<o;++c)if(null==n[a=e[c]]){const e=r[a];n[a]=new Qr(t,i,s,a,e.callback,e.query,e.filter,e.map,e.options)}}}a&&!h||Reflect.defineProperty(i,"$observers",{enumerable:!1,value:n})}function eo(t,e){return!0===e.noProxy||0==(2&t)?e:pe.getOrCreate(e).proxy}Zr.lookup=new WeakMap;class so{constructor(t,e,s){this.name=t,this.template=e,this.lifecycle=s,this.isCaching=!1,this.parts=n.a.emptyObject,this.cache=null,this.cacheSize=-1}get parentContextId(){return this.template.renderContext.parentId}setCacheSize(t,e){t&&("*"===t?t=so.maxCacheSize:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(t.cache(0),this.cache.push(t),!0)}create(t){const e=this.cache;let s;if(null!=e&&e.length>0)return(s=e.pop()).state=128^(128|s.state),s;if(s=Zr.forSyntheticView(this,this.lifecycle,t),this.template.render(s,null,this.parts,t),!s.nodes)throw r.error(90);return s}addParts(t){Object.keys(t).length>0&&(this.parts={...this.parts,...t})}}so.maxCacheSize=65535;const io=new WeakSet;function no(t){return!io.has(t)}function ro(t){return io.add(t),Pr.create(t)}const oo={name:j.resource.keyFor("views"),has:t=>"function"==typeof t&&(C.hasOwn(oo.name,t)||"$views"in t),get(t){if("function"==typeof t&&"$views"in t){const e=t.$views.filter(no).map(ro);for(const s of e)oo.add(t,s)}let e=C.getOwn(oo.name,t);return void 0===e&&C.define(oo.name,e=[],t),e},add(t,e){const s=Pr.create(e);let i=C.getOwn(oo.name,t);return void 0===i?C.define(oo.name,i=[s],t):i.push(s),i}};const ao=at.createInterface("IViewLocator").noDefault(),co=["binding","bound","attaching","attached","detaching","caching","detached","unbinding","unbound"];let ho=class{constructor(t){this.viewLocator=t}toView(t,e){return this.viewLocator.getViewComponentForObject(t,e)}};ho=$t([Ee("view"),Vt(0,ao)],ho);const lo=at.createInterface("IActivator").withDefault(t=>t.singleton(uo));class uo{constructor(t){this.taskManager=t}static register(t){return Ct.singleton(lo,this).register(t)}activate(t,e,s,i=1024,n){i=void 0===i?0:i;const r=this.taskManager;let o=r.runBeforeRender();return o.done?this.render(t,e,s,i):o=new fr(o,this.render,this,t,e,s,i),(o=(o=(o=o.done?r.runBeforeBind():new fr(o,r.runBeforeBind,r)).done?this.bind(e,i,n):new fr(o,this.bind,this,e,i,n)).done?r.runBeforeAttach():new fr(o,r.runBeforeAttach,r)).done?this.attach(e,i):o=new fr(o,this.attach,this,e,i),o}deactivate(t,e=2048){const s=this.getController(t);return s.detach(32768|e),s.unbind(8192|e)}render(t,e,s,i){Zr.forCustomElement(e,s,t,i)}bind(t,e,s){return this.getController(t).bind(4096|e,s)}attach(t,e){this.getController(t).attach(16384|e)}getController(t){return Zr.forCustomElement(t,void 0,void 0)}}uo.inject=[lr];class po{constructor(t,e){if(this.config=t,null!=t.host)e.has(Qn,!1)?this.container=e.createChild():this.container=e,Ct.instance(Qn,t.host).register(this.container),this.host=t.host;else{if(!e.has(Qn,!0))throw new Error("No host element found.");this.container=e,this.host=e.get(Qn)}this.strategy=null!=t.strategy?t.strategy:1;const s=this.container.get(go);this.dom=s.initialize(t),this.lifecycle=this.container.get(ks),this.activator=this.container.get(lo);const i=this.container.get(lr).runBeforeCreate();i.done?(this.task=rr.done,this.create()):this.task=new fr(i,this.create,this)}activate(t){const{task:e,host:s,viewModel:i,container:n,activator:r,strategy:o}=this,a=1024|o;if(void 0===i)return void 0===this.createTask&&(this.createTask=new fr(e,this.activate,this,t)),this.createTask;if(e.done)null==t||t.done?this.task=r.activate(s,i,n,a,void 0):this.task=new fr(t,r.activate,r,s,i,n,a,void 0);else if(null==t||t.done)this.task=new fr(e,r.activate,r,s,i,n,a,void 0);else{const o=new fr(e,t.wait,t);this.task=new fr(o,r.activate,r,s,i,n,a,void 0)}return this.task}deactivate(t){const{task:e,viewModel:s,activator:i,strategy:n}=this,r=2048|n;if(void 0===s)return void 0===this.createTask&&(this.createTask=new fr(e,this.deactivate,this,t)),this.createTask;if(e.done)null==t||t.done?this.task=i.deactivate(s,r):this.task=new fr(t,i.deactivate,i,s,r);else if(null==t||t.done)this.task=new fr(e,i.deactivate,i,s,r);else{const n=new fr(e,t.wait,t);this.task=new fr(n,i.deactivate,i,s,r)}return this.task}create(){const t=this.config;this.viewModel=Rr.isType(t.component)?this.container.get(t.component):t.component,this.controller=Zr.forCustomElement(this.viewModel,this.container,this.host,this.strategy)}}class fo{constructor(t=at.createContainer()){this.container=t,this.task=rr.done,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,Ct.instance(fo,this).register(t)}get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(null==this._root){if(null==this.next)throw new Error("root is not defined");return this.next}return this._root}register(...t){return this.container.register(...t),this}app(t){return this.next=new po(t,this.container),this.isRunning&&this.start(),this}start(t=this.next){if(null==t)throw new Error("There is no composition root");return this.stop(t),this.task.done?this.onBeforeStart(t):this.task=new fr(this.task,this.onBeforeStart,this,t),this.task=this.root.activate(this.task),this.task.done?this.task=this.onAfterStart(t):this.task=new fr(this.task,this.onAfterStart,this,t),this.task}stop(t=this._root){return this._isRunning&&null!=t&&(this.task.done?this.onBeforeStop(t):this.task=new fr(this.task,this.onBeforeStop,this,t),this.task=t.deactivate(this.task),this.task.done?this.task=this.onAfterStop(t):this.task=new fr(this.task,this.onAfterStop,this,t)),this.task}wait(){return this.task.wait()}onBeforeStart(t){Reflect.set(t.host,"$aurelia",this),this._root=t,this._isStarting=!0}onAfterStart(t){return this._isRunning=!0,this._isStarting=!1,this.dispatchEvent(t,"aurelia-composed",t.dom),this.dispatchEvent(t,"au-started",t.host),rr.done}onBeforeStop(t){this._isRunning=!1,this._isStopping=!0}onAfterStop(t){return Reflect.deleteProperty(t.host,"$aurelia"),this._root=void 0,this._isStopping=!1,this.dispatchEvent(t,"au-stopped",t.host),rr.done}dispatchEvent(t,e,s){(s="dispatchEvent"in s?s:t.dom).dispatchEvent(t.dom.createCustomEvent(e,{detail:this,bubbles:!0,cancelable:!0}))}}n.a.global.Aurelia=fo;const go=at.createInterface("IDOMInitializer").noDefault();function vo(t){return function(e){const s=function(...s){const i=new e(...s);return i.instructionType=t,i};s.register=function(t){Ct.singleton(zr,s).register(t)};const i=C.getOwnKeys(e);for(const t of i)C.define(t,C.getOwn(t,e),s);const n=Object.getOwnPropertyDescriptors(e);return Object.keys(n).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,n[t])}),s}}let mo=class{constructor(t){const e=this.instructionRenderers={};t.forEach(t=>{e[t.instructionType]=t.render.bind(t)})}static register(t){return Ct.singleton(Kr,this).register(t)}render(t,e,s,i,n,o,a,c){const h=o.instructions,l=this.instructionRenderers;if(n.length!==h.length)throw n.length>h.length?r.error(30):r.error(31);let u,d,p;for(let r=0,o=n.length;r<o;++r){u=h[r],d=n[r];for(let n=0,r=u.length;n<r;++n)l[(p=u[n]).type](t,e,s,i,d,p,c)}if(a){const n=o.surrogates;for(let r=0,o=n.length;r<o;++r)l[(p=n[r]).type](t,e,s,i,a,p,c)}}};function bo(t,e,s){return"string"==typeof e?t.parse(e,s):e}function yo(t,e){null==t.bindings?t.bindings=[e]:t.bindings.push(e)}function wo(t,e){null==t.controllers?t.controllers=[e]:t.controllers.push(e)}function ko(t){return void 0!==t.bindingContext?t.bindingContext:t}function Co(t,e,s){let i=e.$au;void 0===i&&(i=e.$au=new To),i[s]=t}mo=$t([Vt(0,dt(zr))],mo);class To{}let So=class{render(t,e,s,i,n,r){const o=ko(n);void 0!==o.$observers&&void 0!==o.$observers[r.to]?o.$observers[r.to].setValue(r.value,4096):o[r.to]=r.value}};So=$t([vo("re")],So);let xo=class{render(t,e,s,i,n,r){const o=s.beginComponentOperation(i,n,r,null,null,n,!0),a=s.get(Rr.keyFrom(r.res)),c=s.get(Kr).instructionRenderers,h=r.instructions,l=Zr.forCustomElement(a,s,n,t,r);let u;Co(l,l.host,r.res);for(let n=0,r=h.length;n<r;++n)c[(u=h[n]).type](t,e,s,i,l,u);wo(i,l),o.dispose()}};xo=$t([vo("ra")],xo);let Ao=class{render(t,e,s,i,n,r){const o=s.beginComponentOperation(i,n,r),a=s.get(Wn.keyFrom(r.res)),c=s.get(Kr).instructionRenderers,h=r.instructions,l=Zr.forCustomAttribute(a,s,t);let u;Co(l,n,r.res);for(let n=0,r=h.length;n<r;++n)c[(u=h[n]).type](t,e,s,i,l,u);wo(i,l),o.dispose()}};Ao=$t([vo("rb")],Ao);let $o=class{constructor(t,e){this.renderingEngine=t,this.observerLocator=e}render(t,e,s,i,n,r,o){const a=this.renderingEngine.getViewFactory(e,r.def,s),c=e.convertToRenderLocation(n),h=s.beginComponentOperation(i,n,r,a,o,c,!1),l=s.get(Wn.keyFrom(r.res)),u=s.get(Kr).instructionRenderers,d=r.instructions;void 0!==r.parts&&(o=void 0===o?r.parts:{...o,...r.parts});const p=Zr.forCustomAttribute(l,s,t);if(r.link){const t=i.controllers;l.link(t[t.length-1])}let f;Co(p,c,r.res);for(let n=0,r=d.length;n<r;++n)u[(f=d[n]).type](t,e,s,i,p,f);wo(i,p),h.dispose()}};$o=$t([vo("rc"),Vt(0,Hr),Vt(1,Tn)],$o);let Vo=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,n,r){e.remove(n);const o=r.instructions,a=r.toBindingContext;let c,h,l;for(let t=0,e=o.length;t<e;++t)c=o[t],h=bo(this.parser,c.from,48),yo(i,l=new Zs(h,c.to,this.observerLocator,s,a))}};Vo=$t([vo("rd"),Vt(0,Hs),Vt(1,Tn)],Vo);let Oo=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,n,r){const o=bo(this.parser,r.from,153);yo(i,new Ks(o,ko(n),r.to,this.observerLocator,s))}};Oo=$t([vo("rh"),Vt(0,Hs),Vt(1,Tn)],Oo);let Eo=class{constructor(t){this.parser=t}render(t,e,s,i,n,r){const o=bo(this.parser,r.from,5376);yo(i,new ti(o,function(t,e){if("element"===e)return t;const s=t.$au;if(void 0===s)throw new Error(`No Aurelia APIs are defined for the element: "${t.tagName}".`);let i;switch(e){case"controller":return t.$controller;case"view":throw new Error("Not supported API");case"view-model":return t.$controller.viewModel;default:if(void 0===(i=s[e]))throw new Error(`Attempted to reference "${e}", but it was not found amongst the target's API.`);return i.viewModel}}(n,r.to),s))}};Eo=$t([vo("rj"),Vt(0,Hs)],Eo);let Io=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,n,r){let o;const a=bo(this.parser,r.from,2048);yo(i,o=a.isMulti?new Js(this.observerLocator,a,ko(n),r.to,us.toView,s):new Xs(a.firstExpression,a,ko(n),r.to,us.toView,this.observerLocator,s,!0))}};Io=$t([vo("rf"),Vt(0,Hs),Vt(1,Tn)],Io);let Po=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,n,r){const o=bo(this.parser,r.from,48|r.mode);yo(i,new zs(o,ko(n),r.to,r.mode,this.observerLocator,s))}};Po=$t([vo("rg"),Vt(0,Hs),Vt(1,Tn)],Po);let Ro=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,n,r){const o=bo(this.parser,r.from,539);yo(i,new zs(o,ko(n),r.to,us.toView,this.observerLocator,s))}};Ro=$t([vo("rk"),Vt(0,Hs),Vt(1,Tn)],Ro);const Fo=[An,Os,mo,ur,class{constructor(){this.modelInstanceToBoundComponent=new WeakMap,this.modelTypeToUnboundComponent=new Map}static register(t){return Ct.singleton(ao,this).register(t)}getViewComponentForObject(t,e){if(t){const s=oo.has(t.constructor)?oo.get(t.constructor):[],i="function"==typeof e?e(t,s):this.getViewName(s,e);return this.getOrCreateBoundComponent(t,s,i)}return null}getOrCreateBoundComponent(t,e,s){let i,n=this.modelInstanceToBoundComponent.get(t);if(void 0===n?(n={},this.modelInstanceToBoundComponent.set(t,n)):i=n[s],void 0===i){const r=this.getOrCreateUnboundComponent(t,e,s);i=Rr.define(Rr.getDefinition(r),class extends r{constructor(){super(t)}}),n[s]=i}return i}getOrCreateUnboundComponent(t,e,s){let i,n=this.modelTypeToUnboundComponent.get(t.constructor);if(void 0===n?(n={},this.modelTypeToUnboundComponent.set(t.constructor,n)):i=n[s],void 0===i){const r=(i=Rr.define(this.getView(e,s),class{constructor(t){this.viewModel=t}created(t){this.$controller.scope=ye.fromParent(t,this.$controller.scope,this.viewModel),this.viewModel.created&&this.viewModel.created(t)}})).prototype;co.forEach(e=>{if(e in t){const t=function(t){return this.viewModel[e](t)};Reflect.defineProperty(t,"name",{configurable:!0,value:e}),r[e]=t}}),n[s]=i}return i}getViewName(t,e){return e||(1===t.length?t[0].name:"default-view")}getView(t,e){const s=t.find(t=>t.name===e);if(void 0===s)throw new Error(`Could not find view: ${e}`);return s}},rn],No=[ir,sr,nr,yr,wr,Tr,Ar,$r,jr,ho,Nn,On,En,In,Ln,Dn,Pn],Lo=[Po,Ro,Oo,Eo,Io,So,xo,Ao,$o,Vo],jo={register:t=>t.register(...Fo,...No,...Lo),createContainer(){return this.register(at.createContainer())}};class Bo{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class Do{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=us.oneTime,this.oneTime=!0}}class Mo{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=us.toView,this.oneTime=!1}}class _o{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=us.fromView,this.oneTime=!1}}class Uo{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=us.twoWay,this.oneTime=!1}}class qo{constructor(t,e){this.from=t,this.to=e,this.type="rk"}}class zo{constructor(t,e){this.from=t,this.to=e,this.type="rh"}}class Ko{constructor(t,e){this.from=t,this.to=e,this.type="rj",this.type="rj"}}class Ho{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class Wo{constructor(t,e,s){this.res=t,this.instructions=e,this.parts=s,this.type="ra"}}class Qo{constructor(t,e){this.res=t,this.instructions=e,this.type="rb"}}class Go{constructor(t,e,s,i,n){this.def=t,this.res=e,this.instructions=s,this.link=i,this.parts=n,this.type="rc"}}class Yo{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class Jo{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class Xo{constructor(t,e,s,i){this.rawName=t,this.rawValue=e,this.target=s,this.command=i}}class Zo{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.hasOfNoneInverse;break;case 1:this.has=this.hasOfSingleInverse;break;default:this.has=this.hasOfMultipleInverse}else switch(t.length){case 0:this.has=this.hasOfNone;break;case 1:this.has=this.hasOfSingle;break;default:this.has=this.hasOfMultiple}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}hasOfMultiple(t){return this.chars.includes(t)}hasOfSingle(t){return this.chars===t}hasOfNone(t){return!1}hasOfMultipleInverse(t){return!this.chars.includes(t)}hasOfSingleInverse(t){return this.chars!==t}hasOfNoneInverse(t){return!0}}class ta{constructor(){this.parts=n.a.emptyArray,this._pattern="",this.currentRecord={},this.partsRecord={}}get pattern(){const t=this._pattern;return""===t?null:t}set pattern(t){null==t?(this._pattern="",this.parts=n.a.emptyArray):(this._pattern=t,this.parts=this.partsRecord[t])}append(t,e){const{currentRecord:s}=this;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const{currentRecord:e}=this;if(void 0!==e[t]){const{partsRecord:s}=this;void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0}}}class ea{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,s=e.length;let i=null;for(let n=0;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const{patterns:s}=this;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new ea(t,e),this.nextStates.push(i),t.repeat&&i.nextStates.push(i)),i}findMatches(t,e){const s=[],i=this.nextStates,n=i.length;let r=0,o=null,a=0,c=0;for(;a<n;++a)if((o=i[a]).charSpec.has(t))if(s.push(o),r=o.patterns.length,c=0,o.charSpec.isSymbol)for(;c<r;++c)e.next(o.patterns[c]);else for(;c<r;++c)e.append(o.patterns[c],t);return s}}class sa{constructor(t){this.text=t,this.text=t;const e=this.len=t.length,s=this.specs=[];for(let i=0;i<e;++i)s.push(new Zo(t[i],!1,!1,!1))}eachChar(t){const{len:e,specs:s}=this;for(let i=0;i<e;++i)t(s[i])}}class ia{constructor(t){this.text="PART",this.spec=new Zo(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class na{constructor(t){this.text=t,this.spec=new Zo(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class ra{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const oa=at.createInterface("ISyntaxInterpreter").withDefault(t=>t.singleton(aa));class aa{constructor(){this.rootState=new ea(null),this.initialStates=[this.rootState]}add(t){let e=0;if(Array.isArray(t)){const s=t.length;for(;e<s;++e)this.add(t[e]);return}let s=this.rootState;const i=t,n=i.pattern,r=new ra,o=this.parse(i,r),a=o.length,c=t=>{s=s.append(t,n)};for(e=0;e<a;++e)o[e].eachChar(c);s.types=r,s.isEndpoint=!0}interpret(t){const e=new ta;let s=this.initialStates;const i=t.length;for(let n=0;n<i&&0!==(s=this.getNextStates(s,t.charAt(n),e)).length;++n);if(s.sort((t,e)=>{if(!t.isEndpoint)return e.isEndpoint?1:0;if(!e.isEndpoint)return-1;const s=t.types,i=e.types;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}),s.length>0){const t=s[0];t.charSpec.isSymbol||e.next(t.pattern),e.pattern=t.pattern}return e}getNextStates(t,e,s){const i=[];let n=null;const r=t.length;for(let o=0;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}parse(t,e){const s=[],i=t.pattern,n=i.length;let r=0,o=0,a="";for(;r<n;)a=i.charAt(r),t.symbols.includes(a)?r!==o?(s.push(new sa(i.slice(o,r))),++e.statics,o=r):(s.push(new na(i.slice(o,r+1))),++e.symbols,o=++r):r===o&&"P"===a&&"PART"===i.slice(r,r+4)?(o=r+=4,s.push(new ia(t.symbols)),++e.dynamics):++r;return o!==r&&(s.push(new sa(i.slice(o,r))),++e.statics),s}}const ca=at.createInterface("IAttributePattern").noDefault();function ha(...t){return function(e){return ua.define(t,e)}}class la{constructor(t){this.Type=t,this.name=void 0}register(t){Ct.singleton(ca,this.Type).register(t)}}const ua=Object.freeze({name:j.resource.keyFor("attribute-pattern"),definitionAnnotationKey:"attribute-pattern-definitions",define(t,e){!function(t,e){for(const s of e)s.pattern in t?"function"!=typeof t[s.pattern]&&r.write(402,s.pattern):r.write(401,s.pattern)}(e.prototype,t);const s=new la(e),{name:i,definitionAnnotationKey:n}=ua;return C.define(i,s,e),j.resource.appendTo(e,i),j.annotation.set(e,n,t),j.annotation.appendTo(e,n),e},getPatternDefinitions:t=>j.annotation.get(t,ua.definitionAnnotationKey)}),da=at.createInterface("IAttributeParser").withDefault(t=>t.singleton(pa));let pa=class{constructor(t,e){this.interpreter=t,this.cache={},this.interpreter=t;const s=this.patterns={};e.forEach(e=>{const i=ua.getPatternDefinitions(e.constructor);t.add(i),i.forEach(t=>{s[t.pattern]=e})})}parse(t,e){let s=this.cache[t];null==s&&(s=this.cache[t]=this.interpreter.interpret(t));const i=s.pattern;return null==i?new Xo(t,e,t,null):this.patterns[i][i](t,e,s.parts)}};pa=$t([Vt(0,oa),Vt(1,dt(ca))],pa);let fa=class{"PART.PART"(t,e,s){return new Xo(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new Xo(t,e,s[0],s[2])}};fa=$t([ha({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],fa);let ga=class{ref(t,e,s){return new Xo(t,e,"element","ref")}"PART.ref"(t,e,s){return new Xo(t,e,s[0],"ref")}};ga=$t([ha({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],ga);let va=class{":PART"(t,e,s){return new Xo(t,e,s[0],"bind")}};va=$t([ha({pattern:":PART",symbols:":"})],va);let ma=class{"@PART"(t,e,s){return new Xo(t,e,s[0],"trigger")}};function ba(t){return function(e){return wa.define(t,e)}}ma=$t([ha({pattern:"@PART",symbols:"@"})],ma);class ya{constructor(t,e,s,i,n){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.type=n}static create(t,e){let s,i;return"string"==typeof t?i={name:s=t}:(s=t.name,i=t),new ya(e,it(wa.getAnnotation(e,"name"),s),st(wa.getAnnotation(e,"aliases"),i.aliases,e.aliases),wa.keyFrom(s),it(wa.getAnnotation(e,"type"),i.type,e.type,null))}register(t){const{Type:e,key:s,aliases:i}=this;Ct.singleton(s,e).register(t),Ct.alias(s,e).register(t),Ae(i,wa,s,t)}}const wa={name:j.resource.keyFor("binding-command"),keyFrom:t=>`${wa.name}:${t}`,isType:t=>"function"==typeof t&&C.hasOwn(wa.name,t),define(t,e){const s=ya.create(t,e);return C.define(wa.name,s,s.Type),C.define(wa.name,s,s),j.resource.appendTo(e,wa.name),s.Type},getDefinition(t){const e=C.getOwn(wa.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){C.define(j.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>C.getOwn(j.annotation.keyFor(e),t)};function ka(t,e){return 256&t.flags?t.bindable.propName:e?W(t.syntax.target):t.syntax.target}var Ca;function Ta(t){const e=t.createElement("au-m");return t.makeTarget(e),e}!function(t){t[t.type=511]="type",t[t.isTemplateController=1]="isTemplateController",t[t.isReplacePart=2]="isReplacePart",t[t.isCustomAttribute=4]="isCustomAttribute",t[t.isPlainAttribute=8]="isPlainAttribute",t[t.isCustomElement=16]="isCustomElement",t[t.isLetElement=32]="isLetElement",t[t.isPlainElement=64]="isPlainElement",t[t.isText=128]="isText",t[t.isBinding=256]="isBinding",t[t.hasMarker=512]="hasMarker",t[t.hasTemplate=1024]="hasTemplate",t[t.hasAttributes=2048]="hasAttributes",t[t.hasBindings=4096]="hasBindings",t[t.hasChildNodes=8192]="hasChildNodes",t[t.hasParts=16384]="hasParts"}(Ca||(Ca={}));class Sa{constructor(t,e,s=e.name){this.syntax=t,this.info=e,this.res=s,this.flags=4,this._bindings=null}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=4096),this._bindings}}class xa{constructor(t,e,s){this.syntax=t,this.command=e,this.expression=s,this.flags=8}}class Aa{constructor(t,e,s,i,n){this.command=t,this.bindable=e,this.expression=s,this.rawValue=i,this.target=n,this.flags=256}}let $a=class{constructor(){this.bindingType=49}compile(t){return new Do(t.expression,ka(t,!1))}};$a=$t([ba("one-time")],$a);let Va=class{constructor(){this.bindingType=50}compile(t){return new Mo(t.expression,ka(t,!1))}};Va=$t([ba("to-view")],Va);let Oa=class{constructor(){this.bindingType=51}compile(t){return new _o(t.expression,ka(t,!1))}};Oa=$t([ba("from-view")],Oa);let Ea=class{constructor(){this.bindingType=52}compile(t){return new Uo(t.expression,ka(t,!1))}};Ea=$t([ba("two-way")],Ea);let Ia=class{constructor(){this.bindingType=53}compile(t){let e=us.default;if(t instanceof Aa)e=t.bindable.mode;else{switch(t.syntax.command){case"bind":case"to-view":e=us.toView;break;case"one-time":e=us.oneTime;break;case"from-view":e=us.fromView;break;case"two-way":e=us.twoWay}}switch(e){case us.default:case us.toView:return Va.prototype.compile(t);case us.oneTime:return $a.prototype.compile(t);case us.fromView:return Oa.prototype.compile(t);case us.twoWay:return Ea.prototype.compile(t)}}};Ia=$t([ba("bind")],Ia);let Pa=class{constructor(){this.bindingType=153}compile(t){return new zo(t.expression,ka(t,!0))}};Pa=$t([ba("call")],Pa);let Ra=class{constructor(){this.bindingType=539}compile(t){return new qo(t.expression,ka(t,!1))}};function Fa(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}var Na,La,ja,Ba;Ra=$t([ba("for")],Ra),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(Na||(Na={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(La||(La={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3077]="ParentScope",t[t.OpenParen=671750]="OpenParen",t[t.OpenBrace=131079]="OpenBrace",t[t.Dot=16392]="Dot",t[t.CloseBrace=1835017]="CloseBrace",t[t.CloseParen=1835018]="CloseParen",t[t.Comma=1572875]="Comma",t[t.OpenBracket=671756]="OpenBracket",t[t.CloseBracket=1835021]="CloseBracket",t[t.Colon=1572878]="Colon",t[t.Question=1572879]="Question",t[t.Ampersand=1572880]="Ampersand",t[t.Bar=1572883]="Bar",t[t.BarBar=1638548]="BarBar",t[t.AmpersandAmpersand=1638613]="AmpersandAmpersand",t[t.EqualsEquals=1638678]="EqualsEquals",t[t.ExclamationEquals=1638679]="ExclamationEquals",t[t.EqualsEqualsEquals=1638680]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638681]="ExclamationEqualsEquals",t[t.LessThan=1638746]="LessThan",t[t.GreaterThan=1638747]="GreaterThan",t[t.LessThanEquals=1638748]="LessThanEquals",t[t.GreaterThanEquals=1638749]="GreaterThanEquals",t[t.InKeyword=1640798]="InKeyword",t[t.InstanceOfKeyword=1640799]="InstanceOfKeyword",t[t.Plus=623008]="Plus",t[t.Minus=623009]="Minus",t[t.TypeofKeyword=34850]="TypeofKeyword",t[t.VoidKeyword=34851]="VoidKeyword",t[t.Asterisk=1638884]="Asterisk",t[t.Percent=1638885]="Percent",t[t.Slash=1638886]="Slash",t[t.Equals=1048615]="Equals",t[t.Exclamation=32808]="Exclamation",t[t.TemplateTail=540713]="TemplateTail",t[t.TemplateContinuation=540714]="TemplateContinuation",t[t.OfKeyword=1051179]="OfKeyword"}(ja||(ja={})),function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(Ba||(Ba={}));const Da=Ye.$false,Ma=Ye.$true,_a=Ye.$null,Ua=Ye.$undefined,qa=_e.$this,za=_e.$parent;const Ka=new class{constructor(t){this.input=t,this.index=0,this.startIndex=0,this.lastIndex=0,this.currentToken=1572864,this.tokenValue="",this.assignable=!0,this.length=t.length,this.currentChar=t.charCodeAt(0)}get tokenRaw(){return this.input.slice(this.startIndex,this.index)}}("");var Ha,Wa;function Qa(t,e){return Ka.input=t,Ka.length=t.length,Ka.index=0,Ka.currentChar=t.charCodeAt(0),Ga(Ka,0,61,void 0===e?53:e)}function Ga(t,e,s,i){if(284===i)return new Le(t.input);if(0===t.index){if(2048&i)return function(t){const e=[],s=[],i=t.length;let n="";for(;t.index<i;){switch(t.currentChar){case 36:if(123===t.input.charCodeAt(t.index+1)){e.push(n),n="",t.index+=2,t.currentChar=t.input.charCodeAt(t.index),Ja(t);const i=Ga(t,0,61,2048);s.push(i);continue}n+="$";break;case 92:n+=String.fromCharCode(Fa(Xa(t)));break;default:n+=String.fromCharCode(t.currentChar)}Xa(t)}if(s.length)return e.push(n),new os(e,s);return null}(t);if(Ja(t),1048576&t.currentToken)throw r.error(100,{state:t})}t.assignable=448>s;let n=void 0;if(32768&t.currentToken){const s=nc[63&t.currentToken];Ja(t),n=new Ge(s,Ga(t,e,449,i)),t.assignable=!1}else{t:switch(t.currentToken){case 3077:t.assignable=!1;do{if(Ja(t),e++,!sc(t,16392)){if(524288&t.currentToken){const t=511&e;n=0===t?qa:1===t?za:new _e(t),e=512;break t}throw r.error(103,{state:t})}if(16392===t.currentToken)throw r.error(102,{state:t});if(1572864===t.currentToken)throw r.error(105,{state:t})}while(3077===t.currentToken);case 1024:512&i?n=new is(t.tokenValue):(n=new Ue(t.tokenValue,511&e),e=1024),t.assignable=!0,Ja(t);break;case 3076:t.assignable=!1,Ja(t),n=qa,e=512;break;case 671750:Ja(t),n=Ga(t,0,62,i),ic(t,1835018),e=0;break;case 671756:n=function(t,e,s){Ja(t);const i=new Array;for(;1835021!==t.currentToken;)if(sc(t,1572875)){if(i.push(Ua),1835021===t.currentToken)break}else{if(i.push(Ga(t,e,62,-513&s)),!sc(t,1572875))break;if(1835021===t.currentToken)break}return ic(t,1835021),512&s?new es(i):(t.assignable=!1,new Je(i))}(t,e,i),e=0;break;case 131079:n=function(t,e){const s=new Array,i=new Array;Ja(t);for(;1835017!==t.currentToken;){if(s.push(t.tokenValue),12288&t.currentToken)Ja(t),ic(t,1572878),i.push(Ga(t,0,62,-513&e));else{if(!(3072&t.currentToken))throw r.error(107,{state:t});{const{currentChar:s,currentToken:n,index:r}=t;Ja(t),sc(t,1572878)?i.push(Ga(t,0,62,-513&e)):(t.currentChar=s,t.currentToken=n,t.index=r,i.push(Ga(t,0,450,-513&e)))}}1835017!==t.currentToken&&ic(t,1572875)}return ic(t,1835017),512&e?new ss(s,i):(t.assignable=!1,new Xe(s,i))}(t,i),e=0;break;case 540713:n=new Ze([t.tokenValue]),t.assignable=!1,Ja(t),e=0;break;case 540714:n=Ya(t,e,i,n,!1),e=0;break;case 4096:case 8192:n=new Ye(t.tokenValue),t.assignable=!1,Ja(t),e=0;break;case 2050:case 2051:case 2049:case 2048:n=nc[63&t.currentToken],t.assignable=!1,Ja(t),e=0;break;default:throw t.index>=t.length?r.error(104,{state:t}):r.error(101,{state:t})}if(512&i)return function(t,e){if(0==(65536&e.$kind))throw r.error(106,{state:t});if(1051179!==t.currentToken)throw r.error(106,{state:t});Ja(t);const s=e,i=Ga(t,0,61,0);return new rs(s,i)}(t,n);if(449<s)return n;let o=t.tokenValue;for(;(16384&t.currentToken)>0;){const s=[];let a;switch(t.currentToken){case 16392:if(t.assignable=!0,Ja(t),0==(3072&t.currentToken))throw r.error(105,{state:t});if(o=t.tokenValue,Ja(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671750===t.currentToken){0===e&&(e=2048);continue}n=1024&e?new Ue(o,n.ancestor):new qe(n,o);continue;case 671756:t.assignable=!0,Ja(t),e=4096,n=new ze(n,Ga(t,0,62,i)),ic(t,1835021);break;case 671750:for(t.assignable=!1,Ja(t);1835018!==t.currentToken&&(s.push(Ga(t,0,62,i)),sc(t,1572875)););ic(t,1835018),n=1024&e?new Ke(o,s,n.ancestor):2048&e?new He(n,o,s):new We(n,s),e=0;break;case 540713:t.assignable=!1,a=[t.tokenValue],n=new ts(a,a,n),Ja(t);break;case 540714:n=Ya(t,e,i,n,!0)}}}if(448<s)return n;for(;(65536&t.currentToken)>0;){const r=t.currentToken;if((448&r)<=s)break;Ja(t),n=new Qe(nc[63&r],n,Ga(t,e,448&r,i)),t.assignable=!1}if(63<s)return n;if(sc(t,1572879)){const s=Ga(t,e,62,i);ic(t,1572878),n=new Me(n,s,Ga(t,e,62,i)),t.assignable=!1}if(62<s)return n;if(sc(t,1048615)){if(!t.assignable)throw r.error(150,{state:t});n=new De(n,Ga(t,e,62,i))}if(61<s)return n;for(;sc(t,1572883);){if(1572864===t.currentToken)throw r.error(112);const s=t.tokenValue;Ja(t);const o=new Array;for(;sc(t,1572878);)o.push(Ga(t,e,62,i));n=new Be(n,s,o)}for(;sc(t,1572880);){if(1572864===t.currentToken)throw r.error(113);const s=t.tokenValue;Ja(t);const o=new Array;for(;sc(t,1572878);)o.push(Ga(t,e,62,i));n=new je(n,s,o)}if(1572864!==t.currentToken){if(2048&i)return n;if("of"===t.tokenRaw)throw r.error(151,{state:t});throw r.error(101,{state:t})}return n}function Ya(t,e,s,i,n){const r=[t.tokenValue];ic(t,540714);const o=[Ga(t,e,62,s)];for(;540713!==(t.currentToken=ec(t));)r.push(t.tokenValue),ic(t,540714),o.push(Ga(t,e,62,s));return r.push(t.tokenValue),t.assignable=!1,n?(Ja(t),new ts(r,r,i,o)):(Ja(t),new Ze(r,o))}function Ja(t){for(;t.index<t.length;)if(t.startIndex=t.index,null!=(t.currentToken=fc[t.currentChar](t)))return;t.currentToken=1572864}function Xa(t){return t.currentChar=t.input.charCodeAt(++t.index)}function Za(t,e){let s=t.currentChar;if(!1===e){do{s=Xa(t)}while(s<=57&&s>=48);if(46!==s)return t.tokenValue=parseInt(t.tokenRaw,10),8192;if(s=Xa(t),t.index>=t.length)return t.tokenValue=parseInt(t.tokenRaw.slice(0,-1),10),8192}if(s<=57&&s>=48)do{s=Xa(t)}while(s<=57&&s>=48);else t.currentChar=t.input.charCodeAt(--t.index);return t.tokenValue=parseFloat(t.tokenRaw),8192}function tc(t){let e=!0,s="";for(;96!==Xa(t);)if(36===t.currentChar){if(t.index+1<t.length&&123===t.input.charCodeAt(t.index+1)){t.index++,e=!1;break}s+="$"}else if(92===t.currentChar)s+=String.fromCharCode(Fa(Xa(t)));else{if(t.index>=t.length)throw r.error(109,{state:t});s+=String.fromCharCode(t.currentChar)}return Xa(t),t.tokenValue=s,e?540713:540714}function ec(t){if(t.index>=t.length)throw r.error(109,{state:t});return t.index--,tc(t)}function sc(t,e){return t.currentToken===e&&(Ja(t),!0)}function ic(t,e){if(t.currentToken!==e)throw r.error(110,{state:t,expected:e});Ja(t)}!function(t){t[t.InvalidExpressionStart=100]="InvalidExpressionStart",t[t.UnconsumedToken=101]="UnconsumedToken",t[t.DoubleDot=102]="DoubleDot",t[t.InvalidMemberExpression=103]="InvalidMemberExpression",t[t.UnexpectedEndOfExpression=104]="UnexpectedEndOfExpression",t[t.ExpectedIdentifier=105]="ExpectedIdentifier",t[t.InvalidForDeclaration=106]="InvalidForDeclaration",t[t.InvalidObjectLiteralPropertyDefinition=107]="InvalidObjectLiteralPropertyDefinition",t[t.UnterminatedQuote=108]="UnterminatedQuote",t[t.UnterminatedTemplate=109]="UnterminatedTemplate",t[t.MissingExpectedToken=110]="MissingExpectedToken",t[t.UnexpectedCharacter=111]="UnexpectedCharacter",t[t.MissingValueConverter=112]="MissingValueConverter",t[t.MissingBindingBehavior=113]="MissingBindingBehavior"}(Ha||(Ha={})),function(t){t[t.NotAssignable=150]="NotAssignable",t[t.UnexpectedForOf=151]="UnexpectedForOf"}(Wa||(Wa={}));const nc=[Da,Ma,_a,Ua,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540713,540714,"of"],rc=Object.create(null);rc.true=2049,rc.null=2050,rc.false=2048,rc.undefined=2051,rc.$this=3076,rc.$parent=3077,rc.in=1640798,rc.instanceof=1640799,rc.typeof=34850,rc.void=34851,rc.of=1051179;const oc=[36,0,48,58,65,91,95,0,97,123],ac=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],cc=[48,58],hc=[0,33,127,161];function lc(t,e,s,i){const n=s.length;for(let r=0;r<n;r+=2){const n=s[r];let o=s[r+1];if(o=o>0?o:n+1,t&&t.fill(i,n,o),e)for(let t=n;t<o;t++)e.add(t)}}function uc(t){return e=>(Xa(e),t)}const dc=t=>{throw r.error(111,{state:t})};dc.notMapped=!0,lc(null,new Set,oc,!0);const pc=new Uint8Array(65535);lc(pc,null,ac,1),lc(pc,null,cc,1);const fc=new Array(65535);fc.fill(dc,0,65535),lc(fc,null,hc,t=>(Xa(t),null)),lc(fc,null,ac,(function(t){for(;pc[Xa(t)];);const e=rc[t.tokenValue=t.tokenRaw];return void 0===e?1024:e})),lc(fc,null,cc,t=>Za(t,!1)),fc[34]=fc[39]=t=>(function(t){const e=t.currentChar;Xa(t);let s=0;const i=new Array;let n=t.index;for(;t.currentChar!==e;)if(92===t.currentChar)i.push(t.input.slice(n,t.index)),Xa(t),s=Fa(t.currentChar),Xa(t),i.push(String.fromCharCode(s)),n=t.index;else{if(t.index>=t.length)throw r.error(108,{state:t});Xa(t)}const o=t.input.slice(n,t.index);Xa(t),i.push(o);const a=i.join("");return t.tokenValue=a,4096})(t),fc[96]=t=>tc(t),fc[33]=t=>61!==Xa(t)?32808:61!==Xa(t)?1638679:(Xa(t),1638681),fc[61]=t=>61!==Xa(t)?1048615:61!==Xa(t)?1638678:(Xa(t),1638680),fc[38]=t=>38!==Xa(t)?1572880:(Xa(t),1638613),fc[124]=t=>124!==Xa(t)?1572883:(Xa(t),1638548),fc[46]=t=>Xa(t)<=57&&t.currentChar>=48?Za(t,!0):16392,fc[60]=t=>61!==Xa(t)?1638746:(Xa(t),1638748),fc[62]=t=>61!==Xa(t)?1638747:(Xa(t),1638749),fc[37]=uc(1638885),fc[40]=uc(671750),fc[41]=uc(1835018),fc[42]=uc(1638884),fc[43]=uc(623008),fc[44]=uc(1572875),fc[45]=uc(623009),fc[47]=uc(1638886),fc[58]=uc(1572878),fc[63]=uc(1572879),fc[91]=uc(671756),fc[93]=uc(1835021),fc[123]=uc(131079),fc[125]=uc(1835017);const gc=[{register(t){t.registerTransformer(Hs,t=>(Reflect.set(t,"parseCore",Qa),t))}}],vc=[ga,fa],mc=[Ia,$a,Oa,Va,Ea,Pa,Ra];class bc{constructor(t,e){this.propName=t,this.mode=e}}class yc{constructor(t,e){this.name=t,this.containerless=e,this.bindables=Object.create(null)}static from(t){const e=new yc(t.name,t.containerless),s=t.bindables,i=us.toView;let n,r,o,a;for(r in s)void 0!==(n=s[r]).property&&(r=n.property),o=void 0!==n.attribute?n.attribute:G(r),a=void 0!==n.mode&&n.mode!==us.default?n.mode:i,e.bindables[o]=new bc(r,a);return e}}class wc{constructor(t,e){this.name=t,this.isTemplateController=e,this.bindables=Object.create(null),this.bindable=null}static from(t){const e=new wc(t.name,t.isTemplateController),s=t.bindables,i=void 0!==t.defaultBindingMode&&t.defaultBindingMode!==us.default?t.defaultBindingMode:us.toView;let n,r,o,a,c=!1,h=!1;for(r in s){if(void 0!==(n=s[r]).property&&(r=n.property),o=void 0!==n.mode&&n.mode!==us.default?n.mode:i,h=!0===n.primary,a=e.bindables[r]=new bc(r,o),h){if(c)throw new Error("primary already exists");c=!0,e.bindable=a}null===e.bindable&&(e.bindable=a)}return null===e.bindable&&(e.bindable=new bc("value",i)),e}}class kc{constructor(t){this.resources=t,this.elementLookup=Object.create(null),this.attributeLookup=Object.create(null),this.commandLookup=Object.create(null)}getElementInfo(t){let e=this.elementLookup[t];if(void 0===e){const s=this.resources.find(Rr,t);this.elementLookup[t]=e=null===s?null:yc.from(s)}return e}getAttributeInfo(t){let e=this.attributeLookup[t.target];if(void 0===e){const s=this.resources.find(Wn,t.target);this.attributeLookup[t.target]=e=null===s?null:wc.from(s)}return e}getBindingCommand(t,e){const s=t.command;if(null===s)return null;let i=this.commandLookup[s];if(void 0===i){if(null===(i=this.resources.create(wa,s))){if(e)return null;throw new Error(`Unknown binding command: ${s}`)}this.commandLookup[s]=i}return i}}const Cc=at.createInterface("IAttrSyntaxTransformer").noDefault();class Tc{constructor(t,e,s,i,n,r,o,a){this.dom=t,this.targetEvent=e,this.delegationStrategy=s,this.sourceExpression=i,this.target=n,this.preventDefault=r,this.eventManager=o,this.locator=a,this.$state=0}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const s=this.sourceExpression.evaluate(2097152,this.$scope,this.locator,this.part);return Reflect.deleteProperty(e,"$event"),!0!==s&&this.preventDefault&&t.preventDefault(),s}handleEvent(t){this.callSource(t)}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.$unbind(4096|t)}this.$state|=1,this.$scope=e,this.part=s;const i=this.sourceExpression;Re(i)&&i.bind(t,e,this),this.handler=this.eventManager.addEventListener(this.dom,this.target,this.targetEvent,this,this.delegationStrategy),this.$state|=4,this.$state&=-2}$unbind(t){if(!(4&this.$state))return;this.$state|=2;const e=this.sourceExpression;Fe(e)&&e.unbind(t,this.$scope,this),this.$scope=null,this.handler.dispose(),this.handler=null,this.$state&=-7}observeProperty(t,e,s){}handleChange(t,e,s){}}let Sc=class{constructor(t,e,s,i,n,r){this.scheduler=t,this.observerLocator=s,this.obj=i,this.propertyKey=n,this.targetAttribute=r,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;switch(this.oldValue=t,this.targetAttribute){case"class":t?this.obj.classList.add(this.propertyKey):this.obj.classList.remove(this.propertyKey);break;case"style":{let e="",s=t;"string"==typeof s&&s.includes("!important")&&(e="important",s=s.replace("!important","")),this.obj.style.setProperty(this.propertyKey,s,e)}}}}handleMutation(t){let e=!1;for(let s=0,i=t.length;i>s;++s){const i=t[s];if("attributes"===i.type&&i.attributeName===this.propertyKey){e=!0;break}}if(e){let t;switch(this.targetAttribute){case"class":t=this.obj.classList.contains(this.propertyKey);break;case"style":t=this.obj.style.getPropertyValue(this.propertyKey);break;default:throw new Error(`Unsupported targetAttribute: ${this.targetAttribute}`)}if(t!==this.currentValue){const{currentValue:e}=this;this.currentValue=this.oldValue=t,this.hasChanges=!1,this.callSubscribers(t,e,131072)}}}subscribe(t){this.hasSubscribers()||(this.currentValue=this.oldValue=this.obj.getAttribute(this.propertyKey),xc(this.obj,this)),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||Ac(this.obj,this)}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0}))}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}};Sc=$t([Ht()],Sc);const xc=(t,e)=>{void 0===t.$eMObservers&&(t.$eMObservers=new Set),void 0===t.$mObserver&&(t.$mObserver=Zn.createNodeObserver(t,$c,{attributes:!0})),t.$eMObservers.add(e)},Ac=(t,e)=>{const s=t.$eMObservers;return!!s.delete(e)&&(0===s.size&&(t.$mObserver.disconnect(),t.$mObserver=void 0),!0)},$c=t=>{t[0].target.$eMObservers.forEach(Vc,t)};function Vc(t){t.handleMutation(this)}const{oneTime:Oc,toView:Ec,fromView:Ic}=us,Pc=Ec|Oc;let Rc=class{constructor(t,e,s,i,n,r,o){this.sourceExpression=t,this.target=e,this.targetAttribute=s,this.targetProperty=i,this.mode=n,this.observerLocator=r,this.locator=o,this.$state=0,this.$scope=null,this.persistentFlags=0,Bs.assignIdTo(this),this.$scheduler=o.get(cn)}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,16|e)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(32|e,this.$scope,this.locator,t)}handleChange(t,e,s){if(4&this.$state){if(s|=this.persistentFlags,this.mode===us.fromView&&(s&=-17,s|=32),16&s){const e=this.targetObserver.getValue();return(10082!==this.sourceExpression.$kind||this.observerSlots>1)&&(t=this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part)),t!==e&&this.updateTarget(t,s),void(0==(this.mode&Oc)&&(this.version++,this.sourceExpression.connect(s,this.$scope,this,this.part),this.unobserve(!1)))}if(!(32&s))throw r.error(15,s);t!==this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part)&&this.updateSource(t,s)}}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.$unbind(4096|t)}this.$state|=1,this.persistentFlags=2080374799&t,this.$scope=e,this.part=s;let i=this.sourceExpression;Re(i)&&i.bind(t,e,this);let n=this.targetObserver;n||(n=this.targetObserver=new Sc(this.$scheduler,t,this.observerLocator,this.target,this.targetProperty,this.targetAttribute)),n.bind&&n.bind(t),i=this.sourceExpression,this.mode&Pc&&this.updateTarget(i.evaluate(t,e,this.locator,s),t),this.mode&Ec&&i.connect(t,e,this,s),this.mode&Ic&&(n[this.id]|=32,n.subscribe(this)),this.$state|=4,this.$state&=-2}$unbind(t){4&this.$state&&(this.$state|=2,this.persistentFlags=0,Fe(this.sourceExpression)&&this.sourceExpression.unbind(t,this.$scope,this),this.$scope=null,this.targetObserver.unbind&&this.targetObserver.unbind(t),this.targetObserver.unsubscribe&&(this.targetObserver.unsubscribe(this),this.targetObserver[this.id]&=-33),this.unobserve(!0),this.$state&=-7)}connect(t){4&this.$state&&(t|=this.persistentFlags,this.sourceExpression.connect(2097152|t,this.$scope,this,this.part))}};Rc=$t([Bs()],Rc);class Fc{constructor(t,e,s,i,n){this.scheduler=t,this.obj=s,this.propertyKey=i,this.namespace=n,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;this.oldValue=t,null==t?this.obj.removeAttributeNS(this.namespace,this.propertyKey):this.obj.setAttributeNS(this.namespace,this.propertyKey,t)}}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.currentValue=this.oldValue=this.obj.getAttributeNS(this.namespace,this.propertyKey)}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}}function Nc(t,e){return t===e}let Lc=class{constructor(t,e,s,i,n){this.scheduler=t,this.observerLocator=s,this.handler=i,this.obj=n,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.task=null,this.arrayObserver=void 0,this.valueObserver=void 0,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:e}=this;this.oldValue=e,void 0===this.valueObserver&&(void 0!==this.obj.$observers&&(void 0!==this.obj.$observers.model?this.valueObserver=this.obj.$observers.model:void 0!==this.obj.$observers.value&&(this.valueObserver=this.obj.$observers.value)),void 0!==this.valueObserver&&this.valueObserver.subscribe(this)),void 0!==this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=void 0),"checkbox"===this.obj.type&&Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(t,e),this.arrayObserver.subscribeToCollection(this)),this.synchronizeElement()}}handleCollectionChange(t,e){const{currentValue:s,oldValue:i}=this;(4096&e)>0||268435456===this.persistentFlags?(this.oldValue=s,this.synchronizeElement()):this.hasChanges=!0,536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null})),this.callSubscribers(s,i,e)}handleChange(t,e,s){(4096&s)>0||268435456===this.persistentFlags?this.synchronizeElement():this.hasChanges=!0,536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(s))),this.callSubscribers(t,e,s)}synchronizeElement(){const{currentValue:t,obj:e}=this,s=Object.prototype.hasOwnProperty.call(e,"model")?e.model:e.value,i="radio"===e.type,n=void 0!==e.matcher?e.matcher:Nc;i?e.checked=!!n(t,s):!0===t?e.checked=!0:Array.isArray(t)?e.checked=-1!==t.findIndex(t=>!!n(t,s)):e.checked=!1}handleEvent(){this.oldValue=this.currentValue;let{currentValue:t}=this;const{obj:e}=this,s=Object.prototype.hasOwnProperty.call(e,"model")?e.model:e.value;let i;const n=void 0!==e.matcher?e.matcher:Nc;if("checkbox"===e.type){if(Array.isArray(t))return i=t.findIndex(t=>!!n(t,s)),void(e.checked&&-1===i?t.push(s):e.checked||-1===i||t.splice(i,1));t=e.checked}else{if(!e.checked)return;t=s}this.currentValue=t,this.callSubscribers(this.currentValue,this.oldValue,655360)}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.currentValue=this.obj.checked}unbind(t){void 0!==this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=void 0),void 0!==this.valueObserver&&this.valueObserver.unsubscribe(this),null!==this.task&&(this.task.cancel(),this.task=null)}subscribe(t){this.hasSubscribers()||this.handler.subscribe(this.obj,this),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||this.handler.dispose()}};Lc=$t([Ht()],Lc);class jc{constructor(t,e,s){this.scheduler=t,this.obj=s,this.currentValue="",this.oldValue="",this.doNotCache=!0,this.nameIndex={},this.version=0,this.hasChanges=!1,this.isActive=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t,nameIndex:e}=this;let{version:s}=this;this.oldValue=t;const i=this.getClassesToAdd(t);if(i.length>0&&this.addClassesAndUpdateIndex(i),this.version+=1,0===s)return;s-=1;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t]===s&&this.obj.classList.remove(t)}}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0}))}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}splitClassString(t){const e=t.match(/\S+/g);return null===e?n.a.emptyArray:e}getClassesToAdd(t){if("string"==typeof t)return this.splitClassString(t);if(t instanceof Array){const e=t.length;if(e>0){const s=[];for(let i=0;i<e;++i)s.push(...this.getClassesToAdd(t[i]));return s}return n.a.emptyArray}if(t instanceof Object){const e=[];for(const s in t)t[s]&&(s.includes(" ")?e.push(...this.splitClassString(s)):e.push(s));return e}return n.a.emptyArray}addClassesAndUpdateIndex(t){const e=this.obj;for(let s=0,i=t.length;s<i;s++){const i=t[s];i.length&&(this.nameIndex[i]=this.version,e.classList.add(i))}}}class Bc{constructor(t,e,s,i){this.scheduler=t,this.obj=s,this.propertyKey=i,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;this.oldValue=t,null==t?this.obj.removeAttribute(this.propertyKey):this.obj.setAttribute(this.propertyKey,t)}}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.currentValue=this.oldValue=this.obj.getAttribute(this.propertyKey)}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}}class Dc{constructor(t,e,s,i){this.scheduler=t,this.obj=s,this.propertyKey=i,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;this.oldValue=t,this.obj[this.propertyKey]=t}}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.currentValue=this.oldValue=this.obj[this.propertyKey]}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}}function Mc(t){return t.composedPath&&t.composedPath()[0]||t.deepPath&&t.deepPath()[0]||t.path&&t.path[0]||t.target}function _c(){this.standardStopPropagation(),this.propagationStopped=!0}function Uc(t){t.propagationStopped=!1;let e=Mc(t);const s=[];for(;e;){if(e.capturedCallbacks){const i=e.capturedCallbacks[t.type];i&&(t.stopPropagation!==_c&&(t.standardStopPropagation=t.stopPropagation,t.stopPropagation=_c),s.push(i))}e=e.parentNode}for(let e=s.length-1;e>=0&&!t.propagationStopped;e--){const i=s[e];"handleEvent"in i?i.handleEvent(t):i(t)}}function qc(t){t.propagationStopped=!1;let e=Mc(t);for(;e&&!t.propagationStopped;){if(e.delegatedCallbacks){const s=e.delegatedCallbacks[t.type];s&&(t.stopPropagation!==_c&&(t.standardStopPropagation=t.stopPropagation,t.stopPropagation=_c),"handleEvent"in s?s.handleEvent(t):s(t))}e=e.parentNode}}class zc{constructor(t,e,s,i){this.dom=t,this.eventName=e,this.listener=s,this.capture=i,this.count=0}increment(){this.count++,1===this.count&&this.dom.addEventListener(this.eventName,this.listener,null,this.capture)}decrement(){this.count--,0===this.count&&this.dom.removeEventListener(this.eventName,this.listener,null,this.capture)}dispose(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.eventName,this.listener,null,this.capture))}}class Kc{constructor(t,e,s,i){this.entry=t,this.lookup=e,this.targetEvent=s,e[s]=i}dispose(){this.entry.decrement(),this.lookup[this.targetEvent]=null}}class Hc{constructor(t,e,s,i){this.dom=t,this.target=e,this.targetEvent=s,this.callback=i,t.addEventListener(s,i,e)}dispose(){this.dom.removeEventListener(this.targetEvent,this.callback,this.target)}}class Wc{constructor(t,e){this.dom=t,this.events=e,this.target=null,this.handler=null}subscribe(t,e){this.target=t,this.handler=e;const s=this.dom.addEventListener,i=this.events;for(let n=0,r=i.length;r>n;++n)s(i[n],e,t)}dispose(){const t=this.target,e=this.handler,s=this.events,i=this.dom;for(let n=0,r=s.length;r>n;++n)i.removeEventListener(s[n],e,t);this.target=this.handler=null}}const Qc=at.createInterface("IEventManager").withDefault(t=>t.singleton(Gc));class Gc{constructor(){this.delegatedHandlers={},this.capturedHandlers={}}addEventListener(t,e,s,i,n){let r,o,a;if(n===si.bubbling){(a=(r=this.delegatedHandlers)[s]||(r[s]=new zc(t,s,qc,!1))).increment();const n=e.delegatedCallbacks||(e.delegatedCallbacks={});return new Kc(a,n,s,i)}if(n===si.capturing){(a=(o=this.capturedHandlers)[s]||(o[s]=new zc(t,s,Uc,!0))).increment();const n=e.capturedCallbacks||(e.capturedCallbacks={});return new Kc(a,n,s,i)}return new Hc(t,e,s,i)}dispose(){let t;const{delegatedHandlers:e,capturedHandlers:s}=this;for(t in e)e[t].dispose();for(t in s)s[t].dispose()}}const Yc={childList:!0,subtree:!0,characterData:!0};function Jc(t,e){return t===e}let Xc=class{constructor(t,e,s,i,n,r){this.scheduler=t,this.observerLocator=s,this.dom=i,this.handler=n,this.obj=r,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.task=null,this.arrayObserver=void 0,this.nodeObserver=void 0,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:e}=this;this.oldValue=e;const s=Array.isArray(e);if(!s&&null!=e&&this.obj.multiple)throw new Error("Only null or Array instances can be bound to a multi-select.");this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=void 0),s&&(this.arrayObserver=this.observerLocator.getArrayObserver(t,e),this.arrayObserver.subscribeToCollection(this)),this.synchronizeOptions(),this.notify(t)}}handleCollectionChange(t,e){(4096&e)>0||268435456===this.persistentFlags?this.synchronizeOptions():this.hasChanges=!0,536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null})),this.callSubscribers(this.currentValue,this.oldValue,e)}handleChange(t,e,s){(4096&s)>0||268435456===this.persistentFlags?this.synchronizeOptions():this.hasChanges=!0,536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(s),this.task=null})),this.callSubscribers(t,e,s)}notify(t){if((4096&t)>0||268435456===this.persistentFlags)return;const e=this.oldValue,s=this.currentValue;s!==e&&this.callSubscribers(s,e,t)}handleEvent(){this.synchronizeValue()&&this.callSubscribers(this.currentValue,this.oldValue,655360)}synchronizeOptions(t){const{currentValue:e,obj:s}=this,i=Array.isArray(e),n=void 0!==s.matcher?s.matcher:Jc,r=s.options;let o=r.length;for(;o-- >0;){const t=r[o],s=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value;i?t.selected=-1!==e.findIndex(t=>!!n(s,t)):t.selected=!!n(s,e)}}synchronizeValue(){const t=this.obj,e=t.options,s=e.length,i=this.currentValue;let n=0;if(t.multiple){if(!Array.isArray(i))return!0;let r;const o=t.matcher||Jc,a=[];for(;n<s;)(r=e[n]).selected&&a.push(Object.prototype.hasOwnProperty.call(r,"model")?r.model:r.value),++n;for(n=0;n<i.length;){const t=i[n];-1===a.findIndex(e=>!!o(t,e))?i.splice(n,1):++n}for(n=0;n<a.length;){const t=a[n];-1===i.findIndex(e=>!!o(t,e))&&i.push(t),++n}return!1}let r=null;for(;n<s;){const t=e[n];if(t.selected){r=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value;break}++n}return this.oldValue=this.currentValue,this.currentValue=r,!0}bind(t){this.nodeObserver=this.dom.createNodeObserver(this.obj,this.handleNodeChange,Yc),536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0}))}unbind(t){this.nodeObserver.disconnect(),this.nodeObserver=null,null!==this.task&&(this.task.cancel(),this.task=null),this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=null)}handleNodeChange(){this.synchronizeOptions(),this.synchronizeValue()&&this.notify(131072)}subscribe(t){this.hasSubscribers()||this.handler.subscribe(this.obj,this),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||this.handler.dispose()}};$t([et],Xc.prototype,"handleNodeChange",null),Xc=$t([Ht()],Xc);class Zc{constructor(t,e,s){this.scheduler=t,this.obj=s,this.currentValue="",this.oldValue="",this.styles={},this.version=0,this.hasChanges=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.obj.style.cssText}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}getStyleTuplesFromString(t){const e=[],s=/\s*([\w-]+)\s*:\s*((?:(?:[\w-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^)]*)\),?|[^)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let i,n;for(;null!==(i=s.exec(t));)0!==(n=i[1]).length&&e.push([n,i[2]]);return e}getStyleTuplesFromObject(t){let e;const s=[];for(const i in t)null!=(e=t[i])&&("string"!=typeof e?s.push(...this.getStyleTuples(e)):s.push([G(i),e]));return s}getStyleTuplesFromArray(t){const e=t.length;if(e>0){const s=[];for(let i=0;i<e;++i)s.push(...this.getStyleTuples(t[i]));return s}return n.a.emptyArray}getStyleTuples(t){return"string"==typeof t?this.getStyleTuplesFromString(t):t instanceof Array?this.getStyleTuplesFromArray(t):t instanceof Object?this.getStyleTuplesFromObject(t):n.a.emptyArray}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;this.oldValue=t;const e=this.styles;let s,i=this.version;const n=this.getStyleTuples(t);let r,o,a;const c=n.length;for(let t=0;t<c;++t)o=(r=n[t])[0],a=r[1],this.setProperty(o,a);if(this.styles=e,this.version+=1,0===i)return;for(s in i-=1,e)Object.prototype.hasOwnProperty.call(e,s)&&e[s]===i&&this.obj.style.removeProperty(s)}}setProperty(t,e){let s="";null!=e&&"function"==typeof e.indexOf&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.oldValue=this.currentValue=this.obj.style.cssText}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}}const th=at.createInterface("ISVGAnalyzer").withDefault(t=>t.singleton(class{isStandardSvgAttribute(t,e){return!1}}));let eh=class{constructor(t,e,s,i,n){this.scheduler=t,this.handler=s,this.obj=i,this.propertyKey=n,this.currentValue="",this.oldValue="",this.hasChanges=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:e,oldValue:s}=this;this.oldValue=e,this.obj[this.propertyKey]=null==e?"":e,0==(4096&t)&&this.callSubscribers(e,s,t)}}handleEvent(){const t=this.oldValue=this.currentValue,e=this.currentValue=this.obj[this.propertyKey];t!==e&&(this.oldValue=e,this.callSubscribers(e,t,655360))}subscribe(t){this.hasSubscribers()||(this.handler.subscribe(this.obj,this),this.currentValue=this.oldValue=this.obj[this.propertyKey]),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||this.handler.dispose()}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0}))}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}};eh=$t([Ht()],eh);const sh="http://www.w3.org/1999/xlink",ih="http://www.w3.org/XML/1998/namespace",nh="http://www.w3.org/2000/xmlns/",rh=Object.assign(Object.create(null),{"xlink:actuate":["actuate",sh],"xlink:arcrole":["arcrole",sh],"xlink:href":["href",sh],"xlink:role":["role",sh],"xlink:show":["show",sh],"xlink:title":["title",sh],"xlink:type":["type",sh],"xml:lang":["lang",ih],"xml:space":["space",ih],xmlns:["xmlns",nh],"xmlns:xlink":["xlink",nh]}),oh=["change","input"],ah=["change"],ch=["change","input","blur","keyup","paste"],hh=["scroll"],lh=Object.assign(Object.create(null),{class:!0,style:!0,css:!0,checked:!0,value:!0,model:!0,"xlink:actuate":!0,"xlink:arcrole":!0,"xlink:href":!0,"xlink:role":!0,"xlink:show":!0,"xlink:title":!0,"xlink:type":!0,"xml:lang":!0,"xml:space":!0,xmlns:!0,"xmlns:xlink":!0});let uh=class{constructor(t,e){this.dom=t,this.svgAnalyzer=e}static register(t){return Ct.singleton(Sn,this).register(t)}getObserver(t,e,s,i,n,r){switch(r){case"checked":return new Lc(e,t,i,new Wc(this.dom,oh),n);case"value":return"SELECT"===n.tagName?new Xc(e,t,i,this.dom,new Wc(this.dom,ah),n):new eh(e,t,new Wc(this.dom,oh),n,r);case"files":return new eh(e,t,new Wc(this.dom,oh),n,r);case"textContent":case"innerHTML":return new eh(e,t,new Wc(this.dom,ch),n,r);case"scrollTop":case"scrollLeft":return new eh(e,t,new Wc(this.dom,hh),n,r);case"class":return new jc(e,t,n);case"style":case"css":return new Zc(e,t,n);case"model":return new fe(s,t,n,r);case"role":return new Bc(e,t,n,r);default:if(void 0!==rh[r]){const s=rh[r];return new Fc(e,t,n,s[0],s[1])}if(fh(n,r,this.svgAnalyzer))return new Bc(e,t,n,r)}return null}overridesAccessor(t,e,s){return!0===lh[s]}handles(t,e){return this.dom.isNodeInstance(e)}};uh=$t([Vt(0,Yn),Vt(1,th)],uh);let dh=class{constructor(t,e){this.dom=t,this.svgAnalyzer=e}static register(t){return Ct.singleton(xn,this).register(t)}getAccessor(t,e,s,i,n){switch(n){case"textContent":return new Dc(e,t,i,n);case"class":return new jc(e,t,i);case"style":case"css":return new Zc(e,t,i);case"src":case"href":case"role":return new Bc(e,t,i,n);default:if(void 0!==rh[n]){const s=rh[n];return new Fc(e,t,i,s[0],s[1])}return fh(i,n,this.svgAnalyzer)?new Bc(e,t,i,n):new Dc(e,t,i,n)}}handles(t,e){return this.dom.isNodeInstance(e)}};dh=$t([Vt(0,Yn),Vt(1,th)],dh);const ph={};function fh(t,e,s){if(!0===ph[e])return!0;const i=e.slice(0,5);return ph[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)}let gh=class{bind(t,e,s){s.targetObserver=new Bc(s.locator.get(cn),t,s.target,s.targetProperty)}unbind(t,e,s){}};function vh(t){const e=Mc(t);if(this.target===e)return this.selfEventCallSource(t)}gh=$t([$e("attr")],gh);let mh=class{bind(t,e,s){if(!s.callSource||!s.targetEvent)throw r.error(8);s.selfEventCallSource=s.callSource,s.callSource=vh}unbind(t,e,s){s.callSource=s.selfEventCallSource,s.selfEventCallSource=null}};mh=$t([$e("self")],mh);let bh=class{constructor(t){this.observerLocator=t}bind(t,e,s,...i){if(0===i.length)throw r.error(9);if(s.mode!==us.twoWay&&s.mode!==us.fromView)throw r.error(10);this.persistentFlags=2080374799&t;const n=this.observerLocator.getObserver(this.persistentFlags|t,s.target,s.targetProperty);if(!n.handler)throw r.error(10);s.targetObserver=n,n.originalHandler=s.targetObserver.handler,n.handler=new Wc(s.locator.get(Yn),i)}unbind(t,e,s){s.targetObserver.handler.dispose(),s.targetObserver.handler=s.targetObserver.originalHandler,s.targetObserver.originalHandler=null}};bh=$t([$e("updateTrigger"),Vt(0,Tn)],bh);const yh=Symbol(),wh={passive:!0,capture:!0},kh={passive:!0},Ch=new WeakMap;class Th{constructor(t,e){this.dom=t,this.scheduler=e,this.blurs=[],Ch.set(t.document,this),this.handler=Ah(this,this.blurs)}static createFor(t,e){return Ch.get(t.document)||new Th(t,e)}register(t){const e=this.blurs;e.includes(t)||1!==e.push(t)||this.addListeners()}unregister(t){const e=this.blurs,s=e.indexOf(t);s>-1&&e.splice(s,1),0===e.length&&this.removeListeners()}addListeners(){const t=this.dom,e=t.document,s=t.window,i=this.handler;s.navigator.pointerEnabled&&e.addEventListener("pointerdown",i,wh),e.addEventListener("touchstart",i,wh),e.addEventListener("mousedown",i,wh),e.addEventListener("focus",i,wh),s.addEventListener("blur",i,kh)}removeListeners(){const t=this.dom,e=t.document,s=t.window,i=this.handler;s.navigator.pointerEnabled&&e.removeEventListener("pointerdown",i,wh),e.removeEventListener("touchstart",i,wh),e.removeEventListener("mousedown",i,wh),e.removeEventListener("focus",i,wh),s.removeEventListener("blur",i,kh)}}let Sh=class{constructor(t,e,s){this.element=t,this.dom=e,this.linkedMultiple=!0,this.searchSubTree=!0,this.linkingContext=null,this.value=yh,this.manager=Th.createFor(e,s)}attached(){this.manager.register(this)}detaching(){this.manager.unregister(this)}handleEventTarget(t){if(!1===this.value)return;const e=this.dom;t!==e.window&&t!==e.document&&this.contains(t)||this.triggerBlur()}contains(t){if(!this.value)return!1;let e,s,i,r,o;const a=this.element;if(xh(a,t))return!0;if(!this.linkedWith)return!1;const c=this.dom.document,h=this.linkedWith,l=this.linkingContext,u=this.searchSubTree,d=this.linkedMultiple,p=Array.isArray(h)?h:[h],f=("string"==typeof l?c.querySelector(l):l)||c.body,g=p.length;for(s=0;g>s;++s)if("string"==typeof(o=p[s])){if(u){if(d)e=f.querySelectorAll(o);else{const t=f.querySelector(o);e=null!==t?[t]:n.a.emptyArray}for(r=e.length,i=0;r>i;++i)if(e[i].contains(t))return!0}else for(r=(e=f.children).length,i=0;r>i;++i)if(e[i].matches(o))return!0}else if(o&&o.contains(t))return!0;return!1}triggerBlur(){this.value=!1,"function"==typeof this.onBlur&&this.onBlur.call(null)}};$t([Mn()],Sh.prototype,"value",void 0),$t([Mn()],Sh.prototype,"onBlur",void 0),$t([Mn()],Sh.prototype,"linkedWith",void 0),$t([Mn()],Sh.prototype,"linkedMultiple",void 0),$t([Mn()],Sh.prototype,"searchSubTree",void 0),$t([Mn()],Sh.prototype,"linkingContext",void 0),Sh=$t([zn("blur"),Vt(0,Qn),Vt(1,Yn),Vt(2,cn)],Sh);const xh=(t,e)=>{if(t.contains(e))return!0;let s=null;for(;null!=e;){if(e===t)return!0;null!==(s=e.parentNode)||11!==e.nodeType?e=s:e=e.host}return!1},Ah=(t,e)=>{let s=!1;const i=()=>{s=!1},n=()=>{s=!0,t.scheduler.queueRenderTask(i,{preempt:!0})},r=t=>{s||(o(t),n())},o=t=>{const s=t.composed?t.composedPath()[0]:t.target;if(null!==s)for(let t=0,i=e.length;t<i;++t)e[t].handleEventTarget(s)};return{onpointerdown:r,ontouchstart:r,onmousedown:r,onfocus:i=>{if(s)return;if(i.target===t.dom.window)for(let t=0,s=e.length;s>t;++t)e[t].triggerBlur();else o(i);n()},onblur:()=>{s=!1;for(let t=0,s=e.length;t<s;++t)e[t].triggerBlur()},handleEvent(t){this[`on${t.type}`](t)}}};let $h=class{constructor(t,e){this.element=t,this.dom=e,this.needsApply=!1}binding(){this.valueChanged()}valueChanged(){32&this.$controller.state?this.apply():this.needsApply=!0}attached(){this.needsApply&&(this.needsApply=!1,this.apply());const t=this.element;t.addEventListener("focus",this),t.addEventListener("blur",this)}detached(){const t=this.element;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.dom.document.activeElement!==this.element&&(this.value=!1)}apply(){const t=this.element;this.value?t.focus():t.blur()}};function Vh(t){return null==t?rr.done:"function"==typeof t.then?new gr(t):t}$t([Mn({mode:us.twoWay})],$h.prototype,"value",void 0),$h=$t([zn("focus"),Vt(0,Qn),Vt(1,Yn)],$h);let Oh=class{constructor(t,e,s){this.factory=t,this.originalLoc=e,this.dom=s,this.id=J("au$component"),this.strict=!1,this.task=rr.done,this.currentTarget=s.createElement("div"),this.view=this.factory.create(),this.view.hold(e,1)}binding(t){return null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext),this.view.bind(t,this.$controller.scope)}attached(t){this.targetChanged()}detaching(t){this.task=this.deactivate(t)}unbinding(t){return this.callbackContext=null,this.view.unbind(t)}targetChanged(){const t=this.$controller;0!=(4&t.state)&&this.project(t.flags)}project(t){const e=this.currentTarget,s=this.currentTarget=this.resolveTarget();e!==s&&(this.task=this.deactivate(t),this.task=this.activate(s,t))}activate(t,e){const{activating:s,activated:i,callbackContext:n,view:r}=this;let o=this.task;return r.hold(t,2),0==(40&this.$controller.state)?o:("function"==typeof s&&(o=o.done?Vh(s.call(n,t,r)):new fr(o,s,n,t,r)),o.done?r.attach(e):o=new fr(o,r.attach,r,e),"function"==typeof i&&(o=o.done?Vh(i.call(n,t,r)):new fr(o,i,n,t,r)),o)}deactivate(t){const{deactivating:e,deactivated:s,callbackContext:i,view:n,target:r}=this;let o=this.task;return"function"==typeof e&&(o=o.done?Vh(e.call(i,r,n)):new fr(o,e,i,r,n)),o.done?n.detach(t):o=new fr(o,n.detach,n,t),"function"==typeof s&&(o=o.done?Vh(s.call(i,r,n)):new fr(o,s,i,r,n)),o}resolveTarget(){const t=this.dom,e=t.document;let s=this.target,i=this.renderContext;if("string"==typeof s){let n=e;"string"==typeof i&&(i=e.querySelector(i)),t.isNodeInstance(i)&&(n=i),s=n.querySelector(s)}if(t.isNodeInstance(s))return s;if(null==s){if(this.strict)throw new Error("Render target not found");s=e.body}return s}};var Eh;function Ih(t){const e=t.type;return"string"==typeof e&&2===e.length}$t([Mn({primary:!0})],Oh.prototype,"target",void 0),$t([Mn({callback:"targetChanged"})],Oh.prototype,"renderContext",void 0),$t([Mn()],Oh.prototype,"strict",void 0),$t([Mn()],Oh.prototype,"deactivating",void 0),$t([Mn()],Oh.prototype,"activating",void 0),$t([Mn()],Oh.prototype,"deactivated",void 0),$t([Mn()],Oh.prototype,"activated",void 0),$t([Mn()],Oh.prototype,"callbackContext",void 0),Oh=$t([Kn("portal"),Vt(0,ws),Vt(1,Gn),Vt(2,Yn)],Oh),function(t){t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg"}(Eh||(Eh={}));class Ph{constructor(t){this.from=t,this.type="ha"}}class Rh{constructor(t,e){this.from=t,this.to=e,this.type="hb",this.preventDefault=!0,this.strategy=si.none}}class Fh{constructor(t,e){this.from=t,this.to=e,this.type="hb",this.preventDefault=!1,this.strategy=si.bubbling}}class Nh{constructor(t,e){this.from=t,this.to=e,this.type="hb",this.preventDefault=!1,this.strategy=si.capturing}}class Lh{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class jh{constructor(t){this.value=t,this.type="hf"}}class Bh{constructor(t){this.value=t,this.type="hg"}}class Dh{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}function Mh(t,e,s,i){if("string"==typeof e)return function(t,e,s,i){const n=[],r=[],o=[],a=t.createElement(e);let c=!1;s&&Object.keys(s).forEach(e=>{const i=s[e];Ih(i)?(c=!0,n.push(i)):t.setAttribute(a,e,i)});c&&(t.makeTarget(a),r.push(n));i&&Uh(t,a,i,r,o);return new _h(t,a,r,o)}(t,e,s,i);if(Rr.isType(e))return function(t,e,s,i){const n=Rr.getDefinition(e),r=n.name,o=[],a=[o],c=[],h=[],l=n.bindables,u=t.createElement(r);t.makeTarget(u),c.includes(e)||c.push(e);o.push(new Wo(r,h)),s&&Object.keys(s).forEach(t=>{const e=s[t];if(Ih(e))h.push(e);else{void 0!==l[t]?h.push({type:"re",to:t,value:e}):h.push(new Lh(e,t))}});i&&Uh(t,u,i,a,c);return new _h(t,u,a,c)}(t,e,s,i);throw new Error("Invalid tagOrType.")}class _h{constructor(t,e,s,i){this.dom=t,this.node=e,this.instructions=s,this.dependencies=i,this.lazyDefinition=void 0}get definition(){return void 0===this.lazyDefinition&&(this.lazyDefinition=Pr.create({name:Rr.generateName(),template:this.node,needsCompile:"string"==typeof this.node,instructions:this.instructions,dependencies:this.dependencies})),this.lazyDefinition}getElementTemplate(t,e){return t.getElementTemplate(this.dom,this.definition,void 0,e)}createView(t,e,s){return this.getViewFactory(e,s).create()}getViewFactory(t,e){return t.getViewFactory(this.dom,this.definition,e)}mergeInto(t,e,s){this.dom.appendChild(t,this.node),e.push(...this.instructions),s.push(...this.dependencies)}}function Uh(t,e,s,i,n){for(let r=0,o=s.length;r<o;++r){const o=s[r];switch(typeof o){case"string":t.appendChild(e,t.createTextNode(o));break;case"object":t.isNodeInstance(o)?t.appendChild(e,o):"mergeInto"in o&&o.mergeInto(e,i,n)}}}const qh=["subject","composing"];let zh=class{constructor(t,e,s,i){this.dom=t,this.renderable=e,this.instruction=s,this.renderingEngine=i,this.id=J("au$component"),this.subject=void 0,this.composing=!1,this.view=void 0,this.task=rr.done,this.lastSubject=void 0,this.properties=s.instructions.filter(t=>!qh.includes(t.to)).reduce((t,e)=>(e.to&&(t[e.to]=e),t),{})}binding(t){return this.task.done?this.task=this.compose(this.subject,t):this.task=new fr(this.task,this.compose,this,this.subject,t),this.task.done?this.task=this.bindView(t):this.task=new fr(this.task,this.bindView,this,t),this.task}attaching(t){this.task.done?this.attachView(t):this.task=new fr(this.task,this.attachView,this,t)}detaching(t){null!=this.view&&(this.task.done?this.view.detach(t):this.task=new fr(this.task,this.view.detach,this.view,t))}unbinding(t){return this.lastSubject=void 0,null!=this.view&&(this.task.done?this.task=this.view.unbind(t):this.task=new fr(this.task,this.view.unbind,this.view,t)),this.task}caching(t){this.view=void 0}subjectChanged(t,e,s){s|=this.$controller.flags,this.task.done?this.task=this.compose(t,s):this.task=new fr(this.task,this.compose,this,t,s)}compose(t,e){if(this.lastSubject===t)return rr.done;this.lastSubject=t,this.composing=!0;let s=this.deactivate(e);if(t instanceof Promise){let i;i=s.done?t.then(t=>this.resolveView(t,e)):s.wait().then(()=>t.then(t=>this.resolveView(t,e))),s=new dr(i,this.activate,this,e)}else{const i=this.resolveView(t,e);s=s.done?this.activate(i,e):new fr(s,this.activate,this,i,e)}return s.done?this.onComposed():s=new fr(s,this.onComposed,this),s}deactivate(t){const e=this.view;return null==e?rr.done:(e.detach(t),e.unbind(t))}activate(t,e){if(this.view=t,null==t)return rr.done;let s=this.bindView(e);return s.done?this.attachView(e):s=new fr(s,this.attachView,this,e),s}bindView(t){return null!=this.view&&(5&this.$controller.state)>0?this.view.bind(t,this.renderable.scope,this.$controller.part):rr.done}attachView(t){null!=this.view&&(40&this.$controller.state)>0&&this.view.attach(t)}onComposed(){this.composing=!1}resolveView(t,e){const s=this.provideViewFor(t,e);if(s)return s.hold(this.$controller.projector.host,1),s.lockScope(this.renderable.scope),s}provideViewFor(t,e){if(t)return"lockScope"in t?t:"createView"in t?t.createView(e,this.renderingEngine,this.renderable.context):"create"in t?t.create():"template"in t?this.renderingEngine.getViewFactory(this.dom,t,this.renderable.context).create():Mh(this.dom,t,this.properties,void 0===this.$controller.projector?n.a.emptyArray:this.$controller.projector.children).createView(e,this.renderingEngine,this.renderable.context)}};var Kh;$t([Mn],zh.prototype,"subject",void 0),$t([Mn({mode:us.fromView})],zh.prototype,"composing",void 0),zh=$t([Ir({name:"au-compose",template:null,containerless:!0}),Vt(0,Yn),Vt(1,bs),Vt(2,Se),Vt(3,Hr)],zh),function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(Kh||(Kh={}));class Hh{constructor(t,e,s,i,n,o,a,c){this.window=t,this.document=e,this.Node=s,this.Element=i,this.HTMLElement=n,this.CustomEvent=o,this.CSSStyleSheet=a,this.ShadowRoot=c,Zn.isInitialized&&(r.write(1001),Zn.destroy()),Zn.initialize(this)}static register(t){return Ct.alias(Yn,this).register(t)}addEventListener(t,e,s,i){(s||this.document).addEventListener(t,e,i)}appendChild(t,e){t.appendChild(e)}cloneNode(t,e){return t.cloneNode(!1!==e)}convertToRenderLocation(t){if(this.isRenderLocation(t))return t;if(null==t.parentNode)throw r.error(52);const e=this.document.createComment("au-end"),s=this.document.createComment("au-start");return t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(s,e),e.$start=s,s.$nodes=null,e}createDocumentFragment(t){if(null==t)return this.document.createDocumentFragment();if(this.isNodeInstance(t)){if(void 0!==t.content)return t.content;const e=this.document.createDocumentFragment();return e.appendChild(t),e}return this.createTemplate(t).content}createElement(t){return this.document.createElement(t)}fetch(t,e){return this.window.fetch(t,e)}createCustomEvent(t,e){return new this.CustomEvent(t,e)}dispatchEvent(t){this.document.dispatchEvent(t)}createNodeObserver(t,e,s){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>n.a.emptyArray};const i=new MutationObserver(e);return i.observe(t,s),i}createTemplate(t){if(null==t)return this.document.createElement("template");const e=this.document.createElement("template");return e.innerHTML=t.toString(),e}createTextNode(t){return this.document.createTextNode(t)}insertBefore(t,e){e.parentNode.insertBefore(t,e)}isMarker(t){return"AU-M"===t.nodeName}isNodeInstance(t){return null!=t&&t.nodeType>0}isRenderLocation(t){return"au-end"===t.textContent}makeTarget(t){t.className="au"}registerElementResolver(t,e){t.registerResolver(Qn,e),t.registerResolver(this.Node,e),t.registerResolver(this.Element,e),t.registerResolver(this.HTMLElement,e)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,e,s,i){(s||this.document).removeEventListener(t,e,i)}setAttribute(t,e,s){t.setAttribute(e,s)}}class Wh{constructor(t,e){this.dom=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const s=e.querySelectorAll(".au");let i=0,n=s.length;const r=this.targets=Array(n);for(;i<n;){const t=s[i];"AU-M"===t.nodeName?r[i]=this.dom.convertToRenderLocation(t):r[i]=t,++i}const o=e.childNodes;i=0,n=o.length;const a=this.childNodes=Array(n);for(;i<n;)a[i]=o[i],++i;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let s=this.firstChild;const i=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,e.insertBefore(s,t),s!==i);)s=n}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t){if(this.isMounted){let e=this.firstChild;const s=this.lastChild;let i;for(;null!=e&&(i=e.nextSibling,t.appendChild(e),e!==s);)e=i}else this.isMounted=!0,t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let s,i=this.firstChild;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let s=this.firstChild;const i=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,e.insertBefore(s,t),s!==i);)s=n}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,this.dom.isRenderLocation(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}class Qh{constructor(t,e){this.dom=t,this.node=null===e?null:t.createDocumentFragment(e)}createNodeSequence(){return null===this.node?tr.empty:new Wh(this.dom,this.node.cloneNode(!0))}}var Gh;(Gh=class{constructor(t){this.nextSibling=t,this.textContent=""}get parentNode(){return this.nextSibling.parentNode}remove(){}}.prototype).previousSibling=null,Gh.childNodes=n.a.emptyArray,Gh.nodeName="AU-M",Gh.nodeType=1;let Yh=class{constructor(t){this.dom=t}static register(t){return Ct.singleton(Ur,this).register(t)}create(t,e){return new qr(this.dom,e,new Qh(this.dom,e.template),t)}};Yh=$t([Vt(0,Yn)],Yh);let Jh=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,n,r){const o=n.nextSibling;let a;e.isMarker(n)&&e.remove(n);const c=bo(this.parser,r.from,2048);yo(i,a=c.isMulti?new Js(this.observerLocator,c,o,"textContent",us.toView,s):new Xs(c.firstExpression,c,o,"textContent",us.toView,this.observerLocator,s,!0))}};Jh=$t([vo("ha"),Vt(0,Hs),Vt(1,Tn)],Jh);let Xh=class{constructor(t,e){this.parser=t,this.eventManager=e}render(t,e,s,i,n,r){const o=bo(this.parser,r.from,80|r.strategy+6);yo(i,new Tc(e,r.to,r.strategy,o,n,r.preventDefault,this.eventManager,s))}};Xh=$t([vo("hb"),Vt(0,Hs),Vt(1,Qc)],Xh);let Zh=class{render(t,e,s,i,n,r){n.setAttribute(r.to,r.value)}};Zh=$t([vo("he")],Zh);let tl=class{render(t,e,s,i,n,r){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(n.classList,r.value)}};tl=$t([vo("hf")],tl);let el=class{render(t,e,s,i,n,r){n.style.cssText+=r.value}};el=$t([vo("hg")],el);let sl=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,n,r){const o=bo(this.parser,r.from,48|us.toView);yo(i,new zs(o,n.style,r.to,us.toView,this.observerLocator,s))}};sl=$t([vo("hd"),Vt(0,Hs),Vt(1,Tn)],sl);let il=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,n,r){const o=bo(this.parser,r.from,48|us.toView);yo(i,new Rc(o,n,r.attr,r.to,us.toView,this.observerLocator,s))}};il=$t([vo("hc"),Vt(0,Hs),Vt(1,Tn)],il);const nl=Object.freeze({applyTo:n.a.noop}),rl=at.createInterface("IShadowDOMStyles").noDefault(),ol=at.createInterface("IShadowDOMGlobalStyles").withDefault(t=>t.instance(nl));Array.prototype.slice;const al={mode:"open"};const cl={childList:!0};class hl{constructor(t,e,s,i){let n;this.dom=t,this.$controller=e,this.host=s,n=i.shadowOptions instanceof Object&&"mode"in i.shadowOptions?i.shadowOptions:al,this.shadowRoot=s.attachShadow(n),this.host.$controller=e,this.shadowRoot.$controller=e}get children(){return this.host.childNodes}subscribeToChildrenChange(t,e=cl){this.dom.createNodeObserver(this.host,t,e)}provideEncapsulationSource(){return this.shadowRoot}project(t){const e=this.$controller.context;(e.has(rl,!1)?e.get(rl):e.get(ol)).applyTo(this.shadowRoot),t.appendTo(this.shadowRoot)}take(t){t.remove(),t.unlink()}}class ll{constructor(t,e,s){s.childNodes.length?this.childNodes=function(t){const{length:e}=t,s=Array(e);for(let i=0;i<e;++i)s[i]=t[i];return s}(s.childNodes):this.childNodes=n.a.emptyArray,this.host=t.convertToRenderLocation(s),this.host.$controller=e}get children(){return this.childNodes}subscribeToChildrenChange(t){}provideEncapsulationSource(){return this.host.getRootNode()}project(t){t.insertBefore(this.host)}take(t){t.remove(),t.unlink()}}class ul{constructor(t,e){this.host=e,e.$controller=t}get children(){return this.host.childNodes}subscribeToChildrenChange(t){}provideEncapsulationSource(){return this.host.getRootNode()}project(t){t.appendTo(this.host)}take(t){t.remove(),t.unlink()}}const dl=[class{static register(t){return Ct.singleton(Fr,this).register(t)}getElementProjector(t,e,s,i){if(i.shadowOptions||i.hasSlots){if(i.containerless)throw r.error(21);return new hl(t,e,s,i)}return i.containerless?new ll(t,e,s):new ul(e,s)}},dh,uh,Yh],pl=[gh,mh,bh,zh,Oh,$h,Sh],fl=[Xh,il,Zh,tl,el,sl,Jh],gl={register:t=>jo.register(t).register(...dl,...pl,...fl),createContainer(){return this.register(at.createContainer())}};let vl=class{constructor(){this.bindingType=4182}compile(t){return new Rh(t.expression,ka(t,!1))}};vl=$t([ba("trigger")],vl);let ml=class{constructor(){this.bindingType=4184}compile(t){return new Fh(t.expression,ka(t,!1))}};ml=$t([ba("delegate")],ml);let bl=class{constructor(){this.bindingType=4183}compile(t){return new Nh(t.expression,ka(t,!1))}};bl=$t([ba("capture")],bl);let yl=class{constructor(){this.bindingType=32}compile(t){const e=ka(t,!1);return new Dh(e,t.expression,e)}};yl=$t([ba("attr")],yl);let wl=class{constructor(){this.bindingType=32}compile(t){return new Dh("style",t.expression,ka(t,!1))}};wl=$t([ba("style")],wl);let kl=class{constructor(){this.bindingType=32}compile(t){return new Dh("class",t.expression,ka(t,!1))}};kl=$t([ba("class")],kl);let Cl=class{constructor(){this.bindingType=4128}compile(t){return new Ko(t.expression,ka(t,!1))}};Cl=$t([ba("ref")],Cl);let Tl=class{"attr.PART"(t,e,s){return new Xo(t,e,s[1],"attr")}"PART.attr"(t,e,s){return new Xo(t,e,s[0],"attr")}};Tl=$t([ha({pattern:"attr.PART",symbols:"."},{pattern:"PART.attr",symbols:"."})],Tl);let Sl=class{"style.PART"(t,e,s){return new Xo(t,e,s[1],"style")}"PART.style"(t,e,s){return new Xo(t,e,s[0],"style")}};Sl=$t([ha({pattern:"style.PART",symbols:"."},{pattern:"PART.style",symbols:"."})],Sl);let xl=class{"class.PART"(t,e,s){return new Xo(t,e,s[1],"class")}"PART.class"(t,e,s){return new Xo(t,e,s[0],"class")}};xl=$t([ha({pattern:"class.PART",symbols:"."},{pattern:"PART.class",symbols:"."})],xl);const Al=class{constructor(t,e,s,i=s.name,n=s.bindables){this.physicalNode=e,this.info=s,this.res=i,this.bindables=n,this.flags=16,this.isTarget=!0,this.templateController=null,this._customAttributes=null,this._plainAttributes=null,this._bindings=null,this._childNodes=null,this._parts=null,s.containerless?(this.isContainerless=!0,this.marker=Ta(t),this.flags|=512):(this.isContainerless=!1,this.marker=null)}get customAttributes(){return null===this._customAttributes&&(this._customAttributes=[],this.flags|=2048),this._customAttributes}get plainAttributes(){return null===this._plainAttributes&&(this._plainAttributes=[],this.flags|=2048),this._plainAttributes}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=4096),this._bindings}get childNodes(){return null===this._childNodes&&(this._childNodes=[],this.flags|=8192),this._childNodes}get parts(){return null===this._parts&&(this._parts=[],this.flags|=16384),this._parts}},$l=class{constructor(t,e,s=Ta(t)){this.physicalNode=e,this.marker=s,this.flags=544,this.toBindingContext=!1,this._bindings=null}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=4096),this._bindings}},Vl=class{constructor(t,e){this.physicalNode=e,this.flags=64,this.isTarget=!1,this.templateController=null,this.hasSlots=!1,this._customAttributes=null,this._plainAttributes=null,this._childNodes=null}get customAttributes(){return null===this._customAttributes&&(this._customAttributes=[],this.flags|=2048),this._customAttributes}get plainAttributes(){return null===this._plainAttributes&&(this._plainAttributes=[],this.flags|=2048),this._plainAttributes}get childNodes(){return null===this._childNodes&&(this._childNodes=[],this.flags|=8192),this._childNodes}},Ol=class{constructor(t,e=null,s=null,i=null){this.name=t,this.physicalNode=e,this.parent=s,this.template=i,this.flags=2}},El=class{constructor(t,e,s,i,n=s.name){this.syntax=e,this.info=s,this.res=n,this.flags=513,this.physicalNode=null,this.template=null,this.templateController=null,this._bindings=null,this._parts=null,this.partName="replaceable"===s.name?i:null,this.marker=Ta(t)}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=4096),this._bindings}get parts(){return null===this._parts&&(this._parts=[],this.flags|=16384),this._parts}},Il=class{constructor(t,e,s,i=Ta(t)){this.physicalNode=e,this.interpolation=s,this.marker=i,this.flags=640}},Pl=Object.assign(Object.create(null),{id:!0,replace:!0}),Rl=Object.assign(Object.create(null),{"as-element":!0,replace:!0});function Fl(t){const e=t.length;let s=0;for(let i=0;i<e;++i)if(92===(s=t.charCodeAt(i)))++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}return!1}function Nl(t,e){return t!==e}class Ll{constructor(t,e,s,i,n){this.dom=t,this.resources=e,this.attrParser=s,this.exprParser=i,this.attrSyntaxTransformer=n}bind(t){const e=new Vl(this.dom,t),s=this.resources,i=this.attrSyntaxTransformer,n=t.attributes;let r=0;for(;r<n.length;){const o=n[r],a=this.attrParser.parse(o.name,o.value);if(!0===Pl[a.target])throw new Error(`Invalid surrogate attribute: ${a.target}`);const c=s.getBindingCommand(a,!0);if(null===c||0==(4096&c.bindingType)){const n=s.getAttributeInfo(a);if(null===n)i.transform(t,a),this.bindPlainAttribute(a,o,e,e);else{if(n.isTemplateController)throw new Error("Cannot have template controller on surrogate element.");this.bindCustomAttribute(a,n,c,e)}}else i.transform(t,a),this.bindPlainAttribute(a,o,e,e);++r}return this.bindChildNodes(t,e,e,null,null,null),e}bindManifest(t,e,s,i,n,r,o){switch(e.nodeName){case"LET":return void this.bindLetElement(t,e);case"SLOT":s.hasSlots=!0}""===(o=e.getAttribute("replaceable"))&&(o="default");let a=e.getAttribute("as-element");null===a&&(a=e.nodeName.toLowerCase());const c=this.resources.getElementInfo(a);null===c?i=new Vl(this.dom,e):(r=n,n=i=new Al(this.dom,e,c)),this.bindChildNodes(e,s,i,n,r,o),this.bindAttributes(e,t,s,i,n,r,o),n===i&&i.isContainerless?e.parentNode.replaceChild(i.marker,e):i.isTarget&&e.classList.add("au")}bindLetElement(t,e){const s=new $l(this.dom,e);t.childNodes.push(s);const i=e.attributes;let n=0;for(;n<i.length;){const t=i[n];if("to-binding-context"===t.name){e.removeAttribute("to-binding-context"),s.toBindingContext=!0;continue}const r=this.attrParser.parse(t.name,t.value),o=this.resources.getBindingCommand(r,!1),a=null===o?2048:o.bindingType,c=this.exprParser.parse(r.rawValue,a),h=W(r.target),l=new bc(h,us.toView);s.bindings.push(new Aa(o,l,c,r.rawValue,h)),++n}e.parentNode.replaceChild(s.marker,e)}bindAttributes(t,e,s,i,n,r,o){let a=i,c=void 0,h=void 0;const l=t.attributes;let u=0;for(;u<l.length;){const e=l[u];if(++u,!0===Rl[e.name])continue;const n=this.attrParser.parse(e.name,e.value),r=this.resources.getBindingCommand(n,!0);if(null===r||0==(4096&r.bindingType)){const l=this.resources.getAttributeInfo(n);null===l?(this.attrSyntaxTransformer.transform(t,n),this.bindPlainAttribute(n,e,s,i)):l.isTemplateController?(h=i.templateController=this.declareTemplateController(n,l,o),a===i?(h.template=i,a=h):(h.templateController=c,h.template=c.template,c.template=h),c=h):this.bindCustomAttribute(n,l,r,i)}else this.attrSyntaxTransformer.transform(t,n),this.bindPlainAttribute(n,e,s,i)}if("INPUT"===t.tagName){const e=t.type;"checkbox"!==e&&"radio"!==e||this.ensureAttributeOrder(i)}!function(t,e,s){const i=s.physicalNode;let n,r=e;for(;Nl(r,s);)r.template===s?(i.parentNode.replaceChild(r.marker,i),"TEMPLATE"===i.nodeName?(r.physicalNode=i,i.remove()):(n=r.physicalNode=t.createTemplate()).content.appendChild(i)):(n=r.physicalNode=t.createTemplate()).content.appendChild(r.marker),i.removeAttribute(r.syntax.rawName),r=r.template}(this.dom,a,i);let d=t.getAttribute("replace");(""===d||null===d&&null!==n&&n.isContainerless)&&(d="default");const p=i===n?r:n;if(null===d||null===p)e.childNodes.push(a);else{const t=new Ol(d);t.parent=e,t.template=a,p.parts.push(t),null!=e.templateController&&e.templateController.parts.push(t),function(t,e,s){let i,n;"TEMPLATE"===(i=(512&s.flags)>0?s.marker:s.physicalNode).nodeName?e.physicalNode=i:(n=e.physicalNode=t.createTemplate()).content.appendChild(i)}(this.dom,t,a)}}ensureAttributeOrder(t){const e=t.plainAttributes;let s=void 0,i=void 0,n=0;for(let t=0;t<e.length&&n<3;t++)switch(e[t].syntax.target){case"model":case"value":case"matcher":s=t,n++;break;case"checked":i=t,n++}void 0!==i&&void 0!==s&&i<s&&([e[s],e[i]]=[e[i],e[s]])}bindChildNodes(t,e,s,i,n,r){let o,a;for(o="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==o;)switch(o.nodeType){case 1:a=o.nextSibling,this.bindManifest(s,o,e,s,i,n,r),o=a;break;case 3:o=this.bindText(o,s).nextSibling;break;case 4:case 7:case 8:case 10:o=o.nextSibling;break;case 9:case 11:o=o.firstChild}}bindText(t,e){const s=this.exprParser.parse(t.wholeText,2048);if(null!==s){const i=new Il(this.dom,t,s);e.childNodes.push(i),function(t){const e=t.physicalNode,s=e.parentNode;for(;null!==e.nextSibling&&3===e.nextSibling.nodeType;)s.removeChild(e.nextSibling);e.textContent="",s.insertBefore(t.marker,e)}(i)}let i=t;for(;null!==i.nextSibling&&3===i.nextSibling.nodeType;)i=i.nextSibling;return i}declareTemplateController(t,e,s){let i;const n=t.rawValue,r=this.resources.getBindingCommand(t,!1);if(null===r&&Fl(n))i=new El(this.dom,t,e,s),this.bindMultiAttribute(i,e,n);else{i=new El(this.dom,t,e,s);const o=null===r?2048:r.bindingType,a=this.exprParser.parse(n,o);i.bindings.push(new Aa(r,e.bindable,a,n,t.target))}return i}bindCustomAttribute(t,e,s,i){let n;const r=t.rawValue;if(null===s&&Fl(r))n=new Sa(t,e),this.bindMultiAttribute(n,e,r);else{n=new Sa(t,e);const i=null===s?2048:s.bindingType,o=this.exprParser.parse(r,i);n.bindings.push(new Aa(s,e.bindable,o,r,t.target))}i.customAttributes.push(n),i.isTarget=!0}bindMultiAttribute(t,e,s){const i=e.bindables,n=s.length;let r=void 0,o=void 0,a=0,c=0;for(let e=0;e<n;++e)if(92===(c=s.charCodeAt(e)))++e;else if(58===c){for(r=s.slice(a,e);s.charCodeAt(++e)<=32;);for(a=e;e<n;++e)if(92===(c=s.charCodeAt(e)))++e;else if(59===c){o=s.slice(a,e);break}void 0===o&&(o=s.slice(a));const h=this.attrParser.parse(r,o),l=W(h.target),u=this.resources.getBindingCommand(h,!1),d=null===u?2048:u.bindingType,p=this.exprParser.parse(o,d);let f=i[l];for(void 0===f&&(f=i[l]=new bc(l,us.toView)),t.bindings.push(new Aa(u,f,p,o,l));e<n&&s.charCodeAt(++e)<=32;);a=e,r=void 0,o=void 0}}bindPlainAttribute(t,e,s,i){const n=this.resources.getBindingCommand(t,!1),r=null===n?2048:n.bindingType,o=t.target,a=t.rawValue;let c;if(0===a.length&&(55|53&r)>0){if(!((55|53&r)>0))return;c=this.exprParser.parse(W(o),r)}else c=this.exprParser.parse(a,r);if((16&i.flags)>0){const e=i.bindables[o];null!=e?(i.bindings.push(new Aa(n,e,c,a,o)),i.isTarget=!0):null!=c&&(i.plainAttributes.push(new xa(t,n,c)),i.isTarget=!0)}else null!=c?(i.plainAttributes.push(new xa(t,n,c)),i.isTarget=!0):i===s&&i.plainAttributes.push(new xa(t,n,c));null==n&&null!=c&&(e.value="")}}const jl=at.createInterface("ITemplateElementFactory").noDefault(),Bl={};let Dl=class{constructor(t){this.dom=t,this.template=t.createTemplate()}static register(t){return Ct.singleton(jl,this).register(t)}createTemplate(t){if("string"==typeof t){let e=Bl[t];if(void 0===e){const s=this.template;s.innerHTML=t;const i=s.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.template=this.dom.createTemplate(),e=s):(s.content.removeChild(i),e=i),Bl[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.dom.createTemplate();return e.content.appendChild(t),e}return null!=t.parentNode&&t.parentNode.removeChild(t),t}};Dl=$t([Vt(0,Yn)],Dl);class Ml{constructor(t,e,s){this.partialDefinition=t,this.surrogate=e,this.template=s,this.instructions=[],this.surrogates=[],this.scopeParts=[],this.parts={}}toDefinition(){const t=this.partialDefinition;return Pr.create({...t,instructions:st(t.instructions,this.instructions),surrogates:st(t.surrogates,this.surrogates),scopeParts:st(t.scopeParts,this.scopeParts),template:this.template,needsCompile:!1,hasSlots:this.surrogate.hasSlots})}}let _l=class{constructor(t,e,s,i){this.factory=t,this.attrParser=e,this.exprParser=s,this.attrSyntaxModifier=i}get name(){return"default"}static register(t){return Ct.singleton(Mr,this).register(t)}compile(t,e,s){const i=new kc(s),{attrParser:n,exprParser:r,attrSyntaxModifier:o,factory:a}=this,c=new Ll(t,i,n,r,o),h=a.createTemplate(e.template),l=c.bind(h),u=this.compilation=new Ml(e,l,h),d=l.customAttributes,p=l.plainAttributes,f=d.length,g=p.length;if(f+g>0){let t=0;for(let e=0;f>e;++e)u.surrogates[t]=this.compileCustomAttribute(d[e]),t++;for(let e=0;e<g;++e)u.surrogates[t]=this.compilePlainAttribute(p[e],!0),t++}this.compileChildNodes(l,u.instructions,u.scopeParts);const v=u.toDefinition();return this.compilation=null,v}compileChildNodes(t,e,s){if((8192&t.flags)>0){const{childNodes:i}=t;let n;const r=i.length;for(let t=0;t<r;++t)if((128&(n=i[t]).flags)>0)e.push([new Ph(n.interpolation)]);else if((32&n.flags)>0){const t=n.bindings,s=[];let i;const r=t.length;for(let e=0;e<r;++e)i=t[e],s[e]=new Jo(i.expression,i.target);e.push([new Yo(s,n.toBindingContext)])}else this.compileParentNode(n,e,s)}}compileCustomElement(t,e,s){const i=this.compileAttributes(t,1);i[0]=new Wo(t.res,this.compileBindings(t),this.compileParts(t,s)),e.push(i),this.compileChildNodes(t,e,s)}compilePlainElement(t,e,s){const i=this.compileAttributes(t,0);i.length>0&&e.push(i),this.compileChildNodes(t,e,s)}compileParentNode(t,e,s){switch(511&t.flags){case 16:this.compileCustomElement(t,e,s);break;case 64:this.compilePlainElement(t,e,s);break;case 1:this.compileTemplateController(t,e,s)}}compileTemplateController(t,e,s){const i=this.compileBindings(t),n=[],r=[];this.compileParentNode(t.template,n,r),tt(s,r,!1);const o=Pr.create({name:null===t.partName?t.res:t.partName,scopeParts:r,template:t.physicalNode,instructions:n,needsCompile:!1});let a=void 0;if((16384&t.flags)>0){a={};for(const e of t.parts)a[e.name]=this.compilation.parts[e.name]}e.push([new Go(o,t.res,i,"else"===t.res,a)])}compileBindings(t){let e;if((4096&t.flags)>0){const{bindings:s}=t,i=s.length;e=Array(i);let n=0;for(;n<i;++n)e[n]=this.compileBinding(s[n])}else e=n.a.emptyArray;return e}compileBinding(t){return null===t.command?null===t.expression?new Ho(t.rawValue,t.bindable.propName):new Bo(t.expression,t.bindable.propName):t.command.compile(t)}compileAttributes(t,e){let s;if((2048&t.flags)>0){const i=t.customAttributes,n=t.plainAttributes,r=i.length,o=n.length;s=Array(e+r+o);for(let t=0;r>t;++t)s[e]=this.compileCustomAttribute(i[t]),e++;for(let t=0;o>t;++t)s[e]=this.compilePlainAttribute(n[t],!1),e++}else s=e>0?Array(e):n.a.emptyArray;return s}compileCustomAttribute(t){const e=this.compileBindings(t);return new Qo(t.res,e)}compilePlainAttribute(t,e){if(null===t.command){const s=t.syntax;if(null===t.expression){const t=s.rawValue;if(e)switch(s.target){case"class":return new jh(t);case"style":return new Bh(t)}return new Lh(t,s.target)}return new Bo(t.expression,s.target)}return t.command.compile(t)}compileParts(t,e){const s={};if((16384&t.flags)>0){const i=t.parts,n=i.length;let r=e.length;for(let t=0;t<n;++t){const n=i[t];e.includes(n.name)||(e[r++]=n.name);const o=[],a=[];this.compileParentNode(n.template,a,o),this.compilation.parts[n.name]=s[n.name]=Pr.create({name:n.name,scopeParts:o,template:n.physicalNode,instructions:a,needsCompile:!1})}}return s}};const Ul=[_l=$t([Vt(0,jl),Vt(1,da),Vt(2,Hs),Vt(3,Cc)],_l),Dl,class{static register(t){return Ct.singleton(Cc,this).register(t)}transform(t,e){"bind"===e.command&&function(t,e){switch(t.tagName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e.target;default:return"value"===e.target||"files"===e.target}case"TEXTAREA":case"SELECT":return"value"===e.target;default:switch(e.target){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)&&(e.command="two-way"),e.target=this.map(t.tagName,e.target)}map(t,e){switch(t){case"LABEL":switch(e){case"for":return"htmlFor";default:return e}case"IMG":switch(e){case"usemap":return"useMap";default:return e}case"INPUT":switch(e){case"maxlength":return"maxLength";case"minlength":return"minLength";case"formaction":return"formAction";case"formenctype":return"formEncType";case"formmethod":return"formMethod";case"formnovalidate":return"formNoValidate";case"formtarget":return"formTarget";case"inputmode":return"inputMode";default:return e}case"TEXTAREA":switch(e){case"maxlength":return"maxLength";default:return e}case"TD":case"TH":switch(e){case"rowspan":return"rowSpan";case"colspan":return"colSpan";default:return e}default:switch(e){case"accesskey":return"accessKey";case"contenteditable":return"contentEditable";case"tabindex":return"tabIndex";case"textcontent":return"textContent";case"innerhtml":return"innerHTML";case"scrolltop":return"scrollTop";case"scrollleft":return"scrollLeft";case"readonly":return"readOnly";default:return e}}}}],ql=[Cl,vl,ml,bl,kl,wl,yl];const zl=function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global MicrotaskFlushRequestor");return t=!0,void 0!==e.queueMicrotask&&e.queueMicrotask.toString().includes("[native code]")?function(t,e){return function(t,e){const s=function(){e()}.bind(void 0);return function(){t.queueMicrotask(s)}.bind(void 0)}(t,e)}(e,s):Promise.toString().includes("[native code]")?function(t){return function(t){const e=function(){t()}.bind(void 0),s=Promise.resolve();return function(){s.then(e)}.bind(void 0)}(t)}(s):function(t,e){return function(t,e){const s=function(){e()}.bind(void 0),i=new t.MutationObserver(s),n=t.document.createTextNode("a"),r=Object.assign(Object.create(null),{a:"b",b:"a"});let o="a";return i.observe(n,{characterData:!0}),function(){n.data=o=r[o]}.bind(void 0)}(t,e)}(e,s)}}(),Kl=(function(){let t=!1}(),function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global SetTimeoutFlushRequestor");return t=!0,function(t,e){let s=-1;const i=function(){s>-1&&(s=-1,e())}.bind(void 0);return{cancel:function(){s>-1&&(t.clearTimeout(s),s=-1)}.bind(void 0),request:function(){-1===s&&(s=t.setTimeout(i,0))}.bind(void 0)}}(e,s)}}()),Hl=function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global RequestAnimationFrameFlushRequestor");return t=!0,function(t,e){let s=-1;const i=function(){s>-1&&(s=-1,e())}.bind(void 0);return{cancel:function(){s>-1&&(t.cancelAnimationFrame(s),s=-1)}.bind(void 0),request:function(){-1===s&&(s=t.requestAnimationFrame(i))}.bind(void 0)}}(e,s)}}(),Wl=function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global PostRequestAnimationFrameFlushRequestor");return t=!0,function(t,e){let s=-1,i=-1;const n=function(){i>-1&&(i=-1,e())}.bind(void 0),r=function(){s>-1&&(s=-1,-1===i&&(i=t.setTimeout(n,0)))}.bind(void 0);return{cancel:function(){s>-1&&(t.cancelAnimationFrame(s),s=-1),i>-1&&(t.clearTimeout(i),i=-1)}.bind(void 0),request:function(){-1===s&&(s=t.requestAnimationFrame(r))}.bind(void 0)}}(e,s)}}(),Ql=function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global RequestIdleCallbackFlushRequestor");t=!0;const i=void 0!==e.requestIdleCallback&&e.requestIdleCallback.toString().includes("[native code]");return function(t,e){let s=-1;const n={timeout:1e3},r=function(){s>-1&&(s=-1,e())}.bind(void 0);return{cancel:i?function(){s>-1&&(t.cancelIdleCallback(s),s=-1)}.bind(void 0):function(){s>-1&&(t.clearTimeout(s),s=-1)}.bind(void 0),request:i?function(){-1===s&&(s=t.requestIdleCallback(r,n))}.bind(void 0):function(){-1===s&&(s=t.setTimeout(r,45))}.bind(void 0)}}(e,s)}}(),Gl={delay:0,preempt:!1,priority:1,reusable:!0,persistent:!1};let Yl=class t{constructor(t,e){const s=new un({clock:t,scheduler:this,priority:0}),i=new un({clock:t,scheduler:this,priority:1}),n=new un({clock:t,scheduler:this,priority:2}),r=new un({clock:t,scheduler:this,priority:3}),o=new un({clock:t,scheduler:this,priority:4});this.taskQueue=[s,i,n,r,o];const a=e.window;this.flush=[zl(a,s.flush.bind(s)),Hl(a,i.flush.bind(i)),Kl(a,n.flush.bind(n)),Wl(a,r.flush.bind(r)),Ql(a,o.flush.bind(o))]}static register(e){e.registerResolver(cn,{resolve(){if(void 0===Zn.scheduler){const s=e.get(nn),i=e.get(Yn),n=new t(s,i);Reflect.defineProperty(Zn,"scheduler",{value:n,writable:!1,enumerable:!1,configurable:!1})}return Zn.scheduler}})}getTaskQueue(t){return this.taskQueue[t]}yield(t){return this.taskQueue[t].yield()}queueTask(t,e){const{delay:s,preempt:i,priority:n,persistent:r,reusable:o}={...Gl,...e};return this.taskQueue[n].queueTask(t,{delay:s,preempt:i,persistent:r,reusable:o})}getMicroTaskQueue(){return this.taskQueue[0]}getRenderTaskQueue(){return this.taskQueue[1]}getMacroTaskQueue(){return this.taskQueue[2]}getPostRenderTaskQueue(){return this.taskQueue[3]}getIdleTaskQueue(){return this.taskQueue[4]}yieldMicroTask(){return this.taskQueue[0].yield()}yieldRenderTask(){return this.taskQueue[1].yield()}yieldMacroTask(){return this.taskQueue[2].yield()}yieldPostRenderTask(){return this.taskQueue[3].yield()}yieldIdleTask(){return this.taskQueue[4].yield()}async yieldAll(t=1){for(;t-- >0;)await this.yieldIdleTask(),await this.yieldPostRenderTask(),await this.yieldMacroTask(),await this.yieldRenderTask(),await this.yieldMicroTask()}queueMicroTask(t,e){return this.taskQueue[0].queueTask(t,e)}queueRenderTask(t,e){return this.taskQueue[1].queueTask(t,e)}queueMacroTask(t,e){return this.taskQueue[2].queueTask(t,e)}queuePostRenderTask(t,e){return this.taskQueue[3].queueTask(t,e)}queueIdleTask(t,e){return this.taskQueue[4].queueTask(t,e)}requestFlush(t){switch(t.priority){case 0:return this.flush[t.priority]();case 1:case 2:case 3:case 4:return this.flush[t.priority].request()}}cancelFlush(t){switch(t.priority){case 0:return;case 1:case 2:case 3:case 4:return this.flush[t.priority].cancel()}}};$t([et],Yl.prototype,"yieldMicroTask",null),$t([et],Yl.prototype,"yieldRenderTask",null),$t([et],Yl.prototype,"yieldMacroTask",null),$t([et],Yl.prototype,"yieldPostRenderTask",null),$t([et],Yl.prototype,"yieldIdleTask",null),$t([et],Yl.prototype,"yieldAll",null),Yl=$t([Vt(0,nn),Vt(1,Yn)],Yl);let Jl=class{constructor(t){this.container=t}static register(t){return Ct.singleton(go,this).register(t)}initialize(t){if(this.container.has(Yn,!1))return this.container.get(Yn);let e;return e=void 0!==t?void 0!==t.dom?t.dom:null!==t.host.ownerDocument?new Hh(window,t.host.ownerDocument,Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot):new Hh(window,document,Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot):new Hh(window,document,Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot),Ct.instance(Yn,e).register(this.container),void 0===Zn.scheduler?this.container.register(Yl):Ct.instance(cn,Zn.scheduler).register(this.container),e}};const Xl=[Jl=$t([Vt(0,ct)],Jl),Yl],Zl={register:t=>gl.register(t).register(...Xl),createContainer(){return this.register(at.createContainer())}},{enter:tu,leave:eu}=_t.createTimer("JitHtmlBrowserConfiguration"),su={register:t=>(Zl.register(t).register(...mc,...vc,...gc,...ql,...Ul),t),createContainer(){return this.register(at.createContainer())}};class iu{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.scheduler=null,this.task=null}get isActive(){return null!==this.task}get length(){return this.pending.length}activate(t){if(this.isActive)throw new Error("Queue has already been activated");this.scheduler=t.scheduler,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.scheduler.queueRenderTask(this.dequeue,{persistent:!0})}deactivate(){if(!this.isActive)throw new Error("Queue has not been activated");this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const s=Array.isArray(t),i=s?t:[t],n=i.map((t,s)=>Array.isArray(e)?e[s]:e).map(t=>void 0!==t?t:1),r=[];for(const t of i){const e={...t};e.cost=n.shift(),r.push(new Promise((t,s)=>{e.resolve=()=>{t(),this.processing=null,this.dequeue()},e.reject=t=>{s(t),this.processing=null,this.dequeue()}})),this.pending.push(e)}return this.dequeue(),s?r:r[0]}dequeue(t){null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost||0,this.callback(this.processing)))))}clear(){this.pending.splice(0,this.pending.length)}}$t([et],iu.prototype,"dequeue",null);let nu=class{constructor(t,e){this.scheduler=t,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0,callback:()=>{}},this.forwardedState={},this.handlePopstate=t=>this.enqueue(this,"popstate",[t]),this.processCalls=t=>{const e=t;e.target===this&&"forwardState"!==e.methodName&&(e.parameters.push(this.forwardedState.resolve),this.forwardedState.resolve=null,"popstate"===e.methodName&&this.forwardedState.suppressPopstate&&(e.parameters.push(!0),this.forwardedState.suppressPopstate=!1));const s=e.target[e.methodName];r.write(1e4,"DEQUEUE",e.methodName,e.parameters),s&&s.apply(e.target,e.parameters),t.resolve()},this.window=e.window,this.history=e.window.history,this.location=e.window.location,this.pendingCalls=new iu(this.processCalls)}activate(t){if(this.isActive)throw new Error("Browser navigation has already been activated");this.isActive=!0,this.options.callback=t.callback,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.activate({scheduler:this.scheduler,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this.handlePopstate)}deactivate(){if(!this.isActive)throw new Error("Browser navigation has not been activated");this.window.removeEventListener("popstate",this.handlePopstate),this.pendingCalls.deactivate(),this.options={useUrlFragmentHash:!0,callback:()=>{}},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:s}=this.location;return{path:t,query:e,hash:s,instruction:this.options.useUrlFragmentHash?s.slice(1):t}}go(t,e=!1){return this.enqueue(this.history,"go",[t],e)}pushNavigatorState(t){const{title:e,path:s}=t.currentEntry,i=this.options.useUrlFragmentHash?"#/":"";return this.enqueue(this.history,"pushState",[t,e,`${i}${s}`])}replaceNavigatorState(t){const{title:e,path:s}=t.currentEntry,i=this.options.useUrlFragmentHash?"#/":"";return this.enqueue(this.history,"replaceState",[t,e,`${i}${s}`])}popNavigatorState(){return this.enqueue(this,"popState",[])}popstate(t,e,s=!1){s||this.options.callback({...this.viewerState,event:t,state:this.history.state}),null!=e&&e()}async popState(t){await this.go(-1,!0);const e=this.history.state;if(e&&e.navigationEntry&&!e.navigationEntry.firstEntry)return await this.go(-1,!0),this.pushNavigatorState(e);t()}forwardState(t){this.forwardedState=t}enqueue(t,e,s,i){const n=[],r=[],o=[];if(void 0!==i){let t=null;o.push(new Promise(e=>{t=e})),n.push({target:this,methodName:"forwardState",parameters:[{resolve:t,suppressPopstate:i}]}),r.push(0)}return n.push({target:t,methodName:e,parameters:s}),r.push(1),o.push(this.pendingCalls.enqueue(n,r)[0]),o[0]}};nu=$t([Vt(0,cn),Vt(1,Yn)],nu);class ru{constructor(t){this.options={useHref:!0,callback:()=>{}},this.isActive=!1,this.handler=t=>{const e=ru.getEventInfo(t,this.window,this.options);e.shouldHandleEvent&&(t.preventDefault(),this.options.callback(e))},this.window=t.window,this.document=t.document}static getEventInfo(t,e,s){const i={shouldHandleEvent:!1,instruction:null,anchor:null},n=i.anchor=ru.closestAnchor(t.target);if(!n||!ru.targetIsThisWindow(n,e))return i;if(n.hasAttribute("external"))return i;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return i;const r=void 0!==n.$au&&void 0!==n.$au.goto?n.$au.goto.viewModel.value:null,o=s.useHref&&n.hasAttribute("href")?n.getAttribute("href"):null;if(!(null!==r&&0!==r.length||null!==o&&0!==o.length))return i;i.anchor=n,i.instruction=r||o;const a=0===t.button;return i.shouldHandleEvent=a,i}static closestAnchor(t){for(;null!=t;){if("A"===t.tagName)return t;t=t.parentNode}return null}static targetIsThisWindow(t,e){const s=t.getAttribute("target");return!s||s===e.name||"_self"===s}activate(t){if(this.isActive)throw new Error("Link handler has already been activated");this.isActive=!0,this.options={...t},this.document.addEventListener("click",this.handler,!0)}deactivate(){if(!this.isActive)throw new Error("Link handler has not been activated");this.document.removeEventListener("click",this.handler,!0),this.isActive=!1}}function ou(t,e){const s=[];let i=t.findIndex(e);for(;i>=0;)s.push(t.splice(i,1)[0]),i=t.findIndex(e);return s}function au(t){const e={},s=[];if(!t||!t.length)return{parameters:e,list:s};const i=t.replace("+"," ").split("&");for(const t of i){const i=t.split("="),n=decodeURIComponent(i.shift());if(!i.length){s.push(n);continue}const r=decodeURIComponent(i.shift());e[n]=r}return{parameters:e,list:s}}function cu(t,e,s){const i=au(e),n=au(t),r={...i.parameters,...n.parameters},o=[...i.list,...n.list];if(o.length&&s&&s.length)for(const t of s)r[t]=o.shift();let a;return o.length&&Object.keys(r).length&&(r["-unnamed"]=o.splice(0,o.length)),{namedParameters:r,parameterList:o,merged:a=o.length?o:r}}ru.inject=[Yn];class hu{constructor(t,e,s,i=!0,n=null){this.ownsScope=i,this.nextScopeInstructions=n,this.componentName=null,this.componentType=null,this.componentInstance=null,this.viewportName=null,this.viewport=null,this.parametersString=null,this.parameters=null,this.parametersList=null,this.scope=null,this.needsViewportDescribed=!1,this.setComponent(t),this.setViewport(e),this.setParameters(s)}setComponent(t){pu.isName(t)?(this.componentName=pu.getName(t),this.componentType=null,this.componentInstance=null):pu.isType(t)?(this.componentName=pu.getName(t),this.componentType=pu.getType(t),this.componentInstance=null):pu.isInstance(t)&&(this.componentName=pu.getName(t),this.componentType=pu.getType(t),this.componentInstance=pu.getInstance(t))}setViewport(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.viewportName=t,this.viewport=null):(this.viewport=t,null!==t&&(this.viewportName=t.name,this.scope=t.owningScope))}setParameters(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.parametersString=t,this.parameters={id:t}):this.parameters=t}isEmpty(){return!this.isComponentName()&&!this.isComponentType()&&!this.isComponentInstance()}isComponentName(){return!!this.componentName&&!this.isComponentType()&&!this.isComponentInstance()}isComponentType(){return null!==this.componentType&&!this.isComponentInstance()}isComponentInstance(){return null!==this.componentInstance}toComponentType(t){if(null!==this.componentType)return this.componentType;if(null!==this.componentName&&"string"==typeof this.componentName){const e=t.get(ct);if(null!==e&&e.has(Rr.keyFrom(this.componentName),!0)){const t=e.getResolver(Rr.keyFrom(this.componentName));if(null!==t&&void 0!==t.getFactory){const s=t.getFactory(e);if(s)return s.Type}}}return null}toComponentInstance(t){if(null!==this.componentInstance)return this.componentInstance;const e=t.get(ct);return null!=e?this.isComponentType()?e.get(this.componentType):e.get(Rr.keyFrom(this.componentName)):null}toViewportInstance(t){return null!==this.viewport?this.viewport:t.getViewport(this.viewportName)}sameComponent(t,e=!1,s=!1){return(!e||this.parametersString===t.parametersString)&&(s?this.componentType===t.componentType:this.componentName===t.componentName)}sameParameters(t){return this.parametersString===t.parametersString}sameViewport(t){return(this.viewport?this.viewport.name:this.viewportName)===(t.viewport?t.viewport.name:t.viewportName)}}var lu;!function(t){t[t.none=0]="none",t[t.created=1]="created",t[t.loaded=2]="loaded",t[t.initialized=3]="initialized",t[t.added=4]="added"}(lu||(lu={}));class uu{constructor(t=new hu(""),e={instruction:"",fullStateInstruction:""},s=null){this.content=t,this.instruction=e,this.contentStatus=0,this.entered=!1,this.fromCache=!1,this.fromHistory=!1,this.reentry=!1,this.taggedNodes=[],this.content.isComponentType()||null===s||(this.content.componentType=this.toComponentType(s))}get componentInstance(){return this.content.componentInstance}equalComponent(t){return this.content.sameComponent(t.content)}equalParameters(t){return this.content.sameComponent(t.content,!0)&&this.instruction.query===t.instruction.query}reentryBehavior(){return null!==this.content.componentInstance&&"reentryBehavior"in this.content.componentInstance&&void 0!==this.content.componentInstance.reentryBehavior?this.content.componentInstance.reentryBehavior:"default"}isCacheEqual(t){return this.content.sameComponent(t.content,!0)}createComponent(t){0===this.contentStatus&&(this.fromCache||this.fromHistory||(this.content.componentInstance=this.toComponentInstance(t)),this.contentStatus=1)}destroyComponent(){1===this.contentStatus&&(this.contentStatus=0)}canEnter(t,e){if(!this.content.componentInstance)return Promise.resolve(!1);if(!this.content.componentInstance.canEnter)return Promise.resolve(!0);const s=this.content.componentType?this.content.componentType.parameters:null,i=cu(this.content.parametersString||"",this.instruction.query,s);this.instruction.parameters=i.namedParameters,this.instruction.parameterList=i.parameterList;const n=this.content.componentInstance.canEnter(i.merged,this.instruction,e);return r.write(1e4,"viewport canEnter",n),"boolean"==typeof n?Promise.resolve(n):"string"==typeof n?Promise.resolve([new hu(n,t)]):n}canLeave(t){if(!this.content.componentInstance||!this.content.componentInstance.canLeave)return Promise.resolve(!0);const e=this.content.componentInstance.canLeave(t,this.instruction);return r.write(1e4,"viewport canLeave",e),"boolean"==typeof e?Promise.resolve(e):e}async enter(t){if(this.reentry||1===this.contentStatus&&!this.entered){if(this.content.componentInstance&&this.content.componentInstance.enter){const e=this.content.componentType?this.content.componentType.parameters:null,s=cu(this.content.parametersString||"",this.instruction.query,e);this.instruction.parameters=s.namedParameters,this.instruction.parameterList=s.parameterList,await this.content.componentInstance.enter(s.merged,this.instruction,t)}this.entered=!0}}async leave(t){4===this.contentStatus&&this.entered&&(this.content.componentInstance&&this.content.componentInstance.leave&&await this.content.componentInstance.leave(t,this.instruction),this.entered=!1)}loadComponent(t,e,s){if(1!==this.contentStatus||!this.entered||!this.content.componentInstance)return Promise.resolve();if(!this.fromCache||!this.fromHistory){const s=e,i=t;Zr.forCustomElement(this.content.componentInstance,i,s)}const i=this.content.componentInstance.$controller.nodes.childNodes;for(let t=0;t<i.length;t++){const e=i[t];1===e.nodeType&&(Reflect.set(e,"$viewport",s),this.taggedNodes.push(e))}return this.contentStatus=2,Promise.resolve()}unloadComponent(t,e=!1){2===this.contentStatus&&(this.clearTaggedNodes(),e?t.push(this):this.contentStatus=1)}clearTaggedNodes(){for(const t of this.taggedNodes)Reflect.deleteProperty(t,"$viewport");this.taggedNodes=[]}initializeComponent(){2===this.contentStatus&&(this.content.componentInstance.$controller.bind(5120),this.contentStatus=3)}async terminateComponent(t=!1){3===this.contentStatus&&(await this.content.componentInstance.$controller.unbind(10240).wait(),this.contentStatus=2)}addComponent(t){if(3===this.contentStatus){if(this.content.componentInstance.$controller.attach(1024),this.fromCache||this.fromHistory){const e=Array.from(t.getElementsByTagName("*"));for(const t of e){const e=t.getAttribute("au-element-scroll");if(e){const[s,i]=e.split(",");t.removeAttribute("au-element-scroll"),t.scrollTo(+i,+s)}}}this.contentStatus=4}}removeComponent(t,e=!1){if(4===this.contentStatus&&!this.entered){if(e&&null!==t){const e=Array.from(t.getElementsByTagName("*"));for(const t of e)(t.scrollTop>0||t.scrollLeft)&&t.setAttribute("au-element-scroll",`${t.scrollTop},${t.scrollLeft}`)}this.content.componentInstance.$controller.detach(2048),this.contentStatus=3}}async freeContent(t,e,s,i=!1){switch(this.contentStatus){case 4:await this.leave(e),this.removeComponent(t,i);case 3:await this.terminateComponent(i);case 2:this.unloadComponent(s,i);case 1:this.destroyComponent()}}toComponentName(){return this.content.componentName}toComponentType(t){return this.content.isEmpty()?null:this.content.toComponentType(t)}toComponentInstance(t){return this.content.isEmpty()?null:this.content.toComponentInstance(t)}}class du{constructor(t,e,s,i,n,r,o={}){this.router=t,this.name=e,this.element=s,this.context=i,this.owningScope=n,this.options=o,this.scope=null,this.nextContent=null,this.enabled=!0,this.forceRemove=!1,this.parent=null,this.children=[],this.clear=!1,this.elementResolve=null,this.previousViewportState=null,this.cache=[],this.historyCache=[],this.scope=r?this:null,this.content=new uu}get doForceRemove(){let t=this,e=t.forceRemove;for(;!e&&null!==t.parent;)e=(t=t.parent).forceRemove;return e}setNextContent(t,e){let s;if((s=t instanceof hu?t:"string"==typeof t?this.router.instructionResolver.parseViewportInstruction(t):new hu(t)).setViewport(this),this.clear=this.router.instructionResolver.isClearViewportInstruction(s),this.nextContent=new uu(this.clear?void 0:s,e,this.context),this.nextContent.fromHistory=!(!this.nextContent.componentInstance||!e.navigation)&&(!!e.navigation.back||!!e.navigation.forward),this.options.stateful){const t=this.cache.find(t=>this.nextContent.isCacheEqual(t));t?(this.nextContent=t,this.nextContent.fromCache=!0):this.cache.push(this.nextContent)}return null!==this.nextContent.componentInstance&&this.content.componentInstance===this.nextContent.componentInstance?(this.nextContent=null,!1):!(this.content.equalComponent(this.nextContent)&&!e.navigation.refresh&&"refresh"!==this.content.reentryBehavior())||("disallow"===this.content.reentryBehavior()?(this.nextContent=null,!1):this.content.equalParameters(this.nextContent)&&"enter"!==this.content.reentryBehavior()?(this.nextContent=null,!1):(this.content.reentry=!0,this.nextContent.content.setComponent(this.content.componentInstance),this.nextContent.contentStatus=this.content.contentStatus,this.nextContent.reentry=this.content.reentry,!0))}setElement(t,e,s){if(s=s||{},this.element!==t&&(this.previousViewportState={...this},this.clearState(),this.element=t,s.usedBy&&(this.options.usedBy=s.usedBy),s.default&&(this.options.default=s.default),s.noLink&&(this.options.noLink=s.noLink),s.noHistory&&(this.options.noHistory=s.noHistory),s.stateful&&(this.options.stateful=s.stateful),this.elementResolve&&this.elementResolve()),this.context!==e&&(this.context=e),!this.content.componentInstance&&(!this.nextContent||!this.nextContent.componentInstance)&&this.options.default){const t=this.router.instructionResolver.parseViewportInstructions(this.options.default);for(const e of t)e.setViewport(this);this.router.goto(t,{append:!0}).catch(t=>{throw t})}}async remove(t,e){return this.element===t&&this.context===e&&(this.content.componentInstance&&await this.content.freeContent(this.element,this.nextContent?this.nextContent.instruction:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful)),this.doForceRemove&&(await Promise.all(this.historyCache.map(t=>t.freeContent(null,null,this.historyCache,!1))),this.historyCache=[]),!0)}async canLeave(){return!(await Promise.all(this.children.map(t=>t.canLeave()))).some(t=>!1===t)&&this.content.canLeave(this.nextContent?this.nextContent.instruction:null)}async canEnter(){return!!this.clear||null!==(this.nextContent.content||null)&&(await this.waitForElement(),this.nextContent.createComponent(this.context),this.nextContent.canEnter(this,this.content.instruction))}async enter(){return r.write(1e4,"Viewport enter",this.name),!!this.clear||!(!this.nextContent||!this.nextContent.componentInstance)&&(await this.nextContent.enter(this.content.instruction),await this.nextContent.loadComponent(this.context,this.element,this),this.nextContent.initializeComponent(),!0)}async loadContent(){return r.write(1e4,"Viewport loadContent",this.name),this.content.componentInstance&&!this.nextContent.componentInstance&&(await this.content.leave(this.nextContent.instruction),await this.unloadContent()),this.nextContent.componentInstance&&(this.content.componentInstance!==this.nextContent.componentInstance&&this.nextContent.addComponent(this.element),this.content.componentInstance&&(await this.content.leave(this.nextContent.instruction),this.content.reentry||this.content.componentInstance===this.nextContent.componentInstance||await this.unloadContent()),this.content=this.nextContent,this.content.reentry=!1),this.clear&&(this.content=new uu(void 0,this.nextContent.instruction)),this.nextContent=null,!0}clearTaggedNodes(){null!==(this.content||null)&&this.content.clearTaggedNodes(),this.nextContent&&this.nextContent.clearTaggedNodes()}finalizeContentChange(){this.previousViewportState=null}async abortContentChange(){await this.nextContent.freeContent(this.element,this.nextContent.instruction,this.historyCache,this.router.statefulHistory||this.options.stateful),this.previousViewportState&&Object.assign(this,this.previousViewportState)}wantComponent(t){let e=this.options.usedBy||[];return"string"==typeof e&&(e=e.split(",")),e.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;let e=this.options.usedBy;return!e||!e.length||("string"==typeof e&&(e=e.split(",")),!!e.includes(t)||!!e.filter(t=>t.includes("*")).length)}binding(t){this.content.componentInstance&&this.content.initializeComponent()}async attaching(t){r.write(1e4,"ATTACHING viewport",this.name,this.content,this.nextContent),this.enabled=!0,this.content.componentInstance&&(await this.content.enter(this.content.instruction),this.content.addComponent(this.element))}async detaching(t){r.write(1e4,"DETACHING viewport",this.name),this.content.componentInstance&&(await this.content.leave(this.content.instruction),this.content.removeComponent(this.element,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))),this.enabled=!1}async unbinding(t){this.content.componentInstance&&await this.content.terminateComponent(!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}addChild(t){this.children.some(e=>e===t)||(this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}getEnabledViewports(){return this.children.filter(t=>t.enabled).reduce((t,e)=>(t[e.name]=e,t),{})}findViewports(t,e,s=!1){const i=[],n=[],r={...this.getEnabledViewports()};for(const t of e.filter(t=>t.scope===this))r[t.viewportName]=null;const o=t.slice();if(!s)for(let t=0;t<o.length;t++){const e=o[t];if(e.viewport){const a=this.foundViewport(e,e.viewport,s);i.push(e),n.push(...a),r[e.viewport.name]=null,o.splice(t--,1)}}for(let t=0;t<o.length;t++){const e=o[t];e.needsViewportDescribed=!0;for(const a in r){const c=r[a];if(c&&c.wantComponent(e.componentName)){const h=this.foundViewport(e,c,s,!0);i.push(e),n.push(...h),r[a]=null,o.splice(t--,1);break}}}if(!s)for(let t=0;t<o.length;t++){const e=o[t],a=e.viewportName;if(!a||!a.length)continue;const c=e.ownsScope;this.getEnabledViewports()[a]||(this.addViewport(a,null,null,{scope:c,forceDescription:!0}),r[a]=this.getEnabledViewports()[a]);const h=r[a];if(h&&h.acceptComponent(e.componentName)){const c=this.foundViewport(e,h,s,!0);i.push(e),n.push(...c),r[a]=null,o.splice(t--,1)}}for(let t=0;t<o.length;t++){const e=o[t],a=[];for(const t in r){const s=r[t];s&&s.acceptComponent(e.componentName)&&a.push(s)}if(1===a.length){const c=a.shift(),h=this.foundViewport(e,c,s,!0);i.push(e),n.push(...h),r[c.name]=null,o.splice(t--,1)}}if(s)for(let t=0;t<o.length;t++){const e=o[t];let a=e.viewport;if(!a){const t=e.viewportName;if(!t||!t.length)continue;const s=e.ownsScope;this.getEnabledViewports()[t]||(this.addViewport(t,null,null,{scope:s,forceDescription:!0}),r[t]=this.getEnabledViewports()[t]),a=r[t]}if(a&&a.acceptComponent(e.componentName)){const c=this.foundViewport(e,a,s);i.push(e),n.push(...c),r[a.name]=null,o.splice(t--,1)}}return{foundViewports:i,remainingInstructions:n}}foundViewport(t,e,s,i=!1){t.setViewport(e),i&&(t.needsViewportDescribed=!1);const n=(t.nextScopeInstructions||[]).slice();for(const t of n)null===t.scope&&(t.scope=e.scope||e.owningScope);return n}addViewport(t,e,s,i={}){let n=this.getEnabledViewports()[t];return e&&n&&null!==n.element&&n.element!==e&&(n.enabled=!1,(n=this.children.find(s=>s.name===t&&s.element===e)||null)&&(n.enabled=!0)),n||(n=new du(this.router,t,null,null,this.scope||this.owningScope,!!i.scope,i),this.addChild(n)),(e||s)&&n.setElement(e,s,i),n}removeViewport(t,e,s){return!((e||s)&&!t.remove(e,s))&&(this.removeChild(t),!0)}allViewports(t=!1){const e=this.children.filter(e=>e.enabled||t);for(const s of this.children)e.push(...s.allViewports(t));return e}reparentViewportInstructions(){const t=this.children.filter(t=>t.enabled&&t.content.content&&t.content.content.componentName);if(!t.length)return null;for(const e of t)if(void 0!==e.content.content&&null!==e.content.content){const t=e.reparentViewportInstructions();e.content.content.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map(t=>t.content.content)}async freeContent(t){const e=this.historyCache.find(e=>e.componentInstance===t);void 0!==e&&(this.forceRemove=!0,await e.freeContent(null,null,this.historyCache,!1),this.forceRemove=!1,ou(this.historyCache,t=>t===e))}async unloadContent(){this.content.removeComponent(this.element,this.router.statefulHistory||this.options.stateful),await this.content.terminateComponent(this.router.statefulHistory||this.options.stateful),this.content.unloadComponent(this.historyCache,this.router.statefulHistory||this.options.stateful),this.content.destroyComponent()}clearState(){this.options={},this.content=new uu,this.cache=[]}async waitForElement(){return this.element?Promise.resolve():new Promise(t=>{this.elementResolve=t})}}const pu={isName:function(t){return"string"==typeof t},isType:function(t){return Rr.isType(t)},isInstance:function(t){return!pu.isName(t)&&!pu.isType(t)},getName:function(t){return pu.isName(t)?t:pu.isType(t)?Rr.getDefinition(t).name:pu.getName(t.constructor)},getType:function(t){return pu.isName(t)?null:pu.isType(t)?t:t.constructor},getInstance:function(t){return pu.isName(t)||pu.isType(t)?null:t}},fu={isName:function(t){return"string"==typeof t},isInstance:function(t){return t instanceof du},getName:function(t){return fu.isName(t)?t:t?t.name:null},getInstance:function(t){return fu.isName(t)?null:t}},gu={toViewportInstructions:function(t,e){if(!Array.isArray(e))return gu.toViewportInstructions(t,[e]);const s=[];for(const i of e)if("string"==typeof i)s.push(...t.instructionResolver.parseViewportInstructions(i));else if(i instanceof hu)s.push(i);else if(i.component){const t=i;s.push(new hu(t.component,t.viewport,t.parameters))}else s.push(new hu(i));return s}};class vu{constructor(t,e,s){this.guard=t,this.id=s,this.type="before",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of e.include||[])this.includeTargets.push(new mu(t));for(const t of e.exclude||[])this.excludeTargets.push(new mu(t))}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some(e=>e.matches(t)))&&(!this.excludeTargets.length||!this.excludeTargets.some(e=>e.matches(t)))}check(t,e){return this.guard(t,e)}}class mu{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(pu.isType(t))this.componentType=t,this.componentName=pu.getName(t);else{const e=t;e.component&&(this.componentType=pu.isType(e.component)?pu.getType(e.component):null,this.componentName=pu.getName(e.component)),e.viewport&&(this.viewport=fu.isInstance(e.viewport)?e.viewport:null,this.viewportName=fu.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(new hu(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.componentName||null!==this.componentType&&this.componentType===t.componentType||null!==this.viewportName&&this.viewportName===t.viewportName||null!==this.viewport&&this.viewport===t.viewport)return!0;return!1}}var bu,yu;!function(t){t.Before="before"}(bu||(bu={}));class wu{constructor(){this.guards={before:[]},this.lastIdentity=0}addGuard(t,e){const s=new vu(t,e||{},++this.lastIdentity);return this.guards[s.type].push(s),this.lastIdentity}removeGuard(t){for(const e in this.guards){const s=this.guards[e].findIndex(e=>e.id===t);s>-1&&this.guards[e].splice(s,1)}}passes(t,e,s){let i=!1;for(const n of this.guards[t])if(n.matches(e)){const t=n.check(e,s);if("boolean"==typeof t){if(!t)return!1}else e=t,i=!0}return!i||e}}!function(t){t.default="default",t.disallow="disallow",t.enter="enter",t.refresh="refresh"}(yu||(yu={}));class ku{constructor(t,e){this.nav=t,this.instructions=[],this.link=null,this.linkVisible=null,this.linkActive=null,this.compareParameters=!1,this.children=null,this.visible=!0,this.active="",this.title=e.title,this.meta=e.meta,e.route&&(this.instructions=this.parseRoute(e.route),this.link=this.computeLink(this.instructions)),this.linkActive=e.consideredActive?e.consideredActive:this.link,this.linkActive instanceof Function&&!pu.isType(this.linkActive)||(this.linkActive=gu.toViewportInstructions(this.nav.router,this.linkActive)),this.execute=e.execute,this.compareParameters=!!e.compareParameters,this.linkVisible=void 0===e.condition||e.condition,this.update()}get hasChildren(){return this.children&&this.children.length?"nav-has-children":""}update(){this.visible=this.computeVisible(),this.link&&this.link.length||this.execute?this.active=this.computeActive():this.active="nav-active"===this.active?"nav-active":this.activeChild()?"nav-active-child":""}executeAction(t){this.execute&&this.execute(this),t.stopPropagation()}toggleActive(){this.active=this.active.startsWith("nav-active")?"":"nav-active"}parseRoute(t){return gu.toViewportInstructions(this.nav.router,t)}computeVisible(){return this.linkVisible instanceof Function?this.linkVisible(this):!!this.linkVisible}computeActive(){if(!Array.isArray(this.linkActive))return this.linkActive(this)?"nav-active":"";const t=this.linkActive,e=this.nav.router.instructionResolver.flattenViewportInstructions(this.nav.router.activeComponents);for(const s of t)if(e.every(t=>!t.sameComponent(s,this.compareParameters&&!!s.parametersString)))return"";return"nav-active"}computeLink(t){return this.nav.router.instructionResolver.stringifyViewportInstructions(t)}activeChild(){if(this.children)for(const t of this.children)if(t.active.startsWith("nav-active")||t.activeChild())return!0;return!1}}class Cu{constructor(t,e,s=[],i={}){this.router=t,this.name=e,this.routes=s,this.classes=i,this.update()}addRoutes(t){for(const e of t)this.addRoute(this.routes,e);this.update()}update(){this.updateRoutes(this.routes),this.routes=this.routes.slice()}addRoute(t,e){const s=new ku(this,e);if(t.push(s),e.children){s.children=[];for(const t of e.children)this.addRoute(s.children,t)}}updateRoutes(t){for(const e of t)e.update(),e.children&&e.children.length&&this.updateRoutes(e.children)}}new RegExp(`(\\${["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")})`,"g");class Tu{constructor(){this.transformFromUrl=(t,e)=>t,this.transformToUrl=(t,e)=>t}}const Su=at.createInterface("IRouteTransformer").withDefault(t=>t.singleton(Tu)),xu=at.createInterface("IRouter").withDefault(t=>t.singleton(Au));class Au{constructor(t,e,s,i,n,o){this.container=t,this.navigator=e,this.navigation=s,this.routeTransformer=i,this.linkHandler=n,this.instructionResolver=o,this.rootScope=null,this.navs={},this.activeComponents=[],this.addedViewports=[],this.options={useHref:!0,statefulHistoryLength:0},this.isActive=!1,this.loadedFirst=!1,this.processingNavigation=null,this.lastNavigation=null,this.linkCallback=t=>{let e=t.instruction||"";"string"==typeof e&&e.startsWith("#")&&((e=e.slice(1)).startsWith("/")||(e=`/${e}`)),this.goto(e,{origin:t.anchor}).catch(t=>{throw t})},this.navigatorCallback=t=>{this.processNavigations(t).catch(t=>{throw t})},this.navigatorSerializeCallback=async(t,e)=>{let s=[];for(const t of e)"string"!=typeof t.instruction&&s.push(...this.instructionResolver.flattenViewportInstructions(t.instruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance)),"string"!=typeof t.fullStateInstruction&&s.push(...this.instructionResolver.flattenViewportInstructions(t.fullStateInstruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance));s=s.filter((t,e,s)=>null!==t&&s.indexOf(t)===e);const i={...t};let n=[];i.fullStateInstruction&&"string"!=typeof i.fullStateInstruction&&(n.push(...i.fullStateInstruction),i.fullStateInstruction=this.instructionResolver.stringifyViewportInstructions(i.fullStateInstruction)),i.instruction&&"string"!=typeof i.instruction&&(n.push(...i.instruction),i.instruction=this.instructionResolver.stringifyViewportInstructions(i.instruction)),n=n.filter((t,e,s)=>null!==t&&null!==t.componentInstance&&s.indexOf(t)===e);const r=[];for(const t of n)await this.freeComponents(t,s,r);return i},this.browserNavigatorCallback=t=>{const e=t.state&&t.state.currentEntry?t.state.currentEntry:{instruction:"",fullStateInstruction:""};e.instruction=t.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch(t=>{throw t})},this.processNavigations=async t=>{const e=this.processingNavigation=t;this.options.reportCallback&&this.options.reportCallback(e);let s=!1;const i=e.navigation;let n;(i.back||i.forward)&&e.fullStateInstruction&&(s=!0);let o=s;if("string"==typeof e.instruction){let t=e.instruction,i=t;this.options.transformFromUrl&&!s&&(i=this.options.transformFromUrl(t,this)),Array.isArray(i)?n=i:("/"===(t=i)&&(t=""),n=this.instructionResolver.parseViewportInstructions(t))}else n=e.instruction;n.some(t=>this.instructionResolver.isClearAllViewportsInstruction(t))&&(o=!0,n=n.filter(t=>!this.instructionResolver.isClearAllViewportsInstruction(t)));const a=au(e.query);e.parameters=a.parameters,e.parameterList=a.list;let c=o?this.allViewports().filter(t=>null!==t.content.componentInstance):[];const h=[];let l=this.allViewports().filter(t=>t.options.default&&null===t.content.componentInstance&&h.every(e=>e!==t));const u=[];for(const t of n)null===t.scope&&(t.scope=this.rootScope);const d=[];let{found:p,remaining:f}=this.findViewports(n,d),g=100;for(;p.length||f.length||l.length||o;){if(!g--)throw r.error(2002);for(const t of l)if(h.push(t),p.every(e=>e.viewport!==t)){const e=this.instructionResolver.parseViewportInstruction(t.options.default);e.viewport=t,p.push(e)}const s=[],i=this.guardian.passes("before",p,e);if(!i)return this.cancelNavigation([...s,...u],e);"boolean"!=typeof i&&(p=i);for(const t of p){const i=t.viewport;i.setNextContent(t,e)&&s.push(i),ou(c,t=>t===i)}let n=await Promise.all(s.map(t=>t.canLeave()));if(n.some(t=>!1===t))return this.cancelNavigation([...s,...u],e);if((n=await Promise.all(s.map(async t=>{const e=await t.canEnter();return"boolean"==typeof e?!!e&&t.enter():(await this.goto(e,{append:!0}),await t.abortContentChange(),!0)}))).some(t=>!1===t))return this.cancelNavigation([...s,...u],t);for(const t of s)u.every(e=>e!==t)&&u.push(t);d.push(...p);const a=this.findViewports(f,d);for(p=[];this.addedViewports.length>0;){const t=this.addedViewports.shift();a.found.every(e=>e.viewport!==t.viewport)&&p.push(t)}p=[...p,...a.found],f=a.remaining,l=this.allViewports().filter(t=>t.options.default&&null===t.content.componentInstance&&h.every(e=>e!==t)&&u.every(e=>e!==t)),0===p.length&&0===f.length&&0===l.length&&(p=[...p,...c.map(t=>new hu(this.instructionResolver.clearViewportInstruction,t))],c=[]),o=!1}await Promise.all(u.map(t=>t.loadContent())),await this.replacePaths(e),this.updateNav(),i.new&&!i.first&&!e.repeating&&u.every(t=>t.options.noHistory)&&(e.untracked=!0),u.forEach(t=>{t.finalizeContentChange()}),this.lastNavigation=this.processingNavigation,this.lastNavigation.repeating&&(this.lastNavigation.repeating=!1),this.processingNavigation=null,await this.navigator.finalize(e)},this.guardian=new wu}get isNavigating(){return null!==this.processingNavigation}get statefulHistory(){return void 0!==this.options.statefulHistoryLength&&this.options.statefulHistoryLength>0}activate(t){if(this.isActive)throw new Error("Router has already been activated");this.isActive=!0,this.options={...this.options,transformFromUrl:this.routeTransformer.transformFromUrl,transformToUrl:this.routeTransformer.transformToUrl,...t},this.instructionResolver.activate({separators:this.options.separators}),this.navigator.activate(this,{callback:this.navigatorCallback,store:this.navigation,statefulHistoryLength:this.options.statefulHistoryLength,serializeCallback:this.statefulHistory?this.navigatorSerializeCallback:void 0}),this.linkHandler.activate({callback:this.linkCallback,useHref:this.options.useHref}),this.navigation.activate({callback:this.browserNavigatorCallback,useUrlFragmentHash:this.options.useUrlFragmentHash})}loadUrl(){const t={...this.navigation.viewerState,fullStateInstruction:"",replacing:!0,fromBrowser:!1},e=this.navigator.navigate(t);return this.loadedFirst=!0,e}deactivate(){if(!this.isActive)throw new Error("Router has not been activated");this.linkHandler.deactivate(),this.navigator.deactivate(),this.navigation.deactivate()}findScope(t){return this.ensureRootScope(),this.closestScope(t)}getViewport(t){return this.allViewports().find(e=>e.name===t)||null}connectViewport(t,e,s,i){r.write(1e4,"Viewport added",t,e);const n=this.findScope(e).addViewport(t,e,s,i);let o=this.closestViewport(e);return o===n&&(o=null!==e.parentElement?this.closestViewport(e.parentElement):null),null!==o&&o.addChild(n),n}disconnectViewport(t,e,s){if(!t.owningScope.removeViewport(t,e,s))throw new Error(`Failed to remove viewport: ${t.name}`)}allViewports(t=!1){return this.ensureRootScope(),this.rootScope.allViewports(t)}goto(t,e){if(e=e||{},"string"==typeof t&&!e.query){const[s,i]=t.split("?");t=s,e.query=i}if("string"!=typeof t||t!==this.instructionResolver.clearViewportInstruction){let s=null;if(e.origin&&(s=this.closestScope(e.origin),"string"==typeof t))if(t.startsWith("/"))s=this.rootScope;else if(t.startsWith("."))for(t.startsWith("./")&&(t=t.slice(2));t.startsWith("../");)s=s.parent||s,t=t.slice(3);t=gu.toViewportInstructions(this,t);for(const e of t)null===e.scope&&(e.scope=s)}else t=gu.toViewportInstructions(this,t);if(e.append){if(this.processingNavigation)return this.addedViewports.push(...t),Promise.resolve();if(!this.loadedFirst)return Promise.resolve()}const s={instruction:t,fullStateInstruction:"",title:e.title,data:e.data,query:e.query,replacing:e.replace,repeating:e.append,fromBrowser:!1};return this.navigator.navigate(s)}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}setNav(t,e,s){const i=this.findNav(t);null!=i&&(i.routes=[]),this.addNav(t,e,s)}addNav(t,e,s){let i=this.navs[t];null==i&&(i=this.navs[t]=new Cu(this,t,[],s)),i.addRoutes(e),i.update()}updateNav(t){const e=t?[t]:Object.keys(this.navs);for(const t of e)void 0!==this.navs[t]&&null!==this.navs[t]&&this.navs[t].update()}findNav(t){return this.navs[t]}closestViewport(t){let e=t,s=e.$viewport;for(;!s&&e.parentElement;)s=(e=e.parentElement).$viewport;if(e.$viewport)return e.$viewport;e=t;let i=Rr.behaviorFor(e);for(;!i&&e.parentElement;)e=e.parentElement,Rr.behaviorFor(e);for(;i;){if(i.host){const t=this.allViewports().find(t=>t.element===i.host);if(t)return t}i=i.parent}return null}findViewports(t,e,s=!1){const i=[],n=[];for(;t.length;){const r=t[0].scope,{foundViewports:o,remainingInstructions:a}=r.findViewports(t.filter(t=>t.scope===r),e,s);i.push(...o),n.push(...a),t=t.filter(t=>t.scope!==r)}return{found:i,remaining:n}}async cancelNavigation(t,e){t.forEach(t=>{t.abortContentChange().catch(t=>{throw t})}),await this.navigator.cancel(e),this.processingNavigation=null,e.resolve()}ensureRootScope(){if(!this.rootScope){const t=this.container.get(fo).root;this.rootScope=new du(this,"rootScope",t.host,t.controller.context,null,!0)}}closestScope(t){const e=this.closestViewport(t);return e&&(e.scope||e.owningScope)?e.scope||e.owningScope:this.rootScope}replacePaths(t){this.rootScope.reparentViewportInstructions();let e=this.rootScope.children.filter(t=>t.enabled&&!t.content.content.isEmpty()).map(t=>t.content.content);e=this.instructionResolver.cloneViewportInstructions(e,!0);const s=[];let{found:i,remaining:n}=this.findViewports(e,s,!0),r=100;for(;n.length;){if(!r--)throw new Error("Failed to find viewport when updating viewer paths.");s.push(...i),({found:i,remaining:n}=this.findViewports(n,s,!0))}this.activeComponents=e;let o=this.instructionResolver.stringifyViewportInstructions(e,!1,!0);if(this.options.transformToUrl){const t=this.options.transformToUrl(this.instructionResolver.parseViewportInstructions(o),this);o=Array.isArray(t)?this.instructionResolver.stringifyViewportInstructions(t):t}const a=t.query&&t.query.length?`?${t.query}`:"";t.path=o+a;const c=[new hu(this.instructionResolver.clearViewportInstruction)];return c.push(...this.instructionResolver.cloneViewportInstructions(e,this.statefulHistory)),t.fullStateInstruction=c,Promise.resolve()}async freeComponents(t,e,s){const i=t.componentInstance,n=t.viewport;if(null!==i&&null!==n&&!s.some(t=>t===i)){if(!e.some(t=>t===i))return await n.freeContent(i),void s.push(i);if(null!==t.nextScopeInstructions)for(const i of t.nextScopeInstructions)await this.freeComponents(i,e,s)}}}Au.inject=[ct,class{constructor(){this.entries=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.processNavigations=t=>{const e=t,s={};this.currentEntry===this.uninitializedEntry&&(this.loadState(),this.currentEntry!==this.uninitializedEntry?s.refresh=!0:(s.first=!0,s.new=!0,this.currentEntry={index:0,instruction:"",fullStateInstruction:""},this.entries=[])),void 0===e.index||e.replacing||e.refreshing?e.refreshing||s.refresh?e.index=this.currentEntry.index:e.replacing?(s.replace=!0,s.new=!0,e.index=this.currentEntry.index):(s.new=!0,e.index=void 0!==this.currentEntry.index?this.currentEntry.index+1:this.entries.length):(e.historyMovement=e.index-(void 0!==this.currentEntry.index?this.currentEntry.index:0),e.instruction=void 0!==this.entries[e.index]&&null!==this.entries[e.index]?this.entries[e.index].fullStateInstruction:e.fullStateInstruction,e.replacing=!0,e.historyMovement>0?s.forward=!0:e.historyMovement<0&&(s.back=!0)),this.invokeCallback(e,s,this.currentEntry)},this.uninitializedEntry={instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:""},this.currentEntry=this.uninitializedEntry,this.pendingNavigations=new iu(this.processNavigations)}get queued(){return this.pendingNavigations.length}activate(t,e){if(this.isActive)throw new Error("Navigator has already been activated");this.isActive=!0,this.router=t,this.options={...e}}deactivate(){if(!this.isActive)throw new Error("Navigator has not been activated");this.pendingNavigations.clear(),this.isActive=!1}navigate(t){return this.pendingNavigations.enqueue(t)}refresh(){const t=this.currentEntry;return t===this.uninitializedEntry?Promise.reject():(t.replacing=!0,t.refreshing=!0,this.navigate(t))}go(t){const e=(void 0!==this.currentEntry.index?this.currentEntry.index:0)+t;if(e>=this.entries.length)return Promise.reject();const s=this.entries[e];return this.navigate(s)}setEntryTitle(t){return this.currentEntry.title=t,this.saveState()}get titles(){if(this.currentEntry==this.uninitializedEntry)return[];const t=void 0!==this.currentEntry.index?this.currentEntry.index:0;return this.entries.slice(0,t+1).filter(t=>!!t.title).map(t=>t.title?t.title:"")}getState(){const t=this.options.store?{...this.options.store.state}:{};return{state:t,entries:t.entries||[],currentEntry:t.currentEntry||this.uninitializedEntry}}loadState(){const t=this.getState();this.entries=t.entries,this.currentEntry=t.currentEntry}async saveState(t=!1){if(this.currentEntry===this.uninitializedEntry)return Promise.resolve();const e=this.toStoredEntry(this.currentEntry);if(this.entries[void 0!==e.index?e.index:0]=e,void 0!==this.options.serializeCallback&&this.options.statefulHistoryLength>0){const t=this.entries.length-this.options.statefulHistoryLength;for(let e=0;e<t;e++){const s=this.entries[e];"string"==typeof s.instruction&&"string"==typeof s.fullStateInstruction||(this.entries[e]=await this.options.serializeCallback(s,this.entries.slice(t)))}}if(!this.options.store)return Promise.resolve();const s={entries:[],currentEntry:{...this.toStoreableEntry(e)}};for(const t of this.entries)s.entries.push(this.toStoreableEntry(t));return t?this.options.store.pushNavigatorState(s):this.options.store.replaceNavigatorState(s)}toStoredEntry(t){const{previous:e,fromBrowser:s,replacing:i,refreshing:n,untracked:r,historyMovement:o,navigation:a,resolve:c,reject:h,...l}=t;return l}async finalize(t){this.currentEntry=t;let e=void 0!==this.currentEntry.index?this.currentEntry.index:0;if(this.currentEntry.untracked)t.fromBrowser&&this.options.store&&await this.options.store.popNavigatorState(),e--,this.currentEntry.index=e,this.entries[e]=this.toStoredEntry(this.currentEntry),await this.saveState();else if(this.currentEntry.replacing)this.entries[e]=this.toStoredEntry(this.currentEntry),await this.saveState();else{if(void 0!==this.options.serializeCallback&&this.options.statefulHistoryLength>0){const t=this.entries.length-this.options.statefulHistoryLength;for(const s of this.entries.slice(e))"string"==typeof s.instruction&&"string"==typeof s.fullStateInstruction||await this.options.serializeCallback(s,this.entries.slice(t,e))}this.entries=this.entries.slice(0,e),this.entries.push(this.toStoredEntry(this.currentEntry)),await this.saveState(!0)}this.currentEntry.resolve&&this.currentEntry.resolve()}async cancel(t){t.fromBrowser&&this.options.store&&(t.navigation&&t.navigation.new?await this.options.store.popNavigatorState():await this.options.store.go(-(t.historyMovement||0),!0)),this.currentEntry.resolve&&this.currentEntry.resolve()}invokeCallback(t,e,s){const i={...t};i.navigation=e,i.previous=this.toStoredEntry(s),r.write(1e4,"callback",i,i.previous,this.entries),this.options.callback&&this.options.callback(i)}toStoreableEntry(t){const e={...t};return e.instruction&&"string"!=typeof e.instruction&&(e.instruction=this.router.instructionResolver.stringifyViewportInstructions(e.instruction)),e.fullStateInstruction&&"string"!=typeof e.fullStateInstruction&&(e.fullStateInstruction=this.router.instructionResolver.stringifyViewportInstructions(e.fullStateInstruction)),e}},nu,Su,ru,class{constructor(){this.separators={viewport:"@",sibling:"+",scope:"/",scopeStart:"(",scopeEnd:")",noScope:"!",parameters:"(",parametersEnd:")",parameter:"&",add:"+",clear:"-",action:"."}}activate(t){t=t||{},this.separators={...this.separators,...t.separators}}get clearViewportInstruction(){return this.separators.clear}isClearViewportInstruction(t){return t instanceof hu?t.componentName===this.clearViewportInstruction&&!!t.viewportName:t.startsWith(this.clearViewportInstruction)&&t!==this.clearViewportInstruction}isClearAllViewportsInstruction(t){return t instanceof hu?t.componentName===this.clearViewportInstruction&&!t.viewportName:t===this.clearViewportInstruction}parseViewportInstructions(t){return this.parseViewportInstructionsWorker(t,!0).instructions}parseViewportInstruction(t){const e=this.parseViewportInstructions(t);return e.length?e[0]:new hu("")}stringifyViewportInstructions(t,e=!1,s=!1){return t.map(t=>this.stringifyViewportInstruction(t,e,s)).filter(t=>t&&t.length).join(this.separators.sibling)}stringifyViewportInstruction(t,e=!1,s=!1){if("string"==typeof t)return this.stringifyAViewportInstruction(t,e);{let i=e;if(s){if(t.viewport&&t.viewport.options.noLink)return"";t.needsViewportDescribed||!t.viewport||t.viewport.options.forceDescription||(i=!0)}let n=this.stringifyAViewportInstruction(t,i);return t.nextScopeInstructions&&t.nextScopeInstructions.length&&(n+=1===t.nextScopeInstructions.length?`${this.separators.scope}${this.stringifyViewportInstructions(t.nextScopeInstructions,e,s)}`:`${this.separators.scope}${this.separators.scopeStart}${this.stringifyViewportInstructions(t.nextScopeInstructions,e,s)}${this.separators.scopeEnd}`),n}}stringifyScopedViewportInstructions(t){return Array.isArray(t)?t.map(t=>this.stringifyViewportInstruction(t)).join(this.separators.scope):this.stringifyScopedViewportInstructions([t])}encodeViewportInstructions(t){return encodeURIComponent(this.stringifyViewportInstructions(t)).replace(/\(/g,"%28").replace(/\)/g,"%29")}decodeViewportInstructions(t){return this.parseViewportInstructions(decodeURIComponent(t))}buildScopedLink(t,e){return t&&(e=`/${t}${this.separators.scope}${e}`),e}shouldClearViewports(t){return{clearViewports:t===this.separators.clear||t.startsWith(this.separators.clear+this.separators.add),newPath:t.startsWith(this.separators.clear)?t.slice(2):t}}mergeViewportInstructions(t){const e=[];for(let s of t){"string"==typeof s&&(s=this.parseViewportInstruction(s));const t=e.findIndex(t=>t.sameViewport(s));t>=0?e.splice(t,1,s):e.push(s)}return e}flattenViewportInstructions(t){const e=[];for(const s of t)e.push(s),s.nextScopeInstructions&&e.push(...this.flattenViewportInstructions(s.nextScopeInstructions));return e}cloneViewportInstructions(t,e=!1){const s=[];for(const i of t){const t=new hu(i.componentInstance||i.componentType||i.componentName,e&&i.viewport||i.viewportName,i.parametersString);t.needsViewportDescribed=i.needsViewportDescribed,t.scope=e?i.scope:null,i.nextScopeInstructions&&(t.nextScopeInstructions=this.cloneViewportInstructions(i.nextScopeInstructions,e)),s.push(t)}return s}parseViewportInstructionsWorker(t,e=!1){if(!t)return{instructions:[],remaining:""};t.startsWith(this.separators.scopeStart)&&(t=`${this.separators.scope}${t}`);const s=[];let i=10;for(;t.length&&i;)if(i--,t.startsWith(this.separators.scope)){const e=(t=t.slice(this.separators.scope.length)).startsWith(this.separators.scopeStart);e&&(t=t.slice(this.separators.scopeStart.length));const{instructions:i,remaining:n}=this.parseViewportInstructionsWorker(t,e);s.length?s[s.length-1].nextScopeInstructions=i:s.push(...i),t=n}else{if(t.startsWith(this.separators.scopeEnd))return e&&(t=t.slice(this.separators.scopeEnd.length)),{instructions:s,remaining:t};if(t.startsWith(this.separators.sibling)){if(!e)return{instructions:s,remaining:t};t=t.slice(this.separators.sibling.length)}else{const{instruction:e,remaining:i}=this.parseAViewportInstruction(t);s.push(e),t=i}}return{instructions:s,remaining:t}}findNextToken(t,e){const s={};for(const i of e){t.indexOf(i)>-1&&(s[i]=t.indexOf(i))}const i=Math.min(...Object.values(s));for(const t in s)if(s[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}parseAViewportInstruction(t){const e=this.separators,s=[e.parameters,e.viewport,e.noScope,e.scopeEnd,e.scope,e.sibling];let{token:i,pos:n}=this.findNextToken(t,s);const r=-1!==n?t.slice(0,n):t;t=-1!==n?t.slice(n+i.length):"";let o=void 0;s.shift(),i===e.parameters&&(({token:i,pos:n}=this.findNextToken(t,[e.parametersEnd])),o=t.slice(0,n),t=t.slice(n+i.length),({token:i}=this.findNextToken(t,s)),t=t.slice(i.length));let a=void 0;s.shift(),i===e.viewport&&(({token:i,pos:n}=this.findNextToken(t,s)),a=-1!==n?t.slice(0,n):t,t=-1!==n?t.slice(n+i.length):"");let c=!0;return s.shift(),i===e.noScope&&(c=!1),i!==e.scopeEnd&&i!==e.scope&&i!==e.sibling||(t=`${i}${t}`),{instruction:new hu(r,a,o,c),remaining:t}}stringifyAViewportInstruction(t,e=!1){if("string"==typeof t)return this.stringifyViewportInstruction(this.parseViewportInstruction(t),e);{let s=t.componentName;return t.parametersString&&(s+=this.separators.parameters+t.parametersString+this.separators.parametersEnd),null===t.viewportName||e||(s+=this.separators.viewport+t.viewportName),t.ownsScope||(s+=this.separators.noScope),s||""}}}];let $u=class{constructor(t){this.element=t,this.hasHref=null}binding(){this.updateValue()}valueChanged(t){this.updateValue()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){const t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.element.setAttribute("href",t)}}};$t([Mn({mode:us.toView})],$u.prototype,"value",void 0),$u=$t([zn("goto"),Vt(0,Qn)],$u);let Vu=class{constructor(t){this.router=t,this.name=null,this.routes=null,this.level=0,this.classes={}}get navRoutes(){const t=this.router.navs[this.name];return null!=t?t.routes:[]}get navClasses(){const t=this.router.navs[this.name];return{nav:"",ul:"",li:"",a:"",ulActive:"",liActive:"nav-active",aActive:"",...null!=t?t.classes:{}}}active(t){return"Active"}};$t([Mn],Vu.prototype,"name",void 0),$t([Mn],Vu.prototype,"routes",void 0),$t([Mn],Vu.prototype,"level",void 0),$t([Mn],Vu.prototype,"classes",void 0),Vu=$t([ut(xu,Qn),Ir({name:"au-nav",template:'<template>\n  <nav if.bind="name" class="${name} ${navClasses.nav}">\n    <au-nav routes.bind="navRoutes" classes.bind="navClasses" containerless></au-nav>\n  </nav>\n  <ul if.bind="routes" class="nav-level-${level} ${classes.ul}">\n    <li repeat.for="route of routes" if.bind="route.visible" class="${route.active ? classes.liActive : \'\'} ${route.hasChildren} ${classes.li}">\n      <a if.bind="route.link && route.link.length" href="${route.link}" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <a if.bind="route.execute" click.trigger="route.executeAction($event)" href="" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <span if.bind="(!route.link || !route.link.length) && !route.execute && !route.children" class="${route.active ? classes.aActive : \'\'} ${classes.span} nav-separator" innerhtml.bind="route.title"></span>\n      <a if.bind="(!route.link || !route.link.length) && !route.execute && route.children" click.delegate="route.toggleActive()" href="" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <au-nav if.bind="route.children" routes.bind="route.children" level.bind="level + 1" classes.bind="classes" containerless></au-nav>\n    </li>\n  </ul>\n</template>'})],Vu);let Ou=class{constructor(t,e){this.router=t,this.element=e,this.name="default",this.usedBy="",this.default="",this.noScope=!1,this.noLink=!1,this.noHistory=!1,this.stateful=!1,this.viewport=null}bound(){this.connect()}unbound(){this.disconnect()}attached(){this.viewport&&this.viewport.clearTaggedNodes()}connect(){const t={scope:!this.element.hasAttribute("no-scope")};this.usedBy&&this.usedBy.length&&(t.usedBy=this.usedBy),this.default&&this.default.length&&(t.default=this.default),this.element.hasAttribute("no-link")&&(t.noLink=!0),this.element.hasAttribute("no-history")&&(t.noHistory=!0),this.element.hasAttribute("stateful")&&(t.stateful=!0),this.viewport=this.router.connectViewport(this.name,this.element,this.$controller.context,t)}disconnect(){this.viewport&&this.router.disconnectViewport(this.viewport,this.element,this.$controller.context)}binding(t){this.viewport&&this.viewport.binding(t)}attaching(t){return this.viewport?this.viewport.attaching(t):Promise.resolve()}detaching(t){return this.viewport?this.viewport.detaching(t):Promise.resolve()}async unbinding(t){this.viewport&&await this.viewport.unbinding(t)}};$t([Mn],Ou.prototype,"name",void 0),$t([Mn],Ou.prototype,"usedBy",void 0),$t([Mn],Ou.prototype,"default",void 0),$t([Mn],Ou.prototype,"noScope",void 0),$t([Mn],Ou.prototype,"noLink",void 0),$t([Mn],Ou.prototype,"noHistory",void 0),$t([Mn],Ou.prototype,"stateful",void 0),Ou=$t([Ir({name:"au-viewport",template:'\n    <template>\n      <div class="viewport-header" style="display: none;">\n        Viewport: <b>${name}</b> ${scope ? "[new scope]" : ""} : <b>${viewport.content && viewport.content.toComponentName()}</b>\n      </div>\n    </template>\n  '.replace(/\s+/g,"")}),Vt(0,xu),Vt(1,Qn)],Ou);const Eu=[xu],Iu=[Ou,Vu,$u];let Pu={},Ru=t=>{t.activate(Pu)};const Fu={register:t=>t.register(...Eu,...Iu,hr.with(xu).beforeBind().call(Ru),hr.with(xu).beforeAttach().call(t=>t.loadUrl())),createContainer(){return this.register(at.createContainer())}},Nu={customize:t=>(void 0===t?(Pu={},Ru=t=>{t.activate(Pu)}):t instanceof Function?Ru=t:Pu=t,{...Fu}),...Fu};let Lu=class{toView(t){return t?t.toDateString():""}};Lu=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([Ee({name:"asDate"})],Lu);var ju=s(1),Bu=s.n(ju),Du=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o},Mu=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};function _u(t,e){switch(t instanceof Date&&(e=t.getMonth(),t=t.getFullYear()),e){case 3:case 5:case 8:case 10:return 30;case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 1:return t%4==0?29:28}}let Uu=class{constructor(){this.value=new Date,this.currentYear=this.value.getFullYear(),this.currentMonth=this.value.getMonth(),this.state=0}valueChanged(t=new Date){this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()}setMonth(t){this.currentMonth=t}weeksInMonth(t,e){const s=new Date(t,e,1).getDay();return Math.ceil((_u(t,e)+s)/7)}getDate(t,e,s){const i=s-new Date(t,e,1).getDay()+1;if(i<1)return _u(t,e-1)+i;const n=_u(t,e);return i>n?i%n:i}getWeekday(t){return{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thur",5:"Fri",6:"Sat"}[t]}getMonth(t){return{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}[t]}open(){this.state=1}close(){this.state=0}};Du([Mn({mode:us.twoWay}),Mu("design:type",Date)],Uu.prototype,"value",void 0),Uu=Du([Ir({name:"au-date-picker",template:Bu.a,dependencies:[Lu]})],Uu);var qu=s(2);let zu=class{};zu=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([Ir({name:"date-picker",template:s.n(qu).a,dependencies:[Uu]})],zu);var Ku=s(3);let Hu=class{constructor(){this.modules=["date-picker","date-range"]}};Hu=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([Ir({name:"shell",template:s.n(Ku).a,dependencies:[zu]})],Hu),(new fo).register(su,Nu,Lu).app({host:document.body,component:Hu}).start()}]);
//# sourceMappingURL=main.js.map